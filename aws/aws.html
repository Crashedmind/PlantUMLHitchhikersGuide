

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Create Real Life AWS Diagrams &mdash; The Hitchhiker&#39;s Guide to PlantUML  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/plantumllogo.png"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Kubernetes and Azure" href="../kubernetes/kubernetes.html" />
    <link rel="prev" title="1. Create a Diagram of a Typical Network" href="../NetworkUsersMachines/NetworkUsersMachines.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Hitchhiker's Guide to PlantUML
          

          
            
            <img src="../_static/plantumllogo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/AboutPlantUML.html">1. About PlantUML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/AboutThisGuide.html">2. About this Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/Sections.html">3. Sections of the Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Standard Library</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../NetworkUsersMachines/NetworkUsersMachines.html">1. Create a Diagram of a Typical Network</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Create Real Life AWS Diagrams</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">2.1. AWSArchitectureBlogSample1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#original">2.1.1. Original</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plantuml-equivalent">2.1.2. PlantUML Equivalent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#source">2.1.2.1. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#select-an-icon-library">2.1.3. Select an icon library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#find-icons">2.1.4. Find Icons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#play">2.1.4.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">2.1.4.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#gather-the-icons-we-need">2.1.5. Gather the icons we need</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">2.1.5.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">2.1.5.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#add-text-to-icons">2.1.6. Add Text To Icons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">2.1.6.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">2.1.6.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#simplify-the-icons">2.1.7. Simplify The Icons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">2.1.7.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">2.1.7.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#connect-the-icons">2.1.8. Connect The Icons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">2.1.8.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">2.1.8.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#change-the-layout-ortho">2.1.9. Change the Layout: ortho</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">2.1.9.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">2.1.9.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#change-the-layout-polyline">2.1.10. Change the Layout: polyline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">2.1.10.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">2.1.10.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#add-a-box-package">2.1.11. Add A Box: package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">2.1.11.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">2.1.11.2. Source</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id17">2.2. AWSArchitectureBlogSample2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id18">2.2.1. Original</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">2.2.2. PlantUML Equivalent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#first-pass">2.2.3. First Pass</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id20">2.2.3.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">2.2.3.2. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#second-pass-tweak">2.2.4. Second Pass: Tweak</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">2.2.4.1. Play</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">2.2.4.2. Source</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id24">2.3. AWSArchitectureBlogSample3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">2.3.1. PlantUML Equivalent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id26">2.3.1.1. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id27">2.3.2. Gather the icons we need</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">2.3.2.1. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#add-text-and-simplify-the-icons">2.3.3. Add Text and Simplify The Icons</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id29">2.3.3.1. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#draw-boxes">2.3.4. Draw Boxes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id30">2.3.4.1. Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#draw-boxes-with-procedures">2.3.5. Draw Boxes with Procedures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id32">2.3.5.1. Source</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes/kubernetes.html">3. Kubernetes and Azure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gcp/gcp.html">4. Google Cloud Platform‎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C4/c4acme.html">5. Using C4 To Architect ACME Global Widget Production</a></li>
</ul>
<p class="caption"><span class="caption-text">PlantUML Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PlantUMLSpriteLibraries/plantuml_sprites.html">1. Use Images in Diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scale/scale.html">2. Scaling Sprites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../procedures/procedures.html">3. Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PassSpriteAsParameter/PassSpriteAsParameter.html">4. PassSpriteAsParameter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../color/color.html">5. Colors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../layout/layout.html">6. Layout</a></li>
</ul>
<p class="caption"><span class="caption-text">Understanding Standard Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Stdlib/StdLibOverview.html">1. PlantUML Stdlib Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StdlibUnderTheHood/StdlibUnderstanding.html">2. PlantUML Stdlib Under The Hood</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Stdlib/StandardisingStdLib.html">3. PlantUML Stdlib Under The Hood 2</a></li>
</ul>
<p class="caption"><span class="caption-text">Standardising Standard Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Stdlib/stdlibRequirements.html">1. Standard Library - What We Have And What We Want</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Stdlib/StandardisingStdLib2.html">2. Standardising Standard Library</a></li>
</ul>
<p class="caption"><span class="caption-text">Future</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/future.html">1. Thoughts For The Future</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">2. To Do List</a></li>
</ul>
<p class="caption"><span class="caption-text">Annex Standard Library C4</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../C4/c4.html">1. C4 Lightweight Software Architecture Description Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C4/C4Stdlib.html">2. Using PlantUML Stdlib C4 Lightweight Software Architecture Description Method</a></li>
</ul>
<p class="caption"><span class="caption-text">Annex</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../github/githubFileFinder.html">1. GitHub File Finder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DocumentationAsCode/JourneyDocumentationASCode.html">2. Journey to Documentation as Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Hitchhiker's Guide to PlantUML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>2. Create Real Life AWS Diagrams</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/aws/aws.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-real-life-aws-diagrams">
<h1>2. Create Real Life AWS Diagrams<a class="headerlink" href="#create-real-life-aws-diagrams" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this section we’ll put PlantUML to the test by seeing if we can recreate some real diagrams from the <a class="reference external" href="https://aws.amazon.com/blogs/architecture">AWSArchitectureBlog</a>.</p>
<p>We’ll show the original image from the <a class="reference external" href="https://aws.amazon.com/blogs/architecture">AWSArchitectureBlog</a>, and the PlantUML version for comparison.</p>
<p><strong>We’re aiming for architectural equivalence (not image reproduction).</strong></p>
</div>
<p>We take the 3 most recent entries that show architecture diagrams on the front page of <a class="reference external" href="https://aws.amazon.com/blogs/architecture">AWSArchitectureBlog</a> as at May 2020.</p>
<ol class="arabic simple">
<li><p>BBVA: Helping Global Remote Working with Amazon AppStream 2.0 <a class="reference external" href="https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/">https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/</a></p></li>
<li><p>Building a Scalable Document Pre-Processing Pipeline <a class="reference external" href="https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/">https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/</a></p></li>
<li><p>Serving Billions of Ads in Just 100 ms Using Amazon Elasticache for Redis <a class="reference external" href="https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/">https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/</a></p></li>
</ol>
<p>This sample of 3 diagrams is quite varied in complexity and features.</p>
<p>We’ll approach them in order of complexity.</p>
<div class="section" id="id1">
<h2>2.1. <a class="reference external" href="HelpingGlobalRemoteWorkingwithAmazonAppStream2.0https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/">AWSArchitectureBlogSample1</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="original">
<h3>2.1.1. Original<a class="headerlink" href="#original" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id33">
<img alt="../_images/High-level-digram-1-Smadex-1024x584.png" src="../_images/High-level-digram-1-Smadex-1024x584.png" />
<p class="caption"><span class="caption-text"><a class="reference external" href="HelpingGlobalRemoteWorkingwithAmazonAppStream2.0https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/">AWSArchitectureBlogSample1</a></span><a class="headerlink" href="#id33" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="plantuml-equivalent">
<h3>2.1.2. PlantUML Equivalent<a class="headerlink" href="#plantuml-equivalent" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VP3BRnD13CRlyrUOlH0aiX45BX6g6g8AzO24j3pEpewRjU9vC8-cLTN_7IVBAfK8lUnuxD_tVPwzoWLJgKxCA_QzL4lm2VTPUBDO_UhMmRdWBy_EEdPH-9R9jb7rPo1LnrfeWIB_GrpOiBn8RCbJGda9-P92ZJTzyFaPPI3ls4TCw43OKtc81378m-5YNf-RXbI6O4p4VeTRWaOV2Mi9rJRmQAxN5xFEeQNxjz2C1NIKxhYdHZlGl35Fnlp8bFBi-DNcyPoctnDQBXmyoa57QRQor_VzW7vBYgmiJBT9yVNuSsRZeRrlTIES1qg0CK98iAVDn8x9CBTXx-UNC6gMyAw5dvovvBzcC4-y7OeIf_0bNBJG5Km5iFQ73SrfU1ACRrx2-nO-iuL4lolb0WkjSWm-ana9c0lTbcSxV53t8UmrSLpoNykFBToug3vPmzMn5-vtUhBF1KMqeZlo1HwdKBPFvegyhKx-0000_"><img alt="playbutton_aws0" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-1757bc6936e619b4b52067ffaef0625523412cc0.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;

 skinparam linetype polyline
' skinparam linetype ortho

package &quot;AWS Cloud&quot; {
EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
}

Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
&#64;enduml"/>
</p>
</div>
<div class="section" id="source">
<h4>2.1.2.1. Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;

 skinparam linetype polyline
&#39; skinparam linetype ortho

package &quot;AWS Cloud&quot; {
EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
}

Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="select-an-icon-library">
<h3>2.1.3. Select an icon library<a class="headerlink" href="#select-an-icon-library" title="Permalink to this headline">¶</a></h3>
<p>These are recent diagrams (April, May 2020) so use the newer AWS icon set from AWS i.e.</p>
<ul class="simple">
<li><p>This one: <a class="reference external" href="https://github.com/plantuml/plantuml-stdlib/tree/master/awslib">https://github.com/plantuml/plantuml-stdlib/tree/master/awslib</a></p></li>
<li><p>Not this one <a class="reference external" href="https://github.com/plantuml/plantuml-stdlib/tree/master/aws">https://github.com/plantuml/plantuml-stdlib/tree/master/aws</a></p></li>
</ul>
<p>ref: <a class="reference external" href="https://github.com/awslabs/aws-icons-for-plantuml">https://github.com/awslabs/aws-icons-for-plantuml</a></p>
</div>
<div class="section" id="find-icons">
<h3>2.1.4. Find Icons<a class="headerlink" href="#find-icons" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-048305ccbb79ea5f02d0f86d6f461f11ced9d3b9.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

listsprites
&#64;enduml"/>
</p>
</div>
<div class="section" id="play">
<h4>2.1.4.1. Play<a class="headerlink" href="#play" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/ROqnoi9044RxFSNyHI1f_bn096AXXOAWOcEpIIRiuEnks9qrhTVmUfx4BKG4xGQ-z-OrKNIGP5dzaUiuzGWpFKMcjbwSzajlhNVpxoqFOnAiDVF_cEqVYFKjyIUXcAB4CP1WL6hmNZ10CMJ8QOjb1G5TZm5xc4WCx5WxEMutSCKGoJieNaTPdTt18An9EcFeWk5nkqTO9SfryMzHDVbVBZy1_"><img alt="playbutton_aws1" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id2">
<h4>2.1.4.2. Source<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

<span class="hll">listsprites
</span>@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="gather-the-icons-we-need">
<h3>2.1.5. Gather the icons we need<a class="headerlink" href="#gather-the-icons-we-need" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>For the EC2 icon on right of the diagram; for AWS icons, Orange is AWS Compute so we look at the compute icons.</p></li>
<li><p>Use our github trick to find “users”; they are in General.</p></li>
<li><p>The green box isn’t an AWS service - it’s showing a mobile/laptop client.</p></li>
<li><p>We need “Traditional Server” for “Ad Exchange”</p></li>
<li><p>For the box we’ll use a <a class="reference external" href="https://plantuml.com/deployment-diagram">Deployment</a> Diagram shape; <code class="docutils literal notranslate"><span class="pre">`package`</span></code> or <code class="docutils literal notranslate"><span class="pre">`cloud`</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">`autonumber`</span></code> does not work in these diagrams. So we will manually number the arrows.</p>
</div>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-2dd4f1c72e3e781ac80a188b61128a2557b67b3e.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(EC2, &quot;label&quot;, &quot;tech&quot;)
Users(Users, &quot;label&quot;, &quot;tech&quot;)
TraditionalServer(TraditionalServer, &quot;label&quot;, &quot;tech&quot;)
Mobile(Mobile, &quot;label&quot;, &quot;tech&quot;)

&#64;enduml"/>
</p>
</div>
<div class="section" id="id3">
<h4>2.1.5.1. Play<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VOw_2i8m48VtF4ND544iE8jKYgDJ5UTBSsZWafHBegzlg8lGqE7-SD_tW-jY0axPaTXOFr8ss1pX4ydgzlmO-k1SyASbAs3A2LiWsaybNL5Sq9PMZITwPA0_HLpwWogrQoI1Hf9bIJY-v5RS8t9KSw_G6uEnoGOFD22_aTNYKabTvnVLRrIuwD2RxEWB_"><img alt="playbutton_aws2" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id4">
<h4>2.1.5.2. Source<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(EC2, &quot;label&quot;, &quot;tech&quot;)
Users(Users, &quot;label&quot;, &quot;tech&quot;)
TraditionalServer(TraditionalServer, &quot;label&quot;, &quot;tech&quot;)
Mobile(Mobile, &quot;label&quot;, &quot;tech&quot;)

@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="add-text-to-icons">
<h3>2.1.6. Add Text To Icons<a class="headerlink" href="#add-text-to-icons" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-56a3fcb324c656e936f4a4c1c1719d02da0336c6.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(EC2, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(TraditionalServer, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

&#64;enduml"/>
</p>
</div>
<div class="section" id="id5">
<h4>2.1.6.1. Play<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VOxDIiKm48NtUOgngmZY1TSYztBfKX2gk9uqGnkO_319R1_VMAa85HV9WUzy9-IS2qgfdjMD2oDNI_28IsPdJfVtuHgzZ-7fsBKYrK8dPBvFRVs7ugDn_AynKI11_gMe_lgWsxc3Rl1eQOM1vCEDr3K2tQrwooHPRtSZM-xLgw1rnSM0_3KYqGVIp8k5VXrd3DFFcy_RH_LtDFPI3Riyam2c155W8RExwap1Li-V_"><img alt="playbutton_aws3" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id6">
<h4>2.1.6.2. Source<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

<span class="hll">EC2(EC2, &quot;Smadex Service&quot;, &quot; &quot;)
</span><span class="hll">Users(Users, &quot;Users&quot;, &quot; &quot;)
</span><span class="hll">TraditionalServer(TraditionalServer, &quot;Ad Exchange&quot;, &quot; &quot;)
</span><span class="hll">Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)
</span>
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="simplify-the-icons">
<h3>2.1.7. Simplify The Icons<a class="headerlink" href="#simplify-the-icons" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-091611a23bd348d83513676972eac9307cc59adf.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(EC2, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(TraditionalServer, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

&#64;enduml"/>
</p>
</div>
<div class="section" id="id7">
<h4>2.1.7.1. Play<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VOvDImCn443l-ol6FKKG2vv5MagFWX35ysGpjWEJ3oQ9xSythYm8hZqa0s_UWzcMYbfRaE66uoJD4ppYkGYxpUxTxbC8AJwjxYo7BFp1vEzpxrUaNkTMQOCY_oaXEPQhnf4YASelPJZi7qn_Tp3QW9ukO4a_UQAn4nXlXxT2MipyTpBFPVMgwBboYYZV4QdvGxgvyt2uJ2UCHrh2v_bGypCwUsbEk9n80NE6f70cjxZ3bg9lGRu0_"><img alt="playbutton_aws4" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id8">
<h4>2.1.7.2. Source<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
<span class="hll">!include &lt;awslib/AWSSimplified.puml&gt;
</span>!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(EC2, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(TraditionalServer, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="connect-the-icons">
<h3>2.1.8. Connect The Icons<a class="headerlink" href="#connect-the-icons" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-cb96d38729e69c83b35cfd49a01a4475d5948cdf.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
&#64;enduml"/>
</p>
</div>
<div class="section" id="id9">
<h4>2.1.8.1. Play<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VP5FIyD04CNl-HHZJn5CYbKlHKfhwS638CG_vqrssWpExiRTJLCGlxlJXj0YrKjcClDxyrx8F4JbOsiukI1RSQiHxbKNcChnuhrOEcESdPtT5MGQfZMXpXlHdu54tRGHnuhvByIualXVOeCMlU8J95aj9sbXbCRT5Opw1WhqMwfm91CONIQl0Nr83q-P7EgmUl5AKoHd5Uz5wDE5NksgMjaD2hBGCBmDYgT3oBGlCdjkIwPGemVLDE0yT5WEREyCcNQTpMRGQwPmdSCR1OeXwIUGUThKKOYZ-HGcEHJxtm6ghVO9a-FoAEW_U0etEJoG1e-VBOO8O-b2usp0f2SWOrp7amotShrsdJWE8N-VlClXqJHo9uYvNAoOgW-fP4DKpDBX5cs4hy6Kz7SoHwjRmpy0_"><img alt="playbutton_aws5" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id10">
<h4>2.1.8.2. Source<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

<span class="hll">Users -down-&gt; Mobile: 1. Visits
</span><span class="hll">Mobile -right-&gt; AdExchange: 2. Start auction
</span><span class="hll">AdExchange -right-&gt; Smadex: 3. Bid request / response
</span><span class="hll">Smadex -left-&gt; Mobile: 4. Show Ad
</span><span class="hll">Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
</span>@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="change-the-layout-ortho">
<h3>2.1.9. Change the Layout: ortho<a class="headerlink" href="#change-the-layout-ortho" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-e6fdd90c06eca3dd1e938919b054522e06b6a17a.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

' skinparam linetype polyline
 skinparam linetype ortho

EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
&#64;enduml

"/>
</p>
</div>
<div class="section" id="id11">
<h4>2.1.9.1. Play<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VL9BZzCm4BxxLmoz42IIYWKk5LfjgNhWW8GK7cSddZQZZX_OJjCAyT-PD4IjKDbBPZpVunihVafPnznRLY_8jTmRX0zwI4pDSlsZtdXhlNkyYzLa0zEEq5H1z7T8eWvzngLc_X_5-eRuMSOU7KRDDnJr4jA1ND1HMs1ocCy18NW-ZmTr3_GnTrwfxUQXgAqsU7eDYwc16kEHMbp811QlrBU4CHMNhqmkTOQ-HcqeatUQHn76OcssfxRJRez2MHkOJxFYy-LsnLHazgLlc5A74NG8u2CCsCpSAHbAumTNFiAaMS6R2hvJefp-ca4PQTzbOLp3L_1GGJt-Hz1zEswehk1LC5ru1Myh-4W68lxiCMLOIfU2TmdLn82ISPTlTdWdxfqV975Uyb_BznLyia5yaeIBOylK7gIIa-V5B1qUqMNuDOUI-QsUq9dnuQa__"><img alt="playbutton_aws6" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id12">
<h4>2.1.9.2. Source<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

<span class="hll">&#39; skinparam linetype polyline
</span><span class="hll"> skinparam linetype ortho
</span>
EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
@enduml

</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="change-the-layout-polyline">
<h3>2.1.10. Change the Layout: polyline<a class="headerlink" href="#change-the-layout-polyline" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-118ce39fe9b79f90a2c0afe1dd259e8b5203b5e2.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

skinparam linetype polyline
' skinparam linetype ortho

EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
&#64;enduml"/>
</p>
</div>
<div class="section" id="id13">
<h4>2.1.10.1. Play<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VL9BZzCm4BxxLmoz42IIYWKk5LfjgNhWW8GK7cSddZQZZX_OJjCAyT-PD4IjKDbBPZpVunihVafPnznRLY_8jTmRX0zwI4pDSlsZtdXhlNkyYzLa0zEEq5H1z7T8eWvzngLc_X_5-eRuMSOU7KRDDnIL3kI2Zje2ayDy3WZ1ytayg9Tm1_KnTrwfxUQXgAqsU7eDYwc16kEHMbp811QlrBU4CHMNhqmkTOQ-HcqeatUQHn76OcssfxRJRez2MHkOJxFYy-LonLHazgLlc5A74NG8u2CCsCpSAHbAumTNFiAaMS6R2hvJefp-ca4PQTzbOLp3L_1GGJt-Hj1zEswehk1LC5ru1Myh-4W68lxiCMLOIfU2TmdLn82ISPTlTdWdxfqV975Uyb_BznLyia5yaeIBOylK7gIIazV5B1qUqMNuDOUI-QsUq9dUyXy0_"><img alt="playbutton_aws7" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id14">
<h4>2.1.10.2. Source<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;

<span class="hll">skinparam linetype polyline
</span><span class="hll">&#39; skinparam linetype ortho
</span>
EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="add-a-box-package">
<h3>2.1.11. Add A Box: package<a class="headerlink" href="#add-a-box-package" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-1757bc6936e619b4b52067ffaef0625523412cc0.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;

 skinparam linetype polyline
' skinparam linetype ortho

package &quot;AWS Cloud&quot; {
EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
}

Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
&#64;enduml"/>
</p>
</div>
<div class="section" id="id15">
<h4>2.1.11.1. Play<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VP3BRnD13CRlyrUOlH0aiX45BX6g6g8AzO24j3pEpewRjU9vC8-cLTN_7IVBAfK8lUnuxD_tVPwzoWLJgKxCA_QzL4lm2VTPUBDO_UhMmRdWBy_EEdPH-9R9jb7rPo1LnrfeWIB_GrpOiBn8RCbJGda9-P92ZJTzyFaPPI3ls4TCw43OKtc81378m-5YNf-RXbI6O4p4VeTRWaOV2Mi9rJRmQAxN5xFEeQNxjz2C1NIKxhYdHZlGl35Fnlp8bFBi-DNcyPoctnDQBXmyoa57QRQor_VzW7vBYgmiJBT9yVNuSsRZeRrlTIES1qg0CK98iAVDn8x9CBTXx-UNC6gMyAw5dvovvBzcC4-y7OeIf_0bNBJG5Km5iFQ73SrfU1ACRrx2-nO-iuL4lolb0WkjSWm-ana9c0lTbcSxV53t8UmrSLpoNykFBToug3vPmzMn5-vtUhBF1KMqeZlo1HwdKBPFvegyhKx-0000_"><img alt="playbutton_aws8" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id16">
<h4>2.1.11.2. Source<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;

 skinparam linetype polyline
&#39; skinparam linetype ortho

<span class="hll">package &quot;AWS Cloud&quot; {
</span>EC2(Smadex, &quot;Smadex Service&quot;, &quot; &quot;)
}

Users(Users, &quot;Users&quot;, &quot; &quot;)
TraditionalServer(AdExchange, &quot;Ad Exchange&quot;, &quot; &quot;)
Mobile(Mobile, &quot;Publisher app or web&quot;, &quot; &quot;)

Users -down-&gt; Mobile: 1. Visits
Mobile -right-&gt; AdExchange: 2. Start auction
AdExchange -right-&gt; Smadex: 3. Bid request / response
Smadex -left-&gt; Mobile: 4. Show Ad
Users -right-&gt; Smadex: 5. Impression / click / install / event {request id}
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="id17">
<h2>2.2. <a class="reference external" href="https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/">AWSArchitectureBlogSample2</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id18">
<h3>2.2.1. Original<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="figure align-default" id="id34">
<img alt="../_images/Pre-processing-pipeline-architecture-SM.jpg" src="../_images/Pre-processing-pipeline-architecture-SM.jpg" />
<p class="caption"><span class="caption-text"><a class="reference external" href="https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/">AWSArchitectureBlogSample2</a></span><a class="headerlink" href="#id34" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="id19">
<h3>2.2.2. PlantUML Equivalent<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/hLPTRkCs47xdAQO15bQ0UXSRlmQBTPsV6aZI3RH5NWeKj3IMYL2aG54nqiK2lKQlrvDq98gKR4lgmoQ08l6RRsR8RuOqFvUM6rlbalqaL2Ah5E6IxqifDX-MJ_5AvxbMdmPjiSWBARO2q_S5-G-GoBkeB7xWKevHShqHSfAHeKB3vHJbrkYgM2TQbLEis6h3iybSzrmH8qTbbogzrIze55V9fCkgAgtEqLohh7MTJf3iXC8xv4O9bKrH7z3kjNac5irbfPMbq5Se1KtgTShlYbk-uUNaf9S5LIxXLcYrfi2PQJvx7itVpDVlrfM0pRo4JUcn7SLeNaI2yU9zeJ8s6uaTFyRExeFUyNoJyaFiUdN1PcD5M4bTfK_S9ZldDA1yV1rVvrn8HpWMEoRQFNz6uyopUzTxoo_hMsvnpryTFYbyHxvmx23tiZ8an_zfy5XXXGs9iP9o5Dpm72HDqxuM28MMh_M0pM30getTQQgBrGL8t5eeCQa30vlDV-IF5Jnv9d60zFzphKfRwmtVM5ltQAqoBEj4jAwVuImCWSPd1C3PUU2kTfMgjNDKFuBVJB8Z9yEF_RupDjnDKRo8BS_8cPZBdFz5Vl42MWn-gP9dj3uAAHlHusRMyGa2Xq4ZlASprtoHUtqr8ilGr6vFCJWCMX1kAjLeVEJgpVEgc7-2la2iFsZjOMeiVC4yrNj5jfvWB2mPBhsvNvAsz9HwztQrjpf3kqC3txoATznaU2CaDfeTgjdOe3OUAEfTuvnBEUBQs2PSQTboBAqp3ZWpqYSA4-vfIJXHUjFrDY0ZK5WY-207tH2Mu1s8r617OHpxACGwvnckj7f1Kr9n7EfRYAYD7Jf26-MaoxxNbKurfBpSOTgS0B3HbKgvUGsxzUhkqHMjKIIYuKTofvUFqZTTZ9iMtXHsP4z7c3VjHfruqXcZD2VXDEsqueoTPEZe8oLc8xZRNOEp2SXfaf46O2EuIpAybW0Df9bi4dPQ-LDTGkQwvc55W-QBRYg3zWMZZ1jjhSxVzc2PEDSR0Sg3Ozr1XwTwixVfeLdUS25BlaNtgq80UEHaEuS3nIbiCQrZ3nqgWU2oGqCPF1FMQei6LO9hzQ8JxZUpHw659pQqknr4xjLDmuq3ALmk8cVlWCw5C6Z1se_SmhsczGhZpYb0SAtIGWjbMrzMTr3eXnEnQ_F5j7anOMOdKBSBV1imDhaVGlJ0zn_1CbnhDWp3NEAspZzQMJPg2HbTsIQ8bpxBSHtPCN1C3PNgzkNRtlLOTu-Eki-kLHfiNsDXFpt44JqVEmwDVE-rD-x8Vn3SlE51Mx5jBy6Et4_TzG7rHn_tQjG9MVql83u3OrkjBHfujnKI5SynEWSgG8e6KzWBkuClaYlx-_qT-9_PT-r7TFw7-hf3-5LGhfqWcV_z-vyIRYkH8bWT7DbdYbVbyZy0_"><img alt="playbutton_aws2_0" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-0be1227e4e67c7f0f1ef7adab59fde09c0634666.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/Storage/all.puml&gt;
!include &lt;awslib/ManagementAndGovernance/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/MachineLearning/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/Database/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;





'Compute/General
'Storage/SimpleStorageServiceS3.png
'ApplicationIntegration/SQS.png
'Compute/Lambda.png
'Compute/EC2
'ManagementAndGovernance/CloudWatch.png
'CustomerEngagement/SESEmail.png
'MachineLearning/SageMaker.png
''Mobile/APIGateway.png
'NetworkingAndContentDelivery/APIGateway2.png
'Database/Aurora.png
'ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
' skinparam linetype ortho

'top left section 
'-------------------------------------------------------------
package EC2_Instance {
General(IngestionApp, &quot;Ingestion App&quot;, &quot; &quot;)
General(ChunkingApp, &quot;Chunking Orchestration App&quot;, &quot; &quot;)
}

SimpleStorageServiceS3(S3Staging, &quot;Amazon S3 Staging Bucket&quot;, &quot; &quot;)
SQS(SQSIngest, &quot;Amazon SQS Ingest Queue&quot;, &quot; &quot;)

Lambda(LambdaTrigger, &quot;AWS Lambda Trigger Function&quot;, &quot; &quot;)

LambdaTrigger -up-&gt; IngestionApp
IngestionApp -up-&gt; SQSIngest
SQSIngest -down-&gt; ChunkingApp
S3Staging &lt;-down-&gt; EC2_Instance

'top right section 
'-------------------------------------------------------------
together {
SQS(SQSLargeFileQueue, &quot;Amazon SQS Large File Queue&quot;, &quot; &quot;)
SQS(SQSSmallFileQueue, &quot;Amazon SQS Small File Queue&quot;, &quot; &quot;)
SQS(SQSSingleFileQueue, &quot;Amazon SQS Single File Queue&quot;, &quot; &quot;)

EC2(LargeFileChunkingAppEC2, &quot;Large File Chunking App on EC2&quot;, &quot; &quot;)
Lambda(LambdaSmallFileChunking, &quot;Small File Chunking Lambda&quot;, &quot; &quot;)
Lambda(ImageConversionLambdaFunction, &quot;Image Conversion Lambda Function&quot;, &quot; &quot;)
}
'todo dashed line boundary
package DLQ {
SQSQueue(DLQ1, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ2, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ3, &quot;DLQ&quot;, &quot; &quot;)
}

ChunkingApp -right-&gt; SQSLargeFileQueue
ChunkingApp -right-&gt; SQSSmallFileQueue
ChunkingApp -right-&gt; SQSSingleFileQueue

SQSLargeFileQueue -right-&gt; LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 -down-&gt; SQSSmallFileQueue
SQSSmallFileQueue -right-&gt; LambdaSmallFileChunking
LambdaSmallFileChunking -down-&gt; SQSSingleFileQueue
SQSSingleFileQueue -right-&gt; ImageConversionLambdaFunction

'todo dashed line
SQSLargeFileQueue -down-&gt; DLQ1
SQSSmallFileQueue -down-&gt; DLQ2
SQSSingleFileQueue -down-&gt; DLQ3


'bottom right section 
'-------------------------------------------------------------

SimpleStorageServiceS3(S3Images, &quot;Amazon S3 Images Bucket&quot;, &quot; &quot;)
EC2(EC2DLQFailsafeApp, &quot;DLQ Failsafe App on EC2&quot;, &quot; &quot;)
SQS(SQSConvertedImageQueue, &quot;Amazon SQS Converted Image Queue&quot;, &quot; &quot;)
Lambda(LambdaInferenceInvocation, &quot;Inference Invocation Lambda Function&quot;, &quot; &quot;)
Aurora(Aurora, &quot;Amazon Aurora&quot;, &quot; &quot;)
APIGateway(AmazonAPIGateway, &quot;Amazon API Gateway&quot;, &quot;&quot;)
SageMaker(AmazonSageMaker, &quot;Amazon SageMaker Endpoint&quot;, &quot;&quot;)

DLQ1 -down-&gt; EC2DLQFailsafeApp
DLQ2 -down-&gt; EC2DLQFailsafeApp
DLQ3 -down-&gt; EC2DLQFailsafeApp

EC2DLQFailsafeApp -right-&gt; S3Images

ImageConversionLambdaFunction -down-&gt; S3Images
S3Images -down-&gt; SQSConvertedImageQueue
SQSConvertedImageQueue -left-&gt; LambdaInferenceInvocation
LambdaInferenceInvocation -down-&gt; Aurora
LambdaInferenceInvocation &lt;-left-&gt; AmazonAPIGateway
AmazonAPIGateway &lt;-left-&gt; AmazonSageMaker


'bottom left section 
'-------------------------------------------------------------

CloudWatch(CloudWatch, &quot;Amazon Cloudwatch&quot;, &quot; &quot;)
SNS(SNS1, &quot;Amazon SNS&quot;, &quot;&quot;)
SESEmail(SESEmail, &quot;Email Notification&quot;, &quot;&quot;)

CloudWatch -right-&gt; DLQ
CloudWatch -left-&gt; SNS1
SNS1 -left-&gt; SESEmail

footer %filename() rendered with PlantUML version %version()\nThe Hitchhiker’s Guide to PlantUML
&#64;enduml"/>
</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In general, I recommend starting a diagram without forcing the arrow directions to let PlantUML optimise the layout; then tweak the result.</p>
<p>Because we are trying to compare to an existing complex diagram, I will force the layout to match the original - but only up to a point that allows clarity and comparison.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Because there are a lot of parts to this diagram, I built it step-by-step in sections to validate as I went - which makes it easier to fix a typo, or get feedback as we go.
Not all steps are shown here - only the final ones - but the PlantUML source code files for each step are in the directory with the source and documentation.</p>
</div>
</div>
<div class="section" id="first-pass">
<h3>2.2.3. First Pass<a class="headerlink" href="#first-pass" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-54aacbbb817e695902a4224d7df46c6589bf794a.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/Storage/all.puml&gt;
!include &lt;awslib/ManagementAndGovernance/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/MachineLearning/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/Database/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/SNS.puml&gt;
!include &lt;awslib/CustomerEngagement/SESEmail.puml&gt;



'Compute/General
'Storage/SimpleStorageServiceS3.png
'ApplicationIntegration/SQS.png
'Compute/Lambda.png
'Compute/EC2
'ManagementAndGovernance/CloudWatch.png
'CustomerEngagement/SESEmail.png
'MachineLearning/SageMaker.png
''Mobile/APIGateway.png
'NetworkingAndContentDelivery/APIGateway2.png
'Database/Aurora.png
'ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
' skinparam linetype ortho

'top left section 
'-------------------------------------------------------------
package EC2_Instance {
General(IngestionApp, &quot;Ingestion App&quot;, &quot; &quot;)
General(ChunkingApp, &quot;Chunking Orchestration App&quot;, &quot; &quot;)
}

SimpleStorageServiceS3(S3Staging, &quot;Amazon S3 Staging Bucket&quot;, &quot; &quot;)
SQS(SQSIngest, &quot;Amazon SQS Ingest Queue&quot;, &quot; &quot;)

Lambda(LambdaTrigger, &quot;AWS Lambda Trigger Function&quot;, &quot; &quot;)

LambdaTrigger -up-&gt; IngestionApp
IngestionApp -up-&gt; SQSIngest
SQSIngest -down-&gt; ChunkingApp
S3Staging -down-&gt; EC2_Instance

'top right section 
'-------------------------------------------------------------
SQS(SQSLargeFileQueue, &quot;Amazon SQS Large File Queue&quot;, &quot; &quot;)
SQS(SQSSmallFileQueue, &quot;Amazon SQS Small File Queue&quot;, &quot; &quot;)
SQS(SQSSingleFileQueue, &quot;Amazon SQS Single File Queue&quot;, &quot; &quot;)

EC2(LargeFileChunkingAppEC2, &quot;Large File Chunking App on EC2&quot;, &quot; &quot;)
Lambda(LambdaSmallFileChunking, &quot;Small File Chunking Lambda&quot;, &quot; &quot;)
Lambda(ImageConversionLambdaFunction, &quot;Image Conversion Lambda Function&quot;, &quot; &quot;)

'todo dashed line boundary
package DLQ {
SQSQueue(DLQ1, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ2, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ3, &quot;DLQ&quot;, &quot; &quot;)
}

ChunkingApp -right-&gt; SQSLargeFileQueue
ChunkingApp -right-&gt; SQSSmallFileQueue
ChunkingApp -right-&gt; SQSSingleFileQueue

SQSLargeFileQueue -right-&gt; LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 -down-&gt; SQSSmallFileQueue
SQSSmallFileQueue -right-&gt; LambdaSmallFileChunking
LambdaSmallFileChunking -down-&gt; SQSSingleFileQueue
SQSSingleFileQueue -right-&gt; ImageConversionLambdaFunction

'todo dashed line
SQSLargeFileQueue -down-&gt; DLQ1
SQSSmallFileQueue -down-&gt; DLQ2
SQSSingleFileQueue -down-&gt; DLQ3


'bottom right section 
'-------------------------------------------------------------

SimpleStorageServiceS3(S3Images, &quot;Amazon S3 Images Bucket&quot;, &quot; &quot;)
EC2(EC2DLQFailsafeApp, &quot;DLQ Failsafe App on EC2&quot;, &quot; &quot;)
SQS(SQSConvertedImageQueue, &quot;Amazon SQS Converted Image Queue&quot;, &quot; &quot;)
Lambda(LambdaInferenceInvocation, &quot;Inference Invocation Lambda Function&quot;, &quot; &quot;)
Aurora(Aurora, &quot;Amazon Aurora&quot;, &quot; &quot;)
APIGateway(AmazonAPIGateway, &quot;Amazon API Gateway&quot;, &quot;&quot;)
SageMaker(AmazonSageMaker, &quot;Amazon SageMaker Endpoint&quot;, &quot;&quot;)

DLQ1 -down-&gt; EC2DLQFailsafeApp
DLQ2 -down-&gt; EC2DLQFailsafeApp
DLQ3 -down-&gt; EC2DLQFailsafeApp

EC2DLQFailsafeApp -right-&gt; S3Images

ImageConversionLambdaFunction -down-&gt; S3Images
S3Images -down-&gt; SQSConvertedImageQueue
SQSConvertedImageQueue -left-&gt; LambdaInferenceInvocation
LambdaInferenceInvocation -down-&gt; Aurora
'LambdaInferenceInvocation -left-&gt; APIGateway
'APIGateway -left-&gt; SageMaker


'bottom left section 
'-------------------------------------------------------------

CloudWatch(CloudWatch, &quot;Amazon Cloudwatch&quot;, &quot; &quot;)
SNS(SNS1, &quot;Amazon SNS&quot;, &quot;&quot;)
SESEmail(SESEmail, &quot;Email Notification&quot;, &quot;&quot;)

CloudWatch --&gt; DLQ
CloudWatch -down-&gt; SNS1
SNS1 -down-&gt; SESEmail
&#64;enduml"/>
</p>
</div>
<div class="section" id="id20">
<h4>2.2.3.1. Play<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/hLPDR-Cs4BtpLqnpaGhKkrZxMYpMTPp0G98sK84S2reQoq8eKg2e66xH_zwHA5AoGwbeDm4SYU-zcQ7cW-2tsd1jcbAm7mgPYYP3-9cVQb7iFwzVaeqgIoM_1hcaA2jH70hCFbLa7n2HTTKO_Co5c9AKQb-8MKME4ZKNSv9xhPfgbofPpwaIepJFPsCzSacA4gLPo-nUlQ6MNAQp9fkcDgf4lPLvRpeV83qM4X-GQrd8V4xwXEQaz2kfQ2yR9GsvlaLHqAREStQttF0zhsStlQweSYatXP8xSfphxlL_M2HFoNz8JB9DjYKlN13wYroBtDigiyXLgUikx5S9whSYnMJrgP8vYwOsyvnOtZbzuEK-uvVOThDaqLITDq8rsGitwT4QpNo35LpNCo7P8tz5RUdeqRRt-hVTFJTuucUBpzPs42-jsbTqtMXAnx_buBd11ZiHOpN5gBZc9GZQfZbN29KIvtR18WYmIfkZeheOLO70Wu4QqzOni6ZnFN-iukah9GSe_t_iP6tQVCDVhAzxl9CvrcqW-gwVuCOlWTOt1C3DZrwxEJQopPsLkXNygjCZ6Mb-RVStO-5kYfDLOdXEngHSb_nFiajMq6FmIvE-ed5UABCn_UpE1Zr1O37e4k_ap3PVR1-_woBFKRTcBmbO37eGxXhPvVZArD6BfbfyXN62s7ZHytvhpB_18bCdITmeOSn_icV75UahJv6F7rPwbxa7hdEyAmHsURhCOCT1IrvaqPac9HTYmhJZPapfKyLKM4i6Z1ab9VOR7kMFS9ACjkiu81B8BGcSauiEy9_W34ZKOLTkhFhAnQxaEMwKV4DTKqKiwjg6f1qFWw3tyhwpgBgPWepNHyoweOUzQcJ6zTaFwEt3CysbEqTYMduXQteu9sDgEKsjFEM6S9H6M7GjPllsiZ4cPJw3yxAhWZFsBi8WdwWmcy3jo0Htuv5Ga63zsGHkWuI_nKE1CBCz4gXy82ykSbjp_qL1UXdSoi2l64NSAsDK-R67oSnHtYMWlZZ9BNHva7UZJJ_QvHqlHCqFIDMrpGeE2KnpVvxO31lCEj-1CyKBR7Je9C4ZOISFg56ck9DlAkLkbXqA7fwSPtiXYErZs8PTUv6_JyIM7u31X33emTQEpFnLfhVowy78Gx2LMQKAQNfRrdQGxuTtoMxfvJozcg7PEsYO0jS6ZCtEW_VkzUx5C-5Qip0C2u67DlvaPTaauoFQih5eKkcZ31LaqV3kQL-NOGe_zZB7XejoFBmEZT5XfnRpq_EKnFJxCcXerNUBkrB7xeNWxWbFoXI7_fPhnUFGiB27pHZorQDOhFtd4UUSVKEPDQNu1m00_"><img alt="playbutton_aws2_1" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id21">
<h4>2.2.3.2. Source<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/Storage/all.puml&gt;
!include &lt;awslib/ManagementAndGovernance/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/MachineLearning/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/Database/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/SNS.puml&gt;
!include &lt;awslib/CustomerEngagement/SESEmail.puml&gt;



&#39;Compute/General
&#39;Storage/SimpleStorageServiceS3.png
&#39;ApplicationIntegration/SQS.png
&#39;Compute/Lambda.png
&#39;Compute/EC2
&#39;ManagementAndGovernance/CloudWatch.png
&#39;CustomerEngagement/SESEmail.png
&#39;MachineLearning/SageMaker.png
&#39;&#39;Mobile/APIGateway.png
&#39;NetworkingAndContentDelivery/APIGateway2.png
&#39;Database/Aurora.png
&#39;ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
&#39; skinparam linetype ortho

&#39;top left section 
&#39;-------------------------------------------------------------
package EC2_Instance {
General(IngestionApp, &quot;Ingestion App&quot;, &quot; &quot;)
General(ChunkingApp, &quot;Chunking Orchestration App&quot;, &quot; &quot;)
}

SimpleStorageServiceS3(S3Staging, &quot;Amazon S3 Staging Bucket&quot;, &quot; &quot;)
SQS(SQSIngest, &quot;Amazon SQS Ingest Queue&quot;, &quot; &quot;)

Lambda(LambdaTrigger, &quot;AWS Lambda Trigger Function&quot;, &quot; &quot;)

LambdaTrigger -up-&gt; IngestionApp
IngestionApp -up-&gt; SQSIngest
SQSIngest -down-&gt; ChunkingApp
S3Staging -down-&gt; EC2_Instance

&#39;top right section 
&#39;-------------------------------------------------------------
SQS(SQSLargeFileQueue, &quot;Amazon SQS Large File Queue&quot;, &quot; &quot;)
SQS(SQSSmallFileQueue, &quot;Amazon SQS Small File Queue&quot;, &quot; &quot;)
SQS(SQSSingleFileQueue, &quot;Amazon SQS Single File Queue&quot;, &quot; &quot;)

EC2(LargeFileChunkingAppEC2, &quot;Large File Chunking App on EC2&quot;, &quot; &quot;)
Lambda(LambdaSmallFileChunking, &quot;Small File Chunking Lambda&quot;, &quot; &quot;)
Lambda(ImageConversionLambdaFunction, &quot;Image Conversion Lambda Function&quot;, &quot; &quot;)

&#39;todo dashed line boundary
package DLQ {
SQSQueue(DLQ1, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ2, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ3, &quot;DLQ&quot;, &quot; &quot;)
}

ChunkingApp -right-&gt; SQSLargeFileQueue
ChunkingApp -right-&gt; SQSSmallFileQueue
ChunkingApp -right-&gt; SQSSingleFileQueue

SQSLargeFileQueue -right-&gt; LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 -down-&gt; SQSSmallFileQueue
SQSSmallFileQueue -right-&gt; LambdaSmallFileChunking
LambdaSmallFileChunking -down-&gt; SQSSingleFileQueue
SQSSingleFileQueue -right-&gt; ImageConversionLambdaFunction

&#39;todo dashed line
SQSLargeFileQueue -down-&gt; DLQ1
SQSSmallFileQueue -down-&gt; DLQ2
SQSSingleFileQueue -down-&gt; DLQ3


&#39;bottom right section 
&#39;-------------------------------------------------------------

SimpleStorageServiceS3(S3Images, &quot;Amazon S3 Images Bucket&quot;, &quot; &quot;)
EC2(EC2DLQFailsafeApp, &quot;DLQ Failsafe App on EC2&quot;, &quot; &quot;)
SQS(SQSConvertedImageQueue, &quot;Amazon SQS Converted Image Queue&quot;, &quot; &quot;)
Lambda(LambdaInferenceInvocation, &quot;Inference Invocation Lambda Function&quot;, &quot; &quot;)
Aurora(Aurora, &quot;Amazon Aurora&quot;, &quot; &quot;)
APIGateway(AmazonAPIGateway, &quot;Amazon API Gateway&quot;, &quot;&quot;)
SageMaker(AmazonSageMaker, &quot;Amazon SageMaker Endpoint&quot;, &quot;&quot;)

DLQ1 -down-&gt; EC2DLQFailsafeApp
DLQ2 -down-&gt; EC2DLQFailsafeApp
DLQ3 -down-&gt; EC2DLQFailsafeApp

EC2DLQFailsafeApp -right-&gt; S3Images

ImageConversionLambdaFunction -down-&gt; S3Images
S3Images -down-&gt; SQSConvertedImageQueue
SQSConvertedImageQueue -left-&gt; LambdaInferenceInvocation
LambdaInferenceInvocation -down-&gt; Aurora
&#39;LambdaInferenceInvocation -left-&gt; APIGateway
&#39;APIGateway -left-&gt; SageMaker


&#39;bottom left section 
&#39;-------------------------------------------------------------

CloudWatch(CloudWatch, &quot;Amazon Cloudwatch&quot;, &quot; &quot;)
SNS(SNS1, &quot;Amazon SNS&quot;, &quot;&quot;)
SESEmail(SESEmail, &quot;Email Notification&quot;, &quot;&quot;)

CloudWatch --&gt; DLQ
CloudWatch -down-&gt; SNS1
SNS1 -down-&gt; SESEmail
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="second-pass-tweak">
<h3>2.2.4. Second Pass: Tweak<a class="headerlink" href="#second-pass-tweak" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>For clarity, force the cloudwatch branch to go horizontal and connect from left to DLQ.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">`together`</span></code> to group the SQS and File processing icons.</p></li>
<li><p>I did not change the boxes line style or colour.</p></li>
</ol>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-0be1227e4e67c7f0f1ef7adab59fde09c0634666.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/Storage/all.puml&gt;
!include &lt;awslib/ManagementAndGovernance/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/MachineLearning/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/Database/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;





'Compute/General
'Storage/SimpleStorageServiceS3.png
'ApplicationIntegration/SQS.png
'Compute/Lambda.png
'Compute/EC2
'ManagementAndGovernance/CloudWatch.png
'CustomerEngagement/SESEmail.png
'MachineLearning/SageMaker.png
''Mobile/APIGateway.png
'NetworkingAndContentDelivery/APIGateway2.png
'Database/Aurora.png
'ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
' skinparam linetype ortho

'top left section 
'-------------------------------------------------------------
package EC2_Instance {
General(IngestionApp, &quot;Ingestion App&quot;, &quot; &quot;)
General(ChunkingApp, &quot;Chunking Orchestration App&quot;, &quot; &quot;)
}

SimpleStorageServiceS3(S3Staging, &quot;Amazon S3 Staging Bucket&quot;, &quot; &quot;)
SQS(SQSIngest, &quot;Amazon SQS Ingest Queue&quot;, &quot; &quot;)

Lambda(LambdaTrigger, &quot;AWS Lambda Trigger Function&quot;, &quot; &quot;)

LambdaTrigger -up-&gt; IngestionApp
IngestionApp -up-&gt; SQSIngest
SQSIngest -down-&gt; ChunkingApp
S3Staging &lt;-down-&gt; EC2_Instance

'top right section 
'-------------------------------------------------------------
together {
SQS(SQSLargeFileQueue, &quot;Amazon SQS Large File Queue&quot;, &quot; &quot;)
SQS(SQSSmallFileQueue, &quot;Amazon SQS Small File Queue&quot;, &quot; &quot;)
SQS(SQSSingleFileQueue, &quot;Amazon SQS Single File Queue&quot;, &quot; &quot;)

EC2(LargeFileChunkingAppEC2, &quot;Large File Chunking App on EC2&quot;, &quot; &quot;)
Lambda(LambdaSmallFileChunking, &quot;Small File Chunking Lambda&quot;, &quot; &quot;)
Lambda(ImageConversionLambdaFunction, &quot;Image Conversion Lambda Function&quot;, &quot; &quot;)
}
'todo dashed line boundary
package DLQ {
SQSQueue(DLQ1, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ2, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ3, &quot;DLQ&quot;, &quot; &quot;)
}

ChunkingApp -right-&gt; SQSLargeFileQueue
ChunkingApp -right-&gt; SQSSmallFileQueue
ChunkingApp -right-&gt; SQSSingleFileQueue

SQSLargeFileQueue -right-&gt; LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 -down-&gt; SQSSmallFileQueue
SQSSmallFileQueue -right-&gt; LambdaSmallFileChunking
LambdaSmallFileChunking -down-&gt; SQSSingleFileQueue
SQSSingleFileQueue -right-&gt; ImageConversionLambdaFunction

'todo dashed line
SQSLargeFileQueue -down-&gt; DLQ1
SQSSmallFileQueue -down-&gt; DLQ2
SQSSingleFileQueue -down-&gt; DLQ3


'bottom right section 
'-------------------------------------------------------------

SimpleStorageServiceS3(S3Images, &quot;Amazon S3 Images Bucket&quot;, &quot; &quot;)
EC2(EC2DLQFailsafeApp, &quot;DLQ Failsafe App on EC2&quot;, &quot; &quot;)
SQS(SQSConvertedImageQueue, &quot;Amazon SQS Converted Image Queue&quot;, &quot; &quot;)
Lambda(LambdaInferenceInvocation, &quot;Inference Invocation Lambda Function&quot;, &quot; &quot;)
Aurora(Aurora, &quot;Amazon Aurora&quot;, &quot; &quot;)
APIGateway(AmazonAPIGateway, &quot;Amazon API Gateway&quot;, &quot;&quot;)
SageMaker(AmazonSageMaker, &quot;Amazon SageMaker Endpoint&quot;, &quot;&quot;)

DLQ1 -down-&gt; EC2DLQFailsafeApp
DLQ2 -down-&gt; EC2DLQFailsafeApp
DLQ3 -down-&gt; EC2DLQFailsafeApp

EC2DLQFailsafeApp -right-&gt; S3Images

ImageConversionLambdaFunction -down-&gt; S3Images
S3Images -down-&gt; SQSConvertedImageQueue
SQSConvertedImageQueue -left-&gt; LambdaInferenceInvocation
LambdaInferenceInvocation -down-&gt; Aurora
LambdaInferenceInvocation &lt;-left-&gt; AmazonAPIGateway
AmazonAPIGateway &lt;-left-&gt; AmazonSageMaker


'bottom left section 
'-------------------------------------------------------------

CloudWatch(CloudWatch, &quot;Amazon Cloudwatch&quot;, &quot; &quot;)
SNS(SNS1, &quot;Amazon SNS&quot;, &quot;&quot;)
SESEmail(SESEmail, &quot;Email Notification&quot;, &quot;&quot;)

CloudWatch -right-&gt; DLQ
CloudWatch -left-&gt; SNS1
SNS1 -left-&gt; SESEmail

footer %filename() rendered with PlantUML version %version()\nThe Hitchhiker’s Guide to PlantUML
&#64;enduml"/>
</p>
</div>
<div class="section" id="id22">
<h4>2.2.4.1. Play<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/hLPTRkCs47xdAQO15bQ0UXSRlmQBTPsV6aZI3RH5NWeKj3IMYL2aG54nqiK2lKQlrvDq98gKR4lgmoQ08l6RRsR8RuOqFvUM6rlbalqaL2Ah5E6IxqifDX-MJ_5AvxbMdmPjiSWBARO2q_S5-G-GoBkeB7xWKevHShqHSfAHeKB3vHJbrkYgM2TQbLEis6h3iybSzrmH8qTbbogzrIze55V9fCkgAgtEqLohh7MTJf3iXC8xv4O9bKrH7z3kjNac5irbfPMbq5Se1KtgTShlYbk-uUNaf9S5LIxXLcYrfi2PQJvx7itVpDVlrfM0pRo4JUcn7SLeNaI2yU9zeJ8s6uaTFyRExeFUyNoJyaFiUdN1PcD5M4bTfK_S9ZldDA1yV1rVvrn8HpWMEoRQFNz6uyopUzTxoo_hMsvnpryTFYbyHxvmx23tiZ8an_zfy5XXXGs9iP9o5Dpm72HDqxuM28MMh_M0pM30getTQQgBrGL8t5eeCQa30vlDV-IF5Jnv9d60zFzphKfRwmtVM5ltQAqoBEj4jAwVuImCWSPd1C3PUU2kTfMgjNDKFuBVJB8Z9yEF_RupDjnDKRo8BS_8cPZBdFz5Vl42MWn-gP9dj3uAAHlHusRMyGa2Xq4ZlASprtoHUtqr8ilGr6vFCJWCMX1kAjLeVEJgpVEgc7-2la2iFsZjOMeiVC4yrNj5jfvWB2mPBhsvNvAsz9HwztQrjpf3kqC3txoATznaU2CaDfeTgjdOe3OUAEfTuvnBEUBQs2PSQTboBAqp3ZWpqYSA4-vfIJXHUjFrDY0ZK5WY-207tH2Mu1s8r617OHpxACGwvnckj7f1Kr9n7EfRYAYD7Jf26-MaoxxNbKurfBpSOTgS0B3HbKgvUGsxzUhkqHMjKIIYuKTofvUFqZTTZ9iMtXHsP4z7c3VjHfruqXcZD2VXDEsqueoTPEZe8oLc8xZRNOEp2SXfaf46O2EuIpAybW0Df9bi4dPQ-LDTGkQwvc55W-QBRYg3zWMZZ1jjhSxVzc2PEDSR0Sg3Ozr1XwTwixVfeLdUS25BlaNtgq80UEHaEuS3nIbiCQrZ3nqgWU2oGqCPF1FMQei6LO9hzQ8JxZUpHw659pQqknr4xjLDmuq3ALmk8cVlWCw5C6Z1se_SmhsczGhZpYb0SAtIGWjbMrzMTr3eXnEnQ_F5j7anOMOdKBSBV1imDhaVGlJ0zn_1CbnhDWp3NEAspZzQMJPg2HbTsIQ8bpxBSHtPCN1C3PNgzkNRtlLOTu-Eki-kLHfiNsDXFpt44JqVEmwDVE-rD-x8Vn3SlE51Mx5jBy6Et4_TzG7rHn_tQjG9MVql83u3OrkjBHfujnKI5SynEWSgG8e6KzWBkuClaYlx-_qT-9_PT-r7TFw7-hf3-5LGhfqWcV_z-vyIRYkH8bWT7DbdYbVbyZy0_"><img alt="playbutton_aws2_2" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
</div>
<div class="section" id="id23">
<h4>2.2.4.2. Source<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/Storage/all.puml&gt;
!include &lt;awslib/ManagementAndGovernance/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/MachineLearning/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/Database/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;





&#39;Compute/General
&#39;Storage/SimpleStorageServiceS3.png
&#39;ApplicationIntegration/SQS.png
&#39;Compute/Lambda.png
&#39;Compute/EC2
&#39;ManagementAndGovernance/CloudWatch.png
&#39;CustomerEngagement/SESEmail.png
&#39;MachineLearning/SageMaker.png
&#39;&#39;Mobile/APIGateway.png
&#39;NetworkingAndContentDelivery/APIGateway2.png
&#39;Database/Aurora.png
&#39;ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
&#39; skinparam linetype ortho

&#39;top left section 
&#39;-------------------------------------------------------------
package EC2_Instance {
General(IngestionApp, &quot;Ingestion App&quot;, &quot; &quot;)
General(ChunkingApp, &quot;Chunking Orchestration App&quot;, &quot; &quot;)
}

SimpleStorageServiceS3(S3Staging, &quot;Amazon S3 Staging Bucket&quot;, &quot; &quot;)
SQS(SQSIngest, &quot;Amazon SQS Ingest Queue&quot;, &quot; &quot;)

Lambda(LambdaTrigger, &quot;AWS Lambda Trigger Function&quot;, &quot; &quot;)

LambdaTrigger -up-&gt; IngestionApp
IngestionApp -up-&gt; SQSIngest
SQSIngest -down-&gt; ChunkingApp
S3Staging &lt;-down-&gt; EC2_Instance

&#39;top right section 
&#39;-------------------------------------------------------------
together {
SQS(SQSLargeFileQueue, &quot;Amazon SQS Large File Queue&quot;, &quot; &quot;)
SQS(SQSSmallFileQueue, &quot;Amazon SQS Small File Queue&quot;, &quot; &quot;)
SQS(SQSSingleFileQueue, &quot;Amazon SQS Single File Queue&quot;, &quot; &quot;)

EC2(LargeFileChunkingAppEC2, &quot;Large File Chunking App on EC2&quot;, &quot; &quot;)
Lambda(LambdaSmallFileChunking, &quot;Small File Chunking Lambda&quot;, &quot; &quot;)
Lambda(ImageConversionLambdaFunction, &quot;Image Conversion Lambda Function&quot;, &quot; &quot;)
}
&#39;todo dashed line boundary
package DLQ {
SQSQueue(DLQ1, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ2, &quot;DLQ&quot;, &quot; &quot;)
SQSQueue(DLQ3, &quot;DLQ&quot;, &quot; &quot;)
}

ChunkingApp -right-&gt; SQSLargeFileQueue
ChunkingApp -right-&gt; SQSSmallFileQueue
ChunkingApp -right-&gt; SQSSingleFileQueue

SQSLargeFileQueue -right-&gt; LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 -down-&gt; SQSSmallFileQueue
SQSSmallFileQueue -right-&gt; LambdaSmallFileChunking
LambdaSmallFileChunking -down-&gt; SQSSingleFileQueue
SQSSingleFileQueue -right-&gt; ImageConversionLambdaFunction

&#39;todo dashed line
SQSLargeFileQueue -down-&gt; DLQ1
SQSSmallFileQueue -down-&gt; DLQ2
SQSSingleFileQueue -down-&gt; DLQ3


&#39;bottom right section 
&#39;-------------------------------------------------------------

SimpleStorageServiceS3(S3Images, &quot;Amazon S3 Images Bucket&quot;, &quot; &quot;)
EC2(EC2DLQFailsafeApp, &quot;DLQ Failsafe App on EC2&quot;, &quot; &quot;)
SQS(SQSConvertedImageQueue, &quot;Amazon SQS Converted Image Queue&quot;, &quot; &quot;)
Lambda(LambdaInferenceInvocation, &quot;Inference Invocation Lambda Function&quot;, &quot; &quot;)
Aurora(Aurora, &quot;Amazon Aurora&quot;, &quot; &quot;)
APIGateway(AmazonAPIGateway, &quot;Amazon API Gateway&quot;, &quot;&quot;)
SageMaker(AmazonSageMaker, &quot;Amazon SageMaker Endpoint&quot;, &quot;&quot;)

DLQ1 -down-&gt; EC2DLQFailsafeApp
DLQ2 -down-&gt; EC2DLQFailsafeApp
DLQ3 -down-&gt; EC2DLQFailsafeApp

EC2DLQFailsafeApp -right-&gt; S3Images

ImageConversionLambdaFunction -down-&gt; S3Images
S3Images -down-&gt; SQSConvertedImageQueue
SQSConvertedImageQueue -left-&gt; LambdaInferenceInvocation
LambdaInferenceInvocation -down-&gt; Aurora
LambdaInferenceInvocation &lt;-left-&gt; AmazonAPIGateway
AmazonAPIGateway &lt;-left-&gt; AmazonSageMaker


&#39;bottom left section 
&#39;-------------------------------------------------------------

CloudWatch(CloudWatch, &quot;Amazon Cloudwatch&quot;, &quot; &quot;)
SNS(SNS1, &quot;Amazon SNS&quot;, &quot;&quot;)
SESEmail(SESEmail, &quot;Email Notification&quot;, &quot;&quot;)

CloudWatch -right-&gt; DLQ
CloudWatch -left-&gt; SNS1
SNS1 -left-&gt; SESEmail

footer %filename() rendered with PlantUML version %version()\nThe Hitchhiker’s Guide to PlantUML
@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="id24">
<h2>2.3. <a class="reference external" href="https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/">AWSArchitectureBlogSample3</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default" id="id35">
<img alt="../_images/BBVA-uses-AWS-Transit-Gateway-to-build-a-hub-and-spoke-network-topology-2.png" src="../_images/BBVA-uses-AWS-Transit-Gateway-to-build-a-hub-and-spoke-network-topology-2.png" />
<p class="caption"><span class="caption-text"><a class="reference external" href="https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/">AWSArchitectureBlogSample3</a></span><a class="headerlink" href="#id35" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="id25">
<h3>2.3.1. PlantUML Equivalent<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.plantuml.com/plantuml/uml/VP3BRnD13CRlyrUOlH0aiX45BX6g6g8AzO24j3pEpewRjU9vC8-cLTN_7IVBAfK8lUnuxD_tVPwzoWLJgKxCA_QzL4lm2VTPUBDO_UhMmRdWBy_EEdPH-9R9jb7rPo1LnrfeWIB_GrpOiBn8RCbJGda9-P92ZJTzyFaPPI3ls4TCw43OKtc81378m-5YNf-RXbI6O4p4VeTRWaOV2Mi9rJRmQAxN5xFEeQNxjz2C1NIKxhYdHZlGl35Fnlp8bFBi-DNcyPoctnDQBXmyoa57QRQor_VzW7vBYgmiJBT9yVNuSsRZeRrlTIES1qg0CK98iAVDn8x9CBTXx-UNC6gMyAw5dvovvBzcC4-y7OeIf_0bNBJG5Km5iFQ73SrfU1ACRrx2-nO-iuL4lolb0WkjSWm-ana9c0lTbcSxV53t8UmrSLpoNykFBToug3vPmzMn5-vtUhBF1KMqeZlo1HwdKBPFvegyhKx-0000_"><img alt="playbutton_aws30" src="../_images/play3.png" style="width: 40px;" /></a> Press to play around with this diagram source online.</p>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-3f34e7956e4fc3efb03eb493da7b318a07233914.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

'skinparam linetype polyline


!unquoted procedure $PublicSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6ffef
        borderColor&lt;&lt;$alias&gt;&gt; e6ffef
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure

!unquoted procedure $PrivateSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6fbff
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure


!unquoted procedure $VPCNet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; white
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPC*.4&gt;&lt;/color&gt; &lt;color:grey&gt;$label&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$description&quot; 

!endprocedure

'note the &quot;=&quot; denotes heading 1
skinparam rectangle {
        backgroundColor&lt;&lt;BBVA&gt;&gt; white
        borderColor&lt;&lt;BBVA&gt;&gt; white
        shadowing&lt;&lt;$alias&gt;&gt; false
    }
rectangle  BBVA &lt;&lt;BBVA&gt;&gt; as &quot;
        =&lt;color:blue&gt;BBVA&lt;/color&gt;\n
        \nAuthentication Service&quot; 



AutoScalingGroup(AutoScalingGroup1, &quot;Auto Scaling Group&quot;, &quot;&quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot;Network Load Balancer&quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot;Internet Gateway&quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot;Internet&quot;, &quot; &quot;)
'VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)

VPCInternetGateway -u-&gt; InternetAlt1
VPCVPNConnection(VPCVPNConnection, &quot;VPN\nConnection&quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot;Direct\nConnect&quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot;TransitGateway&quot;, &quot; &quot;)

VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
'Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)
User(User, &quot;BBVA Employee&quot;, &quot; &quot;)


'package &quot;BBVA VPC 2&quot;
'{

    'package &quot;Availability Zone 1&quot;
    '{

        $PublicSubnet($EC2Instance, EC2Instance1, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer1, $colour=&quot;D86613&quot;)

        EC2Instance1 --[hidden]&gt; ELBNetworkLoadBalancer1

    '}


    'package &quot;Availability Zone 2&quot;
    '{

        $PublicSubnet($EC2Instance, EC2Instance2, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer2, $colour=&quot;D86613&quot;)

        EC2Instance2 --[hidden]&gt; ELBNetworkLoadBalancer2

    '}
'}


$VPCNet($VPCElasticNetworkInterface, VPCElasticNetworkInterface2, $label=&quot;BBVA VPC 1&quot;, $colour=&quot;purple&quot;)
$VPCNet($Appstream2_0, Appstream2_02, $label=&quot;Appstream 2.0 VPC&quot;, $description=&quot;Appstream 2.0&quot;, $colour=&quot;purple&quot;)
'$MyOnPrem($VPCCustomerGateway, $label=&quot;Customer Gateway&quot;)

EC2Instance1 -r-&gt; AutoScalingGroup1
AutoScalingGroup1 -r-&gt; EC2Instance2

ELBNetworkLoadBalancer1 -r-&gt; ELBNetworkLoadBalancer
ELBNetworkLoadBalancer -r-&gt;ELBNetworkLoadBalancer2

S3TransitGatewayStaging -u-&gt; DirectConnect
S3TransitGatewayStaging -u-&gt; VPCVPNConnection
S3TransitGatewayStaging -&gt; EC2Instance1
DirectConnect -u-&gt; VPCCustomerGateway
VPCVPNConnection -u-&gt; VPCCustomerGateway

Appstream2_02 -d-&gt; VPCElasticNetworkInterface2 
VPCElasticNetworkInterface2 -&gt; S3TransitGatewayStaging


User -d-&gt; BBVA 
BBVA -d-&gt; Appstream2_02


&#64;enduml

  
    "/>
</p>
</div>
<div class="section" id="id26">
<h4>2.3.1.1. Source<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

&#39;skinparam linetype polyline


!unquoted procedure $PublicSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6ffef
        borderColor&lt;&lt;$alias&gt;&gt; e6ffef
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure

!unquoted procedure $PrivateSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6fbff
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure


!unquoted procedure $VPCNet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; white
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPC*.4&gt;&lt;/color&gt; &lt;color:grey&gt;$label&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$description&quot; 

!endprocedure

&#39;note the &quot;=&quot; denotes heading 1
skinparam rectangle {
        backgroundColor&lt;&lt;BBVA&gt;&gt; white
        borderColor&lt;&lt;BBVA&gt;&gt; white
        shadowing&lt;&lt;$alias&gt;&gt; false
    }
rectangle  BBVA &lt;&lt;BBVA&gt;&gt; as &quot;
        =&lt;color:blue&gt;BBVA&lt;/color&gt;\n
        \nAuthentication Service&quot; 



AutoScalingGroup(AutoScalingGroup1, &quot;Auto Scaling Group&quot;, &quot;&quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot;Network Load Balancer&quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot;Internet Gateway&quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot;Internet&quot;, &quot; &quot;)
&#39;VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)

VPCInternetGateway -u-&gt; InternetAlt1
VPCVPNConnection(VPCVPNConnection, &quot;VPN\nConnection&quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot;Direct\nConnect&quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot;TransitGateway&quot;, &quot; &quot;)

VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
&#39;Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)
User(User, &quot;BBVA Employee&quot;, &quot; &quot;)


&#39;package &quot;BBVA VPC 2&quot;
&#39;{

    &#39;package &quot;Availability Zone 1&quot;
    &#39;{

        $PublicSubnet($EC2Instance, EC2Instance1, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer1, $colour=&quot;D86613&quot;)

        EC2Instance1 --[hidden]&gt; ELBNetworkLoadBalancer1

    &#39;}


    &#39;package &quot;Availability Zone 2&quot;
    &#39;{

        $PublicSubnet($EC2Instance, EC2Instance2, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer2, $colour=&quot;D86613&quot;)

        EC2Instance2 --[hidden]&gt; ELBNetworkLoadBalancer2

    &#39;}
&#39;}


$VPCNet($VPCElasticNetworkInterface, VPCElasticNetworkInterface2, $label=&quot;BBVA VPC 1&quot;, $colour=&quot;purple&quot;)
$VPCNet($Appstream2_0, Appstream2_02, $label=&quot;Appstream 2.0 VPC&quot;, $description=&quot;Appstream 2.0&quot;, $colour=&quot;purple&quot;)
&#39;$MyOnPrem($VPCCustomerGateway, $label=&quot;Customer Gateway&quot;)

EC2Instance1 -r-&gt; AutoScalingGroup1
AutoScalingGroup1 -r-&gt; EC2Instance2

ELBNetworkLoadBalancer1 -r-&gt; ELBNetworkLoadBalancer
ELBNetworkLoadBalancer -r-&gt;ELBNetworkLoadBalancer2

S3TransitGatewayStaging -u-&gt; DirectConnect
S3TransitGatewayStaging -u-&gt; VPCVPNConnection
S3TransitGatewayStaging -&gt; EC2Instance1
DirectConnect -u-&gt; VPCCustomerGateway
VPCVPNConnection -u-&gt; VPCCustomerGateway

Appstream2_02 -d-&gt; VPCElasticNetworkInterface2 
VPCElasticNetworkInterface2 -&gt; S3TransitGatewayStaging


User -d-&gt; BBVA 
BBVA -d-&gt; Appstream2_02


@enduml

  
    
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="id27">
<h3>2.3.2. Gather the icons we need<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">`listsprites`</span></code> limit the number of library categories you include to make it easier to search category by category.
Simplified off (by commenting out the simplified header) so we can see the icon name.</p>
</div>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-c09afb020974828bcaec16208ab1056fa471a015.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
'!include &lt;awslib/Compute/all.puml&gt;
'!include &lt;awslib/mobile/all.puml&gt;
'!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

listsprites

'Appstream2_0
'AutoScalingGroup
'EC2Instance
'InternetAlt1
'DirectConnect
'VPCVPNConnection
'VPCSubnetPublic
'VPCSubnetPrivate
'VPCInternetGateway
'VPCCustomerGateway
'TransitGateway
'VPCElasticNetworkInterface
'ELBNetworkLoadBalancer

'Cloudalt

&#64;enduml"/>
</p>
</div>
<div class="section" id="id28">
<h4>2.3.2.1. Source<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
&#39;!include &lt;awslib/Compute/all.puml&gt;
&#39;!include &lt;awslib/mobile/all.puml&gt;
&#39;!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

listsprites

&#39;Appstream2_0
&#39;AutoScalingGroup
&#39;EC2Instance
&#39;InternetAlt1
&#39;DirectConnect
&#39;VPCVPNConnection
&#39;VPCSubnetPublic
&#39;VPCSubnetPrivate
&#39;VPCInternetGateway
&#39;VPCCustomerGateway
&#39;TransitGateway
&#39;VPCElasticNetworkInterface
&#39;ELBNetworkLoadBalancer

&#39;Cloudalt

@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="add-text-and-simplify-the-icons">
<h3>2.3.3. Add Text and Simplify The Icons<a class="headerlink" href="#add-text-and-simplify-the-icons" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-1134703b2004589dccdb980168ece30c22b57aca.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;


Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
AutoScalingGroup(AutoScalingGroup, &quot; &quot;, &quot; &quot;)
EC2Instance(EC2Instance, &quot; &quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot; &quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot; &quot;, &quot; &quot;)
VPCVPNConnection(VPCVPNConnection, &quot; &quot;, &quot; &quot;)
VPCSubnetPublic(VPCSubnetPublic, &quot; &quot;, &quot; &quot;)
VPCSubnetPrivate(VPCSubnetPrivate, &quot; &quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot; &quot;, &quot; &quot;)
VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot; &quot;, &quot; &quot;)
VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot; &quot;, &quot; &quot;)

Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)

&#64;enduml"/>
</p>
</div>
<div class="section" id="id29">
<h4>2.3.3.1. Source<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;


Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
AutoScalingGroup(AutoScalingGroup, &quot; &quot;, &quot; &quot;)
EC2Instance(EC2Instance, &quot; &quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot; &quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot; &quot;, &quot; &quot;)
VPCVPNConnection(VPCVPNConnection, &quot; &quot;, &quot; &quot;)
VPCSubnetPublic(VPCSubnetPublic, &quot; &quot;, &quot; &quot;)
VPCSubnetPrivate(VPCSubnetPrivate, &quot; &quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot; &quot;, &quot; &quot;)
VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot; &quot;, &quot; &quot;)
VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot; &quot;, &quot; &quot;)

Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)

@enduml
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="draw-boxes">
<h3>2.3.4. Draw Boxes<a class="headerlink" href="#draw-boxes" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-1e2b97a8d68a150a302bd77325d78da1a014052d.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;


skinparam rectangle {
    backgroundColor&lt;&lt;box1&gt;&gt; e6fbff
    borderColor&lt;&lt;$box1&gt;&gt; e6fbff
    shadowing&lt;&lt;$box1&gt;&gt; true
    
    backgroundColor&lt;&lt;box2&gt;&gt; e6ffef
    borderColor&lt;&lt;$box2&gt;&gt; e6ffef
    shadowing&lt;&lt;$box2&gt;&gt; true
}

package &quot;AZ&quot;
{

rectangle box2 &lt;&lt;box2&gt;&gt; as &quot;&lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
    &lt;color:D86613&gt;&lt;$EC2Instance&gt;&lt;/color&gt;\nProxy Instance&quot; 

rectangle box1 &lt;&lt;box1&gt;&gt; as &quot;&lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
    &lt;color:D86613&gt;&lt;$ELBNetworkLoadBalancer&gt;&lt;/color&gt;\n&quot; 
}
&#64;enduml"/>
</p>
</div>
<div class="section" id="id30">
<h4>2.3.4.1. Source<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;


skinparam rectangle {
    backgroundColor&lt;&lt;box1&gt;&gt; e6fbff
    borderColor&lt;&lt;$box1&gt;&gt; e6fbff
    shadowing&lt;&lt;$box1&gt;&gt; true
    
    backgroundColor&lt;&lt;box2&gt;&gt; e6ffef
    borderColor&lt;&lt;$box2&gt;&gt; e6ffef
    shadowing&lt;&lt;$box2&gt;&gt; true
}

package &quot;AZ&quot;
{

rectangle box2 &lt;&lt;box2&gt;&gt; as &quot;&lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
    &lt;color:D86613&gt;&lt;$EC2Instance&gt;&lt;/color&gt;\nProxy Instance&quot; 

rectangle box1 &lt;&lt;box1&gt;&gt; as &quot;&lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
    &lt;color:D86613&gt;&lt;$ELBNetworkLoadBalancer&gt;&lt;/color&gt;\n&quot; 
}
@enduml
</pre></div>
</td></tr></table></div>
<div class="admonition-todo admonition" id="id31">
<p class="admonition-title">Todo</p>
<p>finish aws 3 diagram - figure out best way to do boundaries
<a class="reference external" href="https://github.com/dcasati/kubernetes-PlantUML">https://github.com/dcasati/kubernetes-PlantUML</a> uses the c4 type boundary macros</p>
</div>
</div>
</div>
<div class="section" id="draw-boxes-with-procedures">
<h3>2.3.5. Draw Boxes with Procedures<a class="headerlink" href="#draw-boxes-with-procedures" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<p class="plantuml">
<img src="../_images/plantuml-3f34e7956e4fc3efb03eb493da7b318a07233914.png" alt="&#64;startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

'skinparam linetype polyline


!unquoted procedure $PublicSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6ffef
        borderColor&lt;&lt;$alias&gt;&gt; e6ffef
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure

!unquoted procedure $PrivateSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6fbff
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure


!unquoted procedure $VPCNet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; white
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPC*.4&gt;&lt;/color&gt; &lt;color:grey&gt;$label&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$description&quot; 

!endprocedure

'note the &quot;=&quot; denotes heading 1
skinparam rectangle {
        backgroundColor&lt;&lt;BBVA&gt;&gt; white
        borderColor&lt;&lt;BBVA&gt;&gt; white
        shadowing&lt;&lt;$alias&gt;&gt; false
    }
rectangle  BBVA &lt;&lt;BBVA&gt;&gt; as &quot;
        =&lt;color:blue&gt;BBVA&lt;/color&gt;\n
        \nAuthentication Service&quot; 



AutoScalingGroup(AutoScalingGroup1, &quot;Auto Scaling Group&quot;, &quot;&quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot;Network Load Balancer&quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot;Internet Gateway&quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot;Internet&quot;, &quot; &quot;)
'VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)

VPCInternetGateway -u-&gt; InternetAlt1
VPCVPNConnection(VPCVPNConnection, &quot;VPN\nConnection&quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot;Direct\nConnect&quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot;TransitGateway&quot;, &quot; &quot;)

VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
'Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)
User(User, &quot;BBVA Employee&quot;, &quot; &quot;)


'package &quot;BBVA VPC 2&quot;
'{

    'package &quot;Availability Zone 1&quot;
    '{

        $PublicSubnet($EC2Instance, EC2Instance1, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer1, $colour=&quot;D86613&quot;)

        EC2Instance1 --[hidden]&gt; ELBNetworkLoadBalancer1

    '}


    'package &quot;Availability Zone 2&quot;
    '{

        $PublicSubnet($EC2Instance, EC2Instance2, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer2, $colour=&quot;D86613&quot;)

        EC2Instance2 --[hidden]&gt; ELBNetworkLoadBalancer2

    '}
'}


$VPCNet($VPCElasticNetworkInterface, VPCElasticNetworkInterface2, $label=&quot;BBVA VPC 1&quot;, $colour=&quot;purple&quot;)
$VPCNet($Appstream2_0, Appstream2_02, $label=&quot;Appstream 2.0 VPC&quot;, $description=&quot;Appstream 2.0&quot;, $colour=&quot;purple&quot;)
'$MyOnPrem($VPCCustomerGateway, $label=&quot;Customer Gateway&quot;)

EC2Instance1 -r-&gt; AutoScalingGroup1
AutoScalingGroup1 -r-&gt; EC2Instance2

ELBNetworkLoadBalancer1 -r-&gt; ELBNetworkLoadBalancer
ELBNetworkLoadBalancer -r-&gt;ELBNetworkLoadBalancer2

S3TransitGatewayStaging -u-&gt; DirectConnect
S3TransitGatewayStaging -u-&gt; VPCVPNConnection
S3TransitGatewayStaging -&gt; EC2Instance1
DirectConnect -u-&gt; VPCCustomerGateway
VPCVPNConnection -u-&gt; VPCCustomerGateway

Appstream2_02 -d-&gt; VPCElasticNetworkInterface2 
VPCElasticNetworkInterface2 -&gt; S3TransitGatewayStaging


User -d-&gt; BBVA 
BBVA -d-&gt; Appstream2_02


&#64;enduml

  
    "/>
</p>
</div>
<div class="section" id="id32">
<h4>2.3.5.1. Source<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre></div></td><td class="code"><div class="highlight"><pre><span></span>@startuml
!include &lt;awslib/AWSCommon&gt;
!include &lt;awslib/AWSSimplified.puml&gt;
!include &lt;awslib/Compute/all.puml&gt;
!include &lt;awslib/mobile/all.puml&gt;
!include &lt;awslib/general/all.puml&gt;
!include &lt;awslib/GroupIcons/all.puml&gt;
!include &lt;awslib/CustomerEngagement/all.puml&gt;
!include &lt;awslib/NetworkingAndContentDelivery/all.puml&gt;
!include &lt;awslib/EndUserComputing/all.puml&gt;
!include &lt;awslib/ApplicationIntegration/all.puml&gt;

&#39;skinparam linetype polyline


!unquoted procedure $PublicSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6ffef
        borderColor&lt;&lt;$alias&gt;&gt; e6ffef
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPCSubnetPublic*.4&gt; Public Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure

!unquoted procedure $PrivateSubnet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; e6fbff
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3B48CC&gt;&lt;$VPCSubnetPrivate*.4&gt; Private Subnet&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$label&quot; 

!endprocedure


!unquoted procedure $VPCNet($MySprite, $alias, $description=&quot;&quot;, $label=&quot;&quot;, $technology=&quot;&quot;, $scale=1, $colour=&quot;blue&quot;, $shape=&quot;&quot;, $textsize=&quot;18&quot;)

    skinparam rectangle {
        backgroundColor&lt;&lt;$alias&gt;&gt; white
        borderColor&lt;&lt;$alias&gt;&gt; e6fbff
        shadowing&lt;&lt;$alias&gt;&gt; true
    }
    
    rectangle $alias &lt;&lt;$alias&gt;&gt; as &quot;
        &lt;color:3F8624&gt;&lt;$VPC*.4&gt;&lt;/color&gt; &lt;color:grey&gt;$label&lt;/color&gt;\n
        &lt;color:$colour&gt;&lt;$MySprite&gt;&lt;/color&gt;\n$description&quot; 

!endprocedure

&#39;note the &quot;=&quot; denotes heading 1
skinparam rectangle {
        backgroundColor&lt;&lt;BBVA&gt;&gt; white
        borderColor&lt;&lt;BBVA&gt;&gt; white
        shadowing&lt;&lt;$alias&gt;&gt; false
    }
rectangle  BBVA &lt;&lt;BBVA&gt;&gt; as &quot;
        =&lt;color:blue&gt;BBVA&lt;/color&gt;\n
        \nAuthentication Service&quot; 



AutoScalingGroup(AutoScalingGroup1, &quot;Auto Scaling Group&quot;, &quot;&quot;)
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, &quot;Network Load Balancer&quot;, &quot; &quot;)
VPCInternetGateway(VPCInternetGateway, &quot;Internet Gateway&quot;, &quot; &quot;)
InternetAlt1(InternetAlt1, &quot;Internet&quot;, &quot; &quot;)
&#39;VPCElasticNetworkInterface(VPCElasticNetworkInterface, &quot; &quot;, &quot; &quot;)

VPCInternetGateway -u-&gt; InternetAlt1
VPCVPNConnection(VPCVPNConnection, &quot;VPN\nConnection&quot;, &quot; &quot;)
DirectConnect(DirectConnect, &quot;Direct\nConnect&quot;, &quot; &quot;)
TransitGateway(S3TransitGatewayStaging, &quot;TransitGateway&quot;, &quot; &quot;)

VPCCustomerGateway(VPCCustomerGateway, &quot; &quot;, &quot; &quot;)
&#39;Appstream2_0(Appstream2_0, &quot; &quot;, &quot; &quot;)
Cloudalt(Cloudalt, &quot; &quot;, &quot; &quot;)
User(User, &quot;BBVA Employee&quot;, &quot; &quot;)


&#39;package &quot;BBVA VPC 2&quot;
&#39;{

    &#39;package &quot;Availability Zone 1&quot;
    &#39;{

        $PublicSubnet($EC2Instance, EC2Instance1, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer1, $colour=&quot;D86613&quot;)

        EC2Instance1 --[hidden]&gt; ELBNetworkLoadBalancer1

    &#39;}


    &#39;package &quot;Availability Zone 2&quot;
    &#39;{

        $PublicSubnet($EC2Instance, EC2Instance2, $label=&quot;Proxy Instance&quot;,  $colour=&quot;D86613&quot;)

        $PrivateSubnet($ELBNetworkLoadBalancer, ELBNetworkLoadBalancer2, $colour=&quot;D86613&quot;)

        EC2Instance2 --[hidden]&gt; ELBNetworkLoadBalancer2

    &#39;}
&#39;}


$VPCNet($VPCElasticNetworkInterface, VPCElasticNetworkInterface2, $label=&quot;BBVA VPC 1&quot;, $colour=&quot;purple&quot;)
$VPCNet($Appstream2_0, Appstream2_02, $label=&quot;Appstream 2.0 VPC&quot;, $description=&quot;Appstream 2.0&quot;, $colour=&quot;purple&quot;)
&#39;$MyOnPrem($VPCCustomerGateway, $label=&quot;Customer Gateway&quot;)

EC2Instance1 -r-&gt; AutoScalingGroup1
AutoScalingGroup1 -r-&gt; EC2Instance2

ELBNetworkLoadBalancer1 -r-&gt; ELBNetworkLoadBalancer
ELBNetworkLoadBalancer -r-&gt;ELBNetworkLoadBalancer2

S3TransitGatewayStaging -u-&gt; DirectConnect
S3TransitGatewayStaging -u-&gt; VPCVPNConnection
S3TransitGatewayStaging -&gt; EC2Instance1
DirectConnect -u-&gt; VPCCustomerGateway
VPCVPNConnection -u-&gt; VPCCustomerGateway

Appstream2_02 -d-&gt; VPCElasticNetworkInterface2 
VPCElasticNetworkInterface2 -&gt; S3TransitGatewayStaging


User -d-&gt; BBVA 
BBVA -d-&gt; Appstream2_02


@enduml

  
    
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../kubernetes/kubernetes.html" class="btn btn-neutral float-right" title="3. Kubernetes and Azure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../NetworkUsersMachines/NetworkUsersMachines.html" class="btn btn-neutral float-left" title="1. Create a Diagram of a Typical Network" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>