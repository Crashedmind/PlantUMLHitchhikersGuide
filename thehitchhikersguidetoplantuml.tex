%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}

% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Introduction}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{The Hitchhiker's Guide to PlantUML}
\date{May 26, 2020}
\release{}
\author{unknown}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=120\sphinxpxdimen,height=120\sphinxpxdimen]{{plantumllogo1}.png}
\caption{Where system diagrams meet system reality}\label{\detokenize{index:id2}}\end{figure}


\chapter{Imagine}
\label{\detokenize{index:imagine}}
\begin{sphinxadmonition}{tip}{Tip:}
Imagine being able to
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
share a model or diagram between all members of the team that they can all understand and contribute to and edit

\item {} 
draw diagrams like below automatically from a text description.

\item {} 
describe a system before you build it, when you’re building it, and as you maintain it into the future - keeping the description and the system current, and in sync.

\item {} 
maintain that text version in a source code repository beside the code for the system it is describing

\end{enumerate}

Imagine having a diagramming tool that
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
fits with a developer workflow, and developers are comfortable using

\item {} 
enables \sphinxstylestrong{lightweight just-enough} \sphinxhref{http://agilemodeling.com/essays/barelyGoodEnough.html}{AgileModeling} in a way that meets \sphinxhref{https://tdan.com/best-practices-for-agile-documentation/18936}{AgileModelingBP}

\item {} 
fits with modern practices of Continuous Integration Continuous Delivery - and “everything as code” including diagrams.

\end{enumerate}

Well that’s what PlantUML gives you, and more…
\end{sphinxadmonition}


\chapter{PlantUML Diagram Examples}
\label{\detokenize{index:plantuml-diagram-examples}}
This guide walks through creating PlantUML diagrams, including the ones shown here.


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\sphinxstylestrong{Diagram of a Typical Network}
\\
\hline
\noindent\sphinxincludegraphics[scale=1.0]{{plantuml-37c8ec247632b96b1ec942a75b43eb8a9d642e1e}.png}
\\
\hline
This uses the Plantuml Stdlib Open Security Architecture icon set.
See {\hyperref[\detokenize{NetworkUsersMachines/NetworkUsersMachines:create-a-diagram-of-a-typical-network}]{\sphinxcrossref{\DUrole{std,std-ref}{Create a Diagram of a Typical Network}}}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\sphinxstylestrong{Diagram of an AWS Architecture}
\\
\hline
\noindent\sphinxincludegraphics[scale=1.0]{{plantuml-0be1227e4e67c7f0f1ef7adab59fde09c0634666}.png}
\\
\hline
This uses the AWSlib icon set.
See {\hyperref[\detokenize{aws/aws:create-real-life-aws-diagrams}]{\sphinxcrossref{\DUrole{std,std-ref}{Create Real Life AWS Diagrams}}}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\sphinxstylestrong{Diagram of a Kubernetes Architecture}
\\
\hline
\noindent\sphinxincludegraphics[scale=1.0]{{plantuml-66b6d9919b201f789079b6213fa3392c4411ec4f}.png}
\\
\hline
This uses the Azure and Kubernetes icon sets.
See {\hyperref[\detokenize{Stdlib/StdLibOverview:kubernetes}]{\sphinxcrossref{\DUrole{std,std-ref}{kubernetes}}}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|}
\hline

\sphinxstylestrong{Diagram of a Global Widget Production System Using C4}
\\
\hline
\noindent\sphinxincludegraphics[scale=1.0]{{plantuml-0030585265dac83354a1b981491a78e92165b207}.png}
\\
\hline
This uses the {\hyperref[\detokenize{C4/c4:c4-lightweight-software-architecture-description-method}]{\sphinxcrossref{\DUrole{std,std-ref}{C4 Lightweight Software Architecture Description Method}}}}.
See {\hyperref[\detokenize{C4/c4acme:using-c4-to-architect-acme-global-widget-production}]{\sphinxcrossref{\DUrole{std,std-ref}{Using C4 To Architect ACME Global Widget Production}}}}
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\section{About PlantUML}
\label{\detokenize{about/AboutPlantUML:about-plantuml}}\label{\detokenize{about/AboutPlantUML::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=120\sphinxpxdimen,height=120\sphinxpxdimen]{{plantumllogo}.png}
\caption{Where system diagrams meet system reality}\label{\detokenize{about/AboutPlantUML:id1}}\end{figure}

\begin{sphinxadmonition}{tip}{Tip:}
\sphinxhref{https://modeling-languages.com/interview-plantuml/}{A coffee with Arnaud Roques (creator of PlantUML)} gives a good background to PlantUML from the man himself.
\end{sphinxadmonition}

\begin{sphinxadmonition}{tip}{Tip:}
See \sphinxurl{https://crashedmind.github.io/plantuml.github.io/} for some useful PlantUML links.
\end{sphinxadmonition}


\section{About this Guide}
\label{\detokenize{about/AboutThisGuide:about-this-guide}}\label{\detokenize{about/AboutThisGuide::doc}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=120\sphinxpxdimen,height=120\sphinxpxdimen]{{plantumllogo}.png}
\caption{Where system diagrams meet system reality}\label{\detokenize{about/AboutThisGuide:id1}}\end{figure}


\subsection{Scope}
\label{\detokenize{about/AboutThisGuide:scope}}
The scope of the guide is the PlantUML Standard Library; the Library
that allows creation of icon diagrams like those shown in {\hyperref[\detokenize{index:plantuml-diagram-examples}]{\sphinxcrossref{\DUrole{std,std-ref}{PlantUML Diagram Examples}}}} .

The scope is NOT the various UML type diagrams that PlantUML is better known for.
\sphinxurl{https://real-world-plantuml.com/} is a good resource to learn these by example.


\subsection{Goals}
\label{\detokenize{about/AboutThisGuide:goals}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Create a user-focused guide for PlantUML that enables you, the user, to deliver maximum value with PlantUML.

\item {} 
Create a guide that was better than anything that existed and that I, @crashedmind, would be happy with.

\item {} 
Grow PlantUML; this guide and other information, the tool, and the community.

\end{enumerate}


\subsection{Principles}
\label{\detokenize{about/AboutThisGuide:principles}}
The Principles on which this guide are based:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Deliver Value to the user

\item {} 
Learn by Playing: The examples include a link to allow you to edit and play with them easily - no setup required.

\item {} 
To teach is to learn twice.

\item {} 
Open Source - The Network Effect - anyone can and should contribute to this guide.

\item {} 
It must be fun to write it - and to read it.

\item {} 
Documentation-Of-Code Documentation-As-Code: documentation of the examples, and the example source live together in the same directory in Git.

\end{enumerate}


\subsubsection{Deliver Value To The User}
\label{\detokenize{about/AboutThisGuide:deliver-value-to-the-user}}\label{\detokenize{about/AboutThisGuide:delivervalue-label}}
\begin{sphinxadmonition}{tip}{Tip:}
“Users want powerful tools that amplify their capabilities and enable them to do their tasks.”

\sphinxurl{http://www.ifp.illinois.edu/nabhcs/abstracts/shneiderman.html}
\end{sphinxadmonition}

This guide is focused on enabling you to do what you need to do - empowered by PlantUML.
So it is outcome focused.

In my professional role building products in the software industry, I tell my team members:
\sphinxstyleemphasis{The customer cares about what they are trying to do - not your product.}

This tweet illustrates this graphically:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{o}{.}\PYG{o}{.} \PYG{n}{tweet}\PYG{p}{:}\PYG{p}{:} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{twitter}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{UserOnboard}\PYG{o}{/}\PYG{n}{status}\PYG{o}{/}\PYG{l+m+mi}{408372844876165120}
\end{sphinxVerbatim}

So the examples focus on what we’re trying to do - and explain only the parts of PlantUML that are necessary to do it.


\subsubsection{Learn by Playing}
\label{\detokenize{about/AboutThisGuide:learn-by-playing}}
Each chapter has an outcome.

Each step in each chapter has
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
An outcome - the step heading

\item {} 
Source code - for the diagram

\item {} 
Play - where you can test the diagram and play with it.

\item {} 
Explore - where you can confirm your understanding by trying things as you play.

\end{enumerate}


\subsubsection{To Teach Is To Learn Twice}
\label{\detokenize{about/AboutThisGuide:to-teach-is-to-learn-twice}}\begin{quote}

If I knew all this info already, I would have no interest in writing this guide.

It was the quest for knowledge that drove it, and the quest for a solution to a problem that consumed my thoughts (making PlantUML StdLib simpler, standard, and more friendly and powerful to the user ).

There’s no better way to learn than by writing a guide for others - and having the master on hand to provide insights as you go - and the community to share their knowledge.

I expect to learn from feedback on this guide.
\end{quote}


\subsubsection{Open Source - The Network Effect}
\label{\detokenize{about/AboutThisGuide:open-source-the-network-effect}}
PlantUML, and all the {\hyperref[\detokenize{about/AboutThisGuide:tools-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Tools Used}}}} required to write this guide are Open Source.

Moreover, the first release is intended as a seed to be grown by the PlantUML community.


\subsubsection{It Must Be Fun To Write It - And To Read It}
\label{\detokenize{about/AboutThisGuide:it-must-be-fun-to-write-it-and-to-read-it}}
Happy People are Productive People are Happy People!


\subsubsection{Documentation-Of-Code Documentation-As-Code}
\label{\detokenize{about/AboutThisGuide:documentation-of-code-documentation-as-code}}
As part of the Agile, and Continuous Delivery, movements, software, and the models that describe software, are necessarily coming closer together.
PlantUML is one way to enable this.

See {\hyperref[\detokenize{DocumentationAsCode/JourneyDocumentationASCode:journeydoc-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Journey to Documentation as Code}}}} for more details.


\subsection{This Guide}
\label{\detokenize{about/AboutThisGuide:this-guide}}
I, @crashedmind, wrote this guide as part of my own “Journey to Documentation as Code” where I landed on PlantUML and Sphinx as the main tools for proposing, analysing, documenting, maintaining software systems based on working with thousands of engineers across the globe.

I am a regular user of PlantUML and I believe in it.

I had initially contributed the OSA icon set to PlantUML Stdlib. Specifically I generated the icon set and published it in my github. I was pleasantly surprised that it was picked up and included in the PlantUML Stdlib.

Some time later I was working on a project that used an Elastic stack, and I needed the Elastic icon set for PlantUML. So I created that - and submitted via an email and PR.

I was thinking about adding more icon sets I needed, and trying to better understand the macros people had defined as part of their stdlib icon sets.
That’s descibed in the chapter todo

So, I contacted Arnaud to see if anything like this was on the roadmap.

In the subsequent 3 weeks, the idea to standardize the Stdlib was discussed, and this guide went from zero to first release.

To enable the StdLib standardisation, I suggested the \sphinxstyleemphasis{keyword arguments} and Arnaud produced a release to play with next day - and this became part of an official release:

\sphinxurl{https://plantuml.com/news}
\sphinxstyleemphasis{17 May, 2020: Use keyword arguments with the preprocessor (V1.2020.10). (Thanks to Crashedmind for the suggestion !)}

See {\hyperref[\detokenize{StdlibUnderTheHood/StdlibUnderstanding:understandingstdlib-label}]{\sphinxcrossref{\DUrole{std,std-ref}{PlantUML Stdlib Under The Hood}}}} for more info.

This 3 weeks for me was an opportunity in my career to give something back.


\subsubsection{Tools Used}
\label{\detokenize{about/AboutThisGuide:tools-used}}\label{\detokenize{about/AboutThisGuide:tools-label}}
Sphinx and PlantUML (running in Docker), and GitHub, are the primary tools used for this guide.
\begin{itemize}
\item {} 
The document (as HTML and images, generated by Sphinx and PlantUML respectively) and the document source (as ReStructuredText, Plantuml source files) are hosted in Github.

\item {} 
GitHub actions and workflow are used e.g. when output html is committed, it triggers a link checker than auto-creates an Github issue for the project if a URL link is broken.

\end{itemize}

The source for this guide, the diagrams, amd the tools to create them, all live in the same repo.


\subsection{Credits}
\label{\detokenize{about/AboutThisGuide:credits}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Arnaud for giving us PlantUML. And for being receptive and responsive; from my initial contact asking questions, to subsequent interactions providing suggestions.

\end{enumerate}


\subsection{Feedback}
\label{\detokenize{about/AboutThisGuide:feedback}}
This is an initial version; fixes and features will be added over time.

To submit a suggestion, create an issue on github.


\section{Thoughts For The Future}
\label{\detokenize{about/future:thoughts-for-the-future}}\label{\detokenize{about/future::doc}}
Having a diagram source as a text file is powerful because it allows for machine processing e.g.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
If standard building blocks are used, it allows automated analysis and recognition of the diagram text source, and recommendations to the user e.g.
if an arrow text includes “TLS” to indicate the link is secured, then an external program can provide recommendations on TLS protocol version, cipher-suites etc…

\item {} 
As companies move towards standard architecture icon sets (AWS, MS/Azure, Google,…), it is possible to process an existing architecture diagram image with optical recognition (and machine learning) and create the text (plantuml) equivalent.

\end{enumerate}


\section{Create a Diagram of a Typical Network}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:create-a-diagram-of-a-typical-network}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines::doc}}
\begin{sphinxadmonition}{note}{Note:}
In this section we’re going to create a full network diagram by walking through it step by step.

Each step has
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
An objective - the step heading

\item {} 
Source code - for the diagram

\item {} 
Play - where you can test the diagram and play with it.

\item {} 
Explore - where you can confirm your understanding by trying things as you play.

\end{enumerate}
\end{sphinxadmonition}


\subsection{Example Network Diagram}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:example-network-diagram}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-37c8ec247632b96b1ec942a75b43eb8a9d642e1e}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Here’s one we made earlier - and you can too}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id15}}\end{figure}

Here we have a typical network diagram:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Mary is a Developer in the Product team. She has a Windows 10 PC and an Android phone.

\item {} 
Bob is an Accountant in the Accounts team. He has Mac and an iPhone.

\item {} 
They connect to the office server, and via a firewall to the Internet.

\end{enumerate}

There are 3 types of element with different properties:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Users: Role, Name, Team

\item {} 
Machines: Type, IP address, OS

\item {} 
Network Equipment: Type, IP address, and e.g. product model and number

\end{enumerate}


\subsection{Select an icon library}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:select-an-icon-library}}
The OpenSecurityArchitecture library has a nice set of users and network components so we’ll use that.

\begin{sphinxadmonition}{tip}{Tip:}
To see all stdlib icon libraries, browse to \sphinxurl{https://github.com/plantuml/plantuml-stdlib}
\end{sphinxadmonition}


\subsection{View all the icons with listsprites}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:view-all-the-icons-with-listsprites}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Create a blank diagram that includes the icon files we’re interested in

\item {} 
Add a “\sphinxhref{https://plantuml.com/\#}{listsprites}” statement

\end{enumerate}

\begin{sphinxadmonition}{tip}{Tip:}
\sphinxhref{https://plantuml.com/\#}{listsprites} lists all the sprites in the files you include in your diagram source
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-366a0795bf0f7e265713618a5cb344bf23a3187b}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Using listsprites to show all icons in a library}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id16}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:source}}
\fvset{hllines={, 11,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml

listsprites

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:play}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VP2nQdCn38LtFuKp198XCVpZFmKoD4C3WJHR5zVMhKLj-IB9lNJhQ\_Jr-YHreKs7qhiTpgV31zg9UjPMiZ6B20CIs2h-r0kRL4VvxnpxQVk8cjf34-1GIO5q6sfnU\_QI81Qaw4xParwEjviw0Wc4ngWldaD2XQ2DuTy6-rPSyQB0Pe4KSejNdTlNKYfjnvv\_mqitEv\_p7\_ZWEKwUOURaY19cy1duULPnHeKVR3AAoiYz56E6MXNOBWVCGBx0QcqPA093j1Dgij\_FiTqXMCakly9gVKzt2Um1DQI4Jy3lhszYRnfsjTRhqEo0ugVu0m00}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:explore}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Take a look at some other stdlib libraries e.g. \sphinxhref{http://www.plantuml.com/plantuml/uml/ROqnoi9044RxFSNyHI1f\_bn096AXXOAWOcEpIIRiuEnks9qrhTVmUfx4BKG4xGQ-z-OrKNIGP5dzaUiuzGWpFKMcjbwSzajlhNVpxoqFOnAiDVF\_cEqVYFKjyIUXcAB4CP1WL6hmNZ10CMJ8QOjb1G5TZm5xc4WCx5WxEMutSCKGoJieNaTPdTt18An9EcFeWk5nkqTO9SfryMzHDVbVBZy1}{awslib}

\item {} 
What happens if we don’t include any libraries?

\end{enumerate}


\subsection{Gather the icons we need}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:gather-the-icons-we-need}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Create a diagram with the selected icons

\item {} 
This allows us to see and review the icons first with the icon name

\item {} 
It also confirms everything is working before we connect them together.

\end{enumerate}

\begin{sphinxadmonition}{note}{Note:}
We’re using a Blue theme, so our icons appear blue by default. Yours may appear yellow.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-26f0fe52998e9a4f54d6a7178eaab475d92b215c}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Select the subset of icons for our diagram}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id17}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id1}}
\begin{sphinxadmonition}{tip}{Tip:}
We can’t have the icon on its own e.g. “\textless{}\$osa\_user\_green\_developer\textgreater{}” would not work
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml

\PYGZsq{} Users
osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer: \PYGZlt{}\PYGZdl{}osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer\PYGZgt{}
osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations: \PYGZlt{}\PYGZdl{}osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations\PYGZgt{}
osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager: \PYGZlt{}\PYGZdl{}osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager\PYGZgt{}

\PYGZsq{} Devices
osa\PYGZus{}desktop: \PYGZlt{}\PYGZdl{}osa\PYGZus{}desktop\PYGZgt{}
osa\PYGZus{}laptop: \PYGZlt{}\PYGZdl{}osa\PYGZus{}laptop\PYGZgt{}
osa\PYGZus{}iPhone: \PYGZlt{}\PYGZdl{}osa\PYGZus{}iPhone\PYGZgt{}
osa\PYGZus{}server: \PYGZlt{}\PYGZdl{}osa\PYGZus{}server\PYGZgt{}

\PYGZsq{} Network
osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router: \PYGZlt{}\PYGZdl{}osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router\PYGZgt{}
osa\PYGZus{}hub: \PYGZlt{}\PYGZdl{}osa\PYGZus{}hub\PYGZgt{}
osa\PYGZus{}firewall: \PYGZlt{}\PYGZdl{}osa\PYGZus{}firewall\PYGZgt{}
osa\PYGZus{}osa\PYGZus{}cloud: \PYGZlt{}\PYGZdl{}osa\PYGZus{}cloud\PYGZgt{}

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id2}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VPB1Qjmm48RlVWe56feS4aEFeOH02isXAGjjRWMZIl-kXvL7PZIowQslqTVharIki0iDkmV3\_FFDx\_b1yv3KYkOXDCs5nvuO9YQxAmtJguxfhct5phS7qZv\_pmdY8YjORrqSsaUngOSVY7sx2vRrvVdJJHp12IuBwGyhhYU5qonuTqF5czh19eKq5yGkPB-jQn\_ZC4I-7Klz6huaI6j3E86VhFZP2iwCF5DoP\_0No0GvDq2AVxXvQvP8gIcuowNg3W9mvp4Xn15oPzw\_ESNk\_tSjJQiKELNR2VZALnw462brWsLxM9UU7RbVed\_0H0url4SwQXohTPDrLR3ZYghQ2EtwoAXaLPKao5IJRAek\_GoTenphqhy1kfa4OGadCMirdQRrz-KArx5IrjwU1BCDOGMhhdJvN8ZPBtWJ9T8-HeMOopq5i1rmTMq4x27mPYRjpNhIPe8aYcmkQy5Nrz\_uQm\_pHEhwdewGtpz\_9VCnauVHk1cR1x1VpkKF}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id3}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Change the server type to a different type of server

\item {} 
Change the Operations user type to a different type of user

\end{enumerate}


\subsection{Decorate the Icons}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:decorate-the-icons}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
We use the default functions defined as part of stdlib that decorate our raw sprites

\item {} 
This makes them much more visually appealing.

\end{enumerate}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-47a054b3998c4e9b0af71fe334b7d8302d9639ea}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Decorate the icons for our diagram}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id18}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id4}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml


\PYGZsq{} Users
osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer(osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations(osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager(osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})

\PYGZsq{} Devices
osa\PYGZus{}desktop(osa\PYGZus{}desktop, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}laptop(osa\PYGZus{}laptop, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}iPhone(osa\PYGZus{}iPhone, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}server(osa\PYGZus{}server, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})

\PYGZsq{} Network
osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router(osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}hub(osa\PYGZus{}hub, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}firewall(osa\PYGZus{}firewall, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
osa\PYGZus{}cloud(osa\PYGZus{}cloud, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml


\end{sphinxVerbatim}


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id5}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/XPF1QXin54NtynMA8LI6nWDTTXL8eLaqnT1cLp2AT6qzh966fwSPkkjlzFVw9PM9uuGsSbO-ddCbtSTehhCObZA4hhjms5A4IjciwmFbHSRyiU\_PpAiTYIyF9ODjYe8eAvk6\_ePDzd03HTUlWuboV\_VbAes86ROmoK\_3rfF0Ic5ykAAwDlU3oGBkBYZQKDpfkFuc3KEAgx7o\_\_8-WtiJGaFV6dQpOPo9t56sP\_Gty0G-5o31i-wwT-hGANVLRqgbpOw1k76O4D88rYtnNYs2UK1OL11OlrZ-kySXPOHIpBfftjwblYsAo7apc6XsO7tUlzQh3la94rayZkcGzv96\_O8RDO8Pdu8LspbQ-nIXdx6Ho-09h4\_OAFiLCYVU7yiUYczcOeJ3b9oAW7LRDOwkrruVVnk9BJ5c4u9--QUHjI4Lfq\_qsXZRb0IiBhSK4Cq0lLICwC1mQYRnwkbBKnCuKuhgyWXw-ID-zr2t9DPxseF\_\_FgTrUT23ahIQM5tZUWUR\_5V}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsection{Create the diagram by connecting things together}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:create-the-diagram-by-connecting-things-together}}
Now for the fun bit…
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Mary is a Developer in the Product team. She has a Windows 10 PC and an Android phone.

\item {} 
Bob is an Accountant in the Accounts team. He has Mac and an iPhone.

\item {} 
They connect to the office server, and via a firewall to the Internet.

\end{enumerate}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-7222bc3b5f6adad045005962b09446891597f802}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Connect the icons}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id19}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id6}}
\fvset{hllines={, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml

\PYGZsq{}. Mary is a Developer in the Product team. She has a Windows 10 PC and an Android phone.
\PYGZsq{}. Bob is a Manager in the Accounts team. He has Mac and an iPhone.
\PYGZsq{}. Ivan is an IT guy who looks after the server. 
\PYGZsq{}. They connect to the network hub, and via a firewall to the Internet.


\PYGZsq{} Users
osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer(Mary, \PYGZdq{}Mary\PYGZdq{}, \PYGZdq{}Product team\PYGZdq{}, \PYGZdq{}Developer\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations(Ivan, \PYGZdq{}Ivan\PYGZdq{}, \PYGZdq{}IT Team\PYGZdq{}, \PYGZdq{}Server Admin\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager(Bob, \PYGZdq{}Bob\PYGZdq{}, \PYGZdq{}Accounts team\PYGZdq{}, \PYGZdq{}Manager\PYGZdq{})

\PYGZsq{} Devices
osa\PYGZus{}desktop(pc, \PYGZdq{}192.168.1.10\PYGZdq{}, \PYGZdq{}Windows 10\PYGZdq{}, \PYGZdq{}PC\PYGZdq{})
osa\PYGZus{}laptop(mac, \PYGZdq{}192.168.1.12\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{})
osa\PYGZus{}iPhone(iphone, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}iPhone 11\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}iPhone(android, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}Android 10\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}server(server, \PYGZdq{}192.168.1.100\PYGZdq{}, \PYGZdq{}Ubuntu Server 20.04 LTS\PYGZdq{}, \PYGZdq{}Server\PYGZdq{})

\PYGZsq{} Network
osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router(wifiAP, \PYGZdq{}192.168.1.1\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}hub(hub, \PYGZdq{}Office hub\PYGZdq{}, \PYGZdq{}Hub\PYGZdq{})
osa\PYGZus{}firewall(firewall, \PYGZdq{}51.37.24.103\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}cloud(cloud, \PYGZdq{}Internet\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})

Mary \PYGZhy{}\PYGZgt{} pc: source code
Mary \PYGZhy{}\PYGZgt{} android: social media

Bob \PYGZhy{}\PYGZgt{} mac: financial info
Bob \PYGZhy{}\PYGZgt{} iphone: phone calls

Ivan \PYGZhy{}\PYGZgt{} server: configuration

iphone \PYGZhy{}\PYGZgt{} wifiAP
android \PYGZhy{}\PYGZgt{} wifiAP

wifiAP \PYGZhy{}\PYGZgt{} hub
server \PYGZhy{}\PYGZgt{} hub
mac \PYGZhy{}\PYGZgt{} hub
pc \PYGZhy{}\PYGZgt{} hub

hub \PYGZhy{}\PYGZgt{} firewall

firewall \PYGZhy{}\PYGZgt{} cloud

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml



\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id7}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VLJTRkis3BxNK\_0KE9WBd3fnpjdFUZ6ShWFM0iqMe2bsCo1G9JeMQak69DV8tLvZhxSd6MbPMTjW3H2H8lbzb3uH\_XgYz77eMY4-QAoDHN11RYW0JOnzk5mil1pBlOdDy3W4zChPY3QModMBQoz3WxepLYyshRJnONrtuNgq0TNWJJn8hneJKSN1u-h243OiEXaYUl71MDKE-jXkSUswpjco9\_yq-K2T5x9j\_oTz8xqUfSTtIjOcg7VIz-YVtsrnR-8BUl5D2Mlf3s02IFW5dx6bUtim5cA3iF5E3of2HDcLS4-HHdBX7wIK6mDKIzXSWxIQ\_d1bjNT6GzyuYoKp\_-mU4\_5QMhd\_Z\_PAAJVO66RUcqIxbYfJcSsHu\_QPzu6ZjrlO3mSO6mUjSqyKgoFwYJ5Crow14Ti63w2SjSWdTrFUOXoTVm9w\_4zJasSZGK9jF8uaHYwxjKH8jQKWPO0VAmWIRiS3izjxHBlJMQE2TVi4PspEoBxKYlT7CS\_Ett9mL4RZR2ZuUbJCXa5qnUsCJoy9LpoMfnGqmyPY2BikILkGrWIYbR6l1ER0\_034G\_UYanc5wMOQmrDqVT4hggf-N9NLTp-KLLaj6PMVEUqsr\_CnMjapf9DlCAlKIMMJgjDR5gPdmxeShEoCWjiDrwKiL1Ll9lyrJAQXEi7bOQkMRu5f58fatbngAdvu96a6cFLTBSlb5xZRtcVDiqg\_fP6PLMB5TgFnsBBetWsHUeocDbURrpsOPeRE1wAPA-XFyT\_hccY0DbnrGoPLv34iiaFPRwloy\_VbwWkT-lCffshTe8jffLmUszTrWYSJBdw2Nbr2S8EdriffFCPdRJcfZ6oXGssa43H3dEqamMfZfPsInjOkfz9RNi9aGD61Wn0ymfnCmbzIArkR\_P06NOY4uOAacfYxluY8P2d24eb4b7TqdEpsHq\_GmdxMJOZiSNIIXqBEHUBvM9iMQOImE0UFLgD7JPrZ0\_cJ3zGk66VXu-mKvt\_QRODmOw9g6lE4\_f-\_\_Wxmws0qGdH7eFXAVFmvfT-\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id8}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Add some text to describe the connection from firewall to cloud

\end{enumerate}


\subsection{Change the Layout to Vertical}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:change-the-layout-to-vertical}}
We want the diagram to be vertical, with the cloud at the bottom and the users at the top.

\begin{sphinxadmonition}{tip}{Tip:}
We use \sphinxcode{\sphinxupquote{-{-}\textgreater{}}} to connect the icons so they are arranged vertically
\end{sphinxadmonition}

We can specify a connection direction as follows:


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Tools Used}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id20}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{10}{60}|\X{50}{60}|}
\hline
\sphinxstyletheadfamily 
Text
&\sphinxstyletheadfamily 
Direction
\\
\hline
\sphinxcode{\sphinxupquote{-\textgreater{}}}
&
horizontal left to right
\\
\hline
\sphinxcode{\sphinxupquote{-{-}\textgreater{}}}
&
vertical top to bottom
\\
\hline
\sphinxcode{\sphinxupquote{-up-\textgreater{}}}
&
vertical bottom to top
\\
\hline
\sphinxcode{\sphinxupquote{-down-\textgreater{}}}
&
vertical top to bottom
\\
\hline
\sphinxcode{\sphinxupquote{-left-\textgreater{}}}
&
horizontal right to left
\\
\hline
\sphinxcode{\sphinxupquote{-right-\textgreater{}}}
&
horizontal left to right
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-6b641ad0dfe1bec176371299c86385b5934dee12}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Vertical Layout}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id21}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id9}}
\fvset{hllines={, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml

\PYGZsq{}. Mary is a Developer in the Product team. She has a Windows 10 PC and an Android phone.
\PYGZsq{}. Bob is a Manager in the Accounts team. He has Mac and an iPhone.
\PYGZsq{}. Ivan is an IT guy who looks after the server. 
\PYGZsq{}. They connect to the network hub, and via a firewall to the Internet.


\PYGZsq{} Users

osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer(Mary, \PYGZdq{}Mary\PYGZdq{}, \PYGZdq{}Product team\PYGZdq{}, \PYGZdq{}Developer\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations(Ivan, \PYGZdq{}Ivan\PYGZdq{}, \PYGZdq{}IT Team\PYGZdq{}, \PYGZdq{}Server Admin\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager(Bob, \PYGZdq{}Bob\PYGZdq{}, \PYGZdq{}Accounts team\PYGZdq{}, \PYGZdq{}Manager\PYGZdq{})

\PYGZsq{} Devices
osa\PYGZus{}desktop(pc, \PYGZdq{}192.168.1.10\PYGZdq{}, \PYGZdq{}Windows 10\PYGZdq{}, \PYGZdq{}PC\PYGZdq{})
osa\PYGZus{}laptop(mac, \PYGZdq{}192.168.1.12\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{})
osa\PYGZus{}iPhone(iphone, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}iPhone 11\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}iPhone(android, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}Android 10\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}server(server, \PYGZdq{}192.168.1.100\PYGZdq{}, \PYGZdq{}Ubuntu Server 20.04 LTS\PYGZdq{}, \PYGZdq{}Server\PYGZdq{})

\PYGZsq{} Network
osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router(wifiAP, \PYGZdq{}192.168.1.1\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}hub(hub, \PYGZdq{}Office hub\PYGZdq{}, \PYGZdq{}Hub\PYGZdq{})
osa\PYGZus{}firewall(firewall, \PYGZdq{}51.37.24.103\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}cloud(cloud, \PYGZdq{}Internet\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})


Mary \PYGZhy{}\PYGZhy{}\PYGZgt{} pc: source code
Mary \PYGZhy{}\PYGZhy{}\PYGZgt{} android: social media

Bob \PYGZhy{}\PYGZhy{}\PYGZgt{} mac: financial info
Bob \PYGZhy{}\PYGZhy{}\PYGZgt{} iphone: phone calls


Ivan \PYGZhy{}\PYGZhy{}\PYGZgt{} server: configuration

iphone \PYGZhy{}\PYGZhy{}\PYGZgt{} wifiAP
android \PYGZhy{}\PYGZhy{}\PYGZgt{} wifiAP
wifiAP \PYGZhy{}\PYGZhy{}\PYGZgt{} hub

server \PYGZhy{}\PYGZhy{}\PYGZgt{} hub
mac \PYGZhy{}\PYGZhy{}\PYGZgt{} hub
pc \PYGZhy{}\PYGZhy{}\PYGZgt{} hub


hub \PYGZhy{}\PYGZhy{}\PYGZgt{} firewall

firewall \PYGZhy{}\PYGZhy{}\PYGZgt{} cloud

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml



\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id10}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VLNDRYCt3BxhARW15fq0ct7itVuqXsBJ56W29As1EEYbWA5870-H6McWdnY-zJNwUdsIKjACdSJO73oaI7uVgKz4yjK7wKBiEo4-Q6p885Wlbno0DeJ1NyncJcxh3OKsFaQFJbaJq8HQsNvsvQHlKVTaz6pPIHCUxcxFx836eugEmauwrL905QB3nHanrizwwGCwyO6CwgBUjvjTsRwtfXxOFqu-SEUPxBflfA-bqrlfy9sIE\_BgdVGzkkTtMznJU44llglXJheTa0S9l-4pTdnl1sGWj0XBPtLK0GBAlePxZhGo5Vx5IjcjX\_avBAz06iq\_k3JQMT8mjDPWdPX\_jO-5-4uQkJdGNYfbemb-vBtEj5oa9YfQxZbkdjFPf-ZD2ZPn1zlMGcVj4yUQW2up-dpj6X9YrU8Eb3K6q-Gsvms6hNLFm8\_\_AJTv9WaI6dAuPJ6ciXl3X5nR2rO6qcDv8LYvTMHtlN68PgqdaQeat2SuIUQ4xKknqdclvidfMuuKbO6iyLMw7nSdaq1ynzM8Bqy9bsalZobuYScWz-k-Q5kns0pYRyA-KZW5nXTW7huOJqOAVQRKw9-27Qf1STNyvqKz\_-6dUbxFpnFgyCxvWbVZ69qS4gINRp2BqabDfbINnwneI2RfiZEo9mKtorHNiZ2VfqFsNyDasQeZtBXjFDfRODc5gfWtbyh53uyiJOHHtyLvVVu5RbVt1ysBId-KdIagPSNMMtBO9T6TZO5xRAcXo-Nh7ebcX8u3yT9L\_EFudqt3DC27L7NDfbHCUrXD3cU\_dzUVVwmNNtZgpyUSghDHL\_dBkMblNzS9aLOJpiv-WK5TWBVHSNDbDHuIexmfgqXsqACcAGIlKKxtae4D6MbobanZzxdoe1UG3IYUsdFBjCWvNVI\_u7wceKqi-ov4GUMAefuOHtWPAYP7M2iX2jV-p5Fj\_U7W2i7VV9fa56BoSZZBnJ5h0xDzRAX3NYciJi6XqUXGym2XXUb\_071JprF3nz6fJlysgnRXce9gMtf2zzy\_\_thuFP9627OF55-PB\_zz5U9\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id11}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Arrange the diagram vertically with cloud on top, users on bottom

\item {} 
Arrange the diagram horizontally from left to right with users on left, cloud on right

\end{enumerate}


\subsection{Change the Layout by grouping icons together}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:change-the-layout-by-grouping-icons-together}}
Here we use the \sphinxhref{https://forum.plantuml.net/4387/please-provide-together-keyword-group-diagram-nodes-together}{together} keyword.

\begin{sphinxadmonition}{tip}{Tip:}
The \sphinxhref{https://forum.plantuml.net/4387/please-provide-together-keyword-group-diagram-nodes-together}{together} keyword allows you to specify what icons you want to group together.
Like all layout options, minimize their use. See why in the Explore section.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-37c8ec247632b96b1ec942a75b43eb8a9d642e1e}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Group our icons}}\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id22}}\end{figure}


\subsubsection{Source}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id12}}
\fvset{hllines={, 18, 24, 34,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!define osaPuml https://raw.githubusercontent.com/Crashedmind/PlantUML\PYGZhy{}opensecurityarchitecture2\PYGZhy{}icons/master
!include osaPuml/Common.puml
!include osaPuml/User/all.puml
!include osaPuml/Hardware/all.puml
!include osaPuml/Misc/all.puml
!include osaPuml/Server/all.puml
!include osaPuml/Site/all.puml

\PYGZsq{}. Mary is a Developer in the Product team. She has a Windows 10 PC and an Android phone.
\PYGZsq{}. Bob is a Manager in the Accounts team. He has Mac and an iPhone.
\PYGZsq{}. Ivan is an IT guy who looks after the server. 
\PYGZsq{}. They connect to the network hub, and via a firewall to the Internet.


\PYGZsq{} Users
together \PYGZob{}
osa\PYGZus{}user\PYGZus{}green\PYGZus{}developer(Mary, \PYGZdq{}Mary\PYGZdq{}, \PYGZdq{}Product team\PYGZdq{}, \PYGZdq{}Developer\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}operations(Ivan, \PYGZdq{}Ivan\PYGZdq{}, \PYGZdq{}IT Team\PYGZdq{}, \PYGZdq{}Server Admin\PYGZdq{})
osa\PYGZus{}user\PYGZus{}green\PYGZus{}business\PYGZus{}manager(Bob, \PYGZdq{}Bob\PYGZdq{}, \PYGZdq{}Accounts team\PYGZdq{}, \PYGZdq{}Manager\PYGZdq{})
\PYGZcb{}

\PYGZsq{} Devices
together \PYGZob{}
osa\PYGZus{}desktop(pc, \PYGZdq{}192.168.1.10\PYGZdq{}, \PYGZdq{}Windows 10\PYGZdq{}, \PYGZdq{}PC\PYGZdq{})
osa\PYGZus{}laptop(mac, \PYGZdq{}192.168.1.12\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{}, \PYGZdq{}Mac\PYGZdq{})
osa\PYGZus{}iPhone(iphone, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}iPhone 11\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}iPhone(android, \PYGZdq{}Dynamic IP\PYGZdq{}, \PYGZdq{}Android 10\PYGZdq{}, \PYGZdq{}Phone\PYGZdq{})
osa\PYGZus{}server(server, \PYGZdq{}192.168.1.100\PYGZdq{}, \PYGZdq{}Ubuntu Server 20.04 LTS\PYGZdq{}, \PYGZdq{}Server\PYGZdq{})
\PYGZcb{}


\PYGZsq{} Network

osa\PYGZus{}device\PYGZus{}wireless\PYGZus{}router(wifiAP, \PYGZdq{}192.168.1.1\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}hub(hub, \PYGZdq{}Office hub\PYGZdq{}, \PYGZdq{}Hub\PYGZdq{})
osa\PYGZus{}firewall(firewall, \PYGZdq{}51.37.24.103\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})
osa\PYGZus{}cloud(cloud, \PYGZdq{}Internet\PYGZdq{}, \PYGZdq{}Network\PYGZdq{})


Mary \PYGZhy{}\PYGZhy{}\PYGZgt{} pc: source code
Mary \PYGZhy{}\PYGZhy{}\PYGZgt{} android: social media

Bob \PYGZhy{}\PYGZhy{}\PYGZgt{} mac: financial info
Bob \PYGZhy{}\PYGZhy{}\PYGZgt{} iphone: phone calls


Ivan \PYGZhy{}\PYGZhy{}\PYGZgt{} server: configuration

iphone \PYGZhy{}\PYGZhy{}\PYGZgt{} wifiAP
android \PYGZhy{}\PYGZhy{}\PYGZgt{} wifiAP
wifiAP \PYGZhy{}\PYGZhy{}\PYGZgt{} hub

server \PYGZhy{}\PYGZhy{}\PYGZgt{} hub
mac \PYGZhy{}\PYGZhy{}\PYGZgt{} hub
pc \PYGZhy{}\PYGZhy{}\PYGZgt{} hub


hub \PYGZhy{}\PYGZhy{}\PYGZgt{} firewall

firewall \PYGZhy{}\PYGZhy{}\PYGZgt{} cloud

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml



\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id13}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VLNlQkGs4F-kfvWB77NWuetthd-Q3-NI59h0fLt8XdufB8eqNelOaf7acAKK-XfzlJv9PoHxDybo-M2FD7z-C\_ERyUxd4AMFGzSAyKvZRIo22t952cXYxCF5Ok7bM6vDR8Q78Q1NpaQqiLIkMrnv6HhKdR5wiMgbZVUtNyvSZpQW6ho9E-bLOoAgE7XSdXcA3OjEXeXUl3DMjOFUfrjSkQvpjkpfV6oyfymBsRPVCLzBhqVfyGsNMnFK6-Oxz4zlfhWpyHcy-AQ4M-btO098-0MViAM-FHWBiK5OUQS75I6Yx4gu8qqZsV4FOigD0QfpM5s1j9eUkBJQEwEXRvp5af5\_TWyP-5PQkJt0NYhb1Xl3X7kTOCb9pL1cjSUuUU9xOEtD6hR33iR6GUlS8-dgY3uXXjHs2HonRd07D2ABNBbBTejnTFuHQFWVKf8d8q52RJoEHCRiTcC9a7nBGSm03ok8wBP8DWz\_2U9mmxkpsNf4kz4pNGLJ-05EM9oGV4uRt\_Uydfo-nc2jZCRPK72dvCo2WwZRzHIVXmgNlA774BJEnc88cowpN13j54HlZdt1DIkcMH3EtzmarMOK7hMfCJn6rnUzef3gnsLPVVT3MPNLEKCSnf-wlPfgQcNF8Pry5RFCQTKiidUUSM5w5apIpihEABXPiL-sGbNn9PrVXicyR4Tnqn9IQQy3yueKMRngAZdVFn1F0qnaBy\_Byq\_mPNrt642cZ3ZxBM-Jc9XY0ZUZyTZo5BmR8kKPJMqkLo\_pCDGKEnL5-rZGG\_hVwvfWW2xiTKqYUymhMim7idvRbH-\_BvUVgFAFnvYgTOCkqfjiyqg\_z1CYVVLdPpz1houWkC5JSkKq7WmJnMnLHhRGeJPI2DghPEua1TR6IfkinjPkRyj3lO0aG57LWLBoPYTpdi45VwIrsGxv0n0YHoMFp9wOIdYkoe8rp9KG6Mj\_fwhsv\_vm58BUwJRJACHyIkf45-cSYuJslZOjqbfXSGeUhKQFcWg83Sn\_3q190rKDxwT3SVgdNJS8roQgfZ6FwF\_xvzy0lmv68qIt3nIV2I\_zz0hnFm00}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play1}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:id14}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
What happens if we put a “together” around the network elements too - line 33?

\end{enumerate}


\subsection{Conclusion}
\label{\detokenize{NetworkUsersMachines/NetworkUsersMachines:conclusion}}
We went step-by-step through the creation of a network diagram.

Looking at the source code for the diagram, there is very little redundant information. Most of the text appears in the diagram as text, the remainder is for the layout direction and the included icons.

Now that we have a template diagram, producing variants of it is even quicker as we just need to edit the relevant lines of text.


\section{Create Real Life AWS Diagrams}
\label{\detokenize{aws/aws:create-real-life-aws-diagrams}}\label{\detokenize{aws/aws::doc}}
\begin{sphinxadmonition}{note}{Note:}
In this section we’ll put PlantUML to the test by seeing if we can recreate some real diagrams from the \sphinxhref{https://aws.amazon.com/blogs/architecture}{AWSArchitectureBlog}.

We’ll show the original image from the \sphinxhref{https://aws.amazon.com/blogs/architecture}{AWSArchitectureBlog}, and the PlantUML version for comparison.

\sphinxstylestrong{We’re aiming for architectural equivalence (not image reproduction).}
\end{sphinxadmonition}

We take the 3 most recent entries that show architecture diagrams on the front page of \sphinxhref{https://aws.amazon.com/blogs/architecture}{AWSArchitectureBlog} as at May 2020.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
BBVA: Helping Global Remote Working with Amazon AppStream 2.0 \sphinxurl{https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/}

\item {} 
Building a Scalable Document Pre-Processing Pipeline \sphinxurl{https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/}

\item {} 
Serving Billions of Ads in Just 100 ms Using Amazon Elasticache for Redis \sphinxurl{https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/}

\end{enumerate}

This sample of 3 diagrams is quite varied in complexity and features.

We’ll approach them in order of complexity.


\subsection{AWSArchitectureBlogSample1}
\label{\detokenize{aws/aws:id1}}

\subsubsection{Original}
\label{\detokenize{aws/aws:original}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{High-level-digram-1-Smadex-1024x584}.png}
\caption{\sphinxhref{HelpingGlobalRemoteWorkingwithAmazonAppStream2.0https://aws.amazon.com/blogs/architecture/bbva-helping-global-remote-working-with-amazon-appstream-2-0/}{AWSArchitectureBlogSample1}}\label{\detokenize{aws/aws:id18}}\end{figure}


\subsubsection{PlantUML Equivalent}
\label{\detokenize{aws/aws:plantuml-equivalent}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-1757bc6936e619b4b52067ffaef0625523412cc0}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}

 skinparam linetype polyline
\PYGZsq{} skinparam linetype ortho

package \PYGZdq{}AWS Cloud\PYGZdq{} \PYGZob{}
EC2(Smadex, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(AdExchange, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Users \PYGZhy{}down\PYGZhy{}\PYGZgt{} Mobile: 1. Visits
Mobile \PYGZhy{}right\PYGZhy{}\PYGZgt{} AdExchange: 2. Start auction
AdExchange \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 3. Bid request / response
Smadex \PYGZhy{}left\PYGZhy{}\PYGZgt{} Mobile: 4. Show Ad
Users \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 5. Impression / click / install / event \PYGZob{}request id\PYGZcb{}
@enduml
\end{sphinxVerbatim}


\subsubsection{Select an icon library}
\label{\detokenize{aws/aws:select-an-icon-library}}
These are recent diagrams (April, May 2020) so use the newer AWS icon set from AWS i.e.
\begin{itemize}
\item {} 
This one: \sphinxurl{https://github.com/plantuml/plantuml-stdlib/tree/master/awslib}

\item {} 
Not this one \sphinxurl{https://github.com/plantuml/plantuml-stdlib/tree/master/aws}

\end{itemize}

ref: \sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml}


\subsubsection{Find Icons}
\label{\detokenize{aws/aws:find-icons}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-048305ccbb79ea5f02d0f86d6f461f11ced9d3b9}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 7,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

listsprites
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:play}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/ROqnoi9044RxFSNyHI1f\_bn096AXXOAWOcEpIIRiuEnks9qrhTVmUfx4BKG4xGQ-z-OrKNIGP5dzaUiuzGWpFKMcjbwSzajlhNVpxoqFOnAiDVF\_cEqVYFKjyIUXcAB4CP1WL6hmNZ10CMJ8QOjb1G5TZm5xc4WCx5WxEMutSCKGoJieNaTPdTt18An9EcFeWk5nkqTO9SfryMzHDVbVBZy1\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Gather the icons we need}
\label{\detokenize{aws/aws:gather-the-icons-we-need}}\begin{itemize}
\item {} 
For the EC2 icon on right of diagram; for AWS icons, Orange is AWS Compute so we look at the compute icons.

\item {} 
Use our github trick to find “users”; they are in General.

\item {} 
The green box isn’t an AWS service - it’s showing a mobile/laptop client.

\item {} 
We need “Traditional Server” for “Ad Exchange”

\item {} 
For the box we’ll use a \sphinxhref{https://plantuml.com/deployment-diagram}{Deployment} Diagram shape; \sphinxcode{\sphinxupquote{{}`package{}`}} or \sphinxcode{\sphinxupquote{{}`cloud{}`}}

\end{itemize}

\begin{sphinxadmonition}{note}{Note:}
\sphinxcode{\sphinxupquote{{}`autonumber{}`}} does not work in these diagrams. So we will manually number the arrows.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-2dd4f1c72e3e781ac80a188b61128a2557b67b3e}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

EC2(EC2, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
Users(Users, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
TraditionalServer(TraditionalServer, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
Mobile(Mobile, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})

@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{aws/aws:id2}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VOw\_2i8m48VtF4ND544iE8jKYgDJ5UTBSsZWafHBegzlg8lGqE7-SD\_tW-jY0axPaTXOFr8ss1pX4ydgzlmO-k1SyASbAs3A2LiWsaybNL5Sq9PMZITwPA0\_HLpwWogrQoI1Hf9bIJY-v5RS8t9KSw\_G6uEnoGOFD22\_aTNYKabTvnVLRrIuwD2RxEWB\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Add Text To Icons}
\label{\detokenize{aws/aws:add-text-to-icons}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-56a3fcb324c656e936f4a4c1c1719d02da0336c6}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 7, 8, 9, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

EC2(EC2, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(TraditionalServer, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id3}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VOxDIiKm48NtUOgngmZY1TSYztBfKX2gk9uqGnkO\_319R1\_VMAa85HV9WUzy9-IS2qgfdjMD2oDNI\_28IsPdJfVtuHgzZ-7fsBKYrK8dPBvFRVs7ugDn\_AynKI11\_gMe\_lgWsxc3Rl1eQOM1vCEDr3K2tQrwooHPRtSZM-xLgw1rnSM0\_3KYqGVIp8k5VXrd3DFFcy\_RH\_LtDFPI3Riyam2c155W8RExwap1Li-V\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Simplify The Icons}
\label{\detokenize{aws/aws:simplify-the-icons}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-091611a23bd348d83513676972eac9307cc59adf}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 3,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

EC2(EC2, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(TraditionalServer, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id4}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VOvDImCn443l-ol6FKKG2vv5MagFWX35ysGpjWEJ3oQ9xSythYm8hZqa0s\_UWzcMYbfRaE66uoJD4ppYkGYxpUxTxbC8AJwjxYo7BFp1vEzpxrUaNkTMQOCY\_oaXEPQhnf4YASelPJZi7qn\_Tp3QW9ukO4a\_UQAn4nXlXxT2MipyTpBFPVMgwBboYYZV4QdvGxgvyt2uJ2UCHrh2v\_bGypCwUsbEk9n80NE6f70cjxZ3bg9lGRu0\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Connect The Icons}
\label{\detokenize{aws/aws:connect-the-icons}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-cb96d38729e69c83b35cfd49a01a4475d5948cdf}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 13, 14, 15, 16, 17,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

EC2(Smadex, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(AdExchange, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Users \PYGZhy{}down\PYGZhy{}\PYGZgt{} Mobile: 1. Visits
Mobile \PYGZhy{}right\PYGZhy{}\PYGZgt{} AdExchange: 2. Start auction
AdExchange \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 3. Bid request / response
Smadex \PYGZhy{}left\PYGZhy{}\PYGZgt{} Mobile: 4. Show Ad
Users \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 5. Impression / click / install / event \PYGZob{}request id\PYGZcb{}
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id5}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VP5FIyD04CNl-HHZJn5CYbKlHKfhwS638CG\_vqrssWpExiRTJLCGlxlJXj0YrKjcClDxyrx8F4JbOsiukI1RSQiHxbKNcChnuhrOEcESdPtT5MGQfZMXpXlHdu54tRGHnuhvByIualXVOeCMlU8J95aj9sbXbCRT5Opw1WhqMwfm91CONIQl0Nr83q-P7EgmUl5AKoHd5Uz5wDE5NksgMjaD2hBGCBmDYgT3oBGlCdjkIwPGemVLDE0yT5WEREyCcNQTpMRGQwPmdSCR1OeXwIUGUThKKOYZ-HGcEHJxtm6ghVO9a-FoAEW\_U0etEJoG1e-VBOO8O-b2usp0f2SWOrp7amotShrsdJWE8N-VlClXqJHo9uYvNAoOgW-fP4DKpDBX5cs4hy6Kz7SoHwjRmpy0\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Change the Layout: ortho}
\label{\detokenize{aws/aws:change-the-layout-ortho}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-e6fdd90c06eca3dd1e938919b054522e06b6a17a}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 8, 9,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

\PYGZsq{} skinparam linetype polyline
 skinparam linetype ortho

EC2(Smadex, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(AdExchange, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Users \PYGZhy{}down\PYGZhy{}\PYGZgt{} Mobile: 1. Visits
Mobile \PYGZhy{}right\PYGZhy{}\PYGZgt{} AdExchange: 2. Start auction
AdExchange \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 3. Bid request / response
Smadex \PYGZhy{}left\PYGZhy{}\PYGZgt{} Mobile: 4. Show Ad
Users \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 5. Impression / click / install / event \PYGZob{}request id\PYGZcb{}
@enduml

\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id6}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VL9BZzCm4BxxLmoz42IIYWKk5LfjgNhWW8GK7cSddZQZZX\_OJjCAyT-PD4IjKDbBPZpVunihVafPnznRLY\_8jTmRX0zwI4pDSlsZtdXhlNkyYzLa0zEEq5H1z7T8eWvzngLc\_X\_5-eRuMSOU7KRDDnJr4jA1ND1HMs1ocCy18NW-ZmTr3\_GnTrwfxUQXgAqsU7eDYwc16kEHMbp811QlrBU4CHMNhqmkTOQ-HcqeatUQHn76OcssfxRJRez2MHkOJxFYy-LsnLHazgLlc5A74NG8u2CCsCpSAHbAumTNFiAaMS6R2hvJefp-ca4PQTzbOLp3L\_1GGJt-Hz1zEswehk1LC5ru1Myh-4W68lxiCMLOIfU2TmdLn82ISPTlTdWdxfqV975Uyb\_BznLyia5yaeIBOylK7gIIa-V5B1qUqMNuDOUI-QsUq9dnuQa\_\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Change the Layout: polyline}
\label{\detokenize{aws/aws:change-the-layout-polyline}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-118ce39fe9b79f90a2c0afe1dd259e8b5203b5e2}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 8, 9,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}

skinparam linetype polyline
\PYGZsq{} skinparam linetype ortho

EC2(Smadex, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(AdExchange, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Users \PYGZhy{}down\PYGZhy{}\PYGZgt{} Mobile: 1. Visits
Mobile \PYGZhy{}right\PYGZhy{}\PYGZgt{} AdExchange: 2. Start auction
AdExchange \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 3. Bid request / response
Smadex \PYGZhy{}left\PYGZhy{}\PYGZgt{} Mobile: 4. Show Ad
Users \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 5. Impression / click / install / event \PYGZob{}request id\PYGZcb{}
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id7}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VL9BZzCm4BxxLmoz42IIYWKk5LfjgNhWW8GK7cSddZQZZX\_OJjCAyT-PD4IjKDbBPZpVunihVafPnznRLY\_8jTmRX0zwI4pDSlsZtdXhlNkyYzLa0zEEq5H1z7T8eWvzngLc\_X\_5-eRuMSOU7KRDDnIL3kI2Zje2ayDy3WZ1ytayg9Tm1\_KnTrwfxUQXgAqsU7eDYwc16kEHMbp811QlrBU4CHMNhqmkTOQ-HcqeatUQHn76OcssfxRJRez2MHkOJxFYy-LonLHazgLlc5A74NG8u2CCsCpSAHbAumTNFiAaMS6R2hvJefp-ca4PQTzbOLp3L\_1GGJt-Hj1zEswehk1LC5ru1Myh-4W68lxiCMLOIfU2TmdLn82ISPTlTdWdxfqV975Uyb\_BznLyia5yaeIBOylK7gIIazV5B1qUqMNuDOUI-QsUq9dUyXy0\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Add A Box: package}
\label{\detokenize{aws/aws:add-a-box-package}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-1757bc6936e619b4b52067ffaef0625523412cc0}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 12,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}

 skinparam linetype polyline
\PYGZsq{} skinparam linetype ortho

package \PYGZdq{}AWS Cloud\PYGZdq{} \PYGZob{}
EC2(Smadex, \PYGZdq{}Smadex Service\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

Users(Users, \PYGZdq{}Users\PYGZdq{}, \PYGZdq{} \PYGZdq{})
TraditionalServer(AdExchange, \PYGZdq{}Ad Exchange\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Mobile(Mobile, \PYGZdq{}Publisher app or web\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Users \PYGZhy{}down\PYGZhy{}\PYGZgt{} Mobile: 1. Visits
Mobile \PYGZhy{}right\PYGZhy{}\PYGZgt{} AdExchange: 2. Start auction
AdExchange \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 3. Bid request / response
Smadex \PYGZhy{}left\PYGZhy{}\PYGZgt{} Mobile: 4. Show Ad
Users \PYGZhy{}right\PYGZhy{}\PYGZgt{} Smadex: 5. Impression / click / install / event \PYGZob{}request id\PYGZcb{}
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Play}
\label{\detokenize{aws/aws:id8}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/VP3BRnD13CRlyrUOlH0aiX45BX6g6g8AzO24j3pEpewRjU9vC8-cLTN\_7IVBAfK8lUnuxD\_tVPwzoWLJgKxCA\_QzL4lm2VTPUBDO\_UhMmRdWBy\_EEdPH-9R9jb7rPo1LnrfeWIB\_GrpOiBn8RCbJGda9-P92ZJTzyFaPPI3ls4TCw43OKtc81378m-5YNf-RXbI6O4p4VeTRWaOV2Mi9rJRmQAxN5xFEeQNxjz2C1NIKxhYdHZlGl35Fnlp8bFBi-DNcyPoctnDQBXmyoa57QRQor\_VzW7vBYgmiJBT9yVNuSsRZeRrlTIES1qg0CK98iAVDn8x9CBTXx-UNC6gMyAw5dvovvBzcC4-y7OeIf\_0bNBJG5Km5iFQ73SrfU1ACRrx2-nO-iuL4lolb0WkjSWm-ana9c0lTbcSxV53t8UmrSLpoNykFBToug3vPmzMn5-vtUhBF1KMqeZlo1HwdKBPFvegyhKx-0000\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsection{AWSArchitectureBlogSample2}
\label{\detokenize{aws/aws:id9}}

\subsubsection{Original}
\label{\detokenize{aws/aws:id10}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{Pre-processing-pipeline-architecture-SM}.jpg}
\caption{\sphinxhref{https://aws.amazon.com/blogs/architecture/building-a-scalable-document-pre-processing-pipeline/}{AWSArchitectureBlogSample2}}\label{\detokenize{aws/aws:id19}}\end{figure}


\subsubsection{PlantUML Equivalent}
\label{\detokenize{aws/aws:id11}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-0be1227e4e67c7f0f1ef7adab59fde09c0634666}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxadmonition}{tip}{Tip:}
In general, I recommend starting a diagram without forcing the arrow directions to let PlantUML optimise the layout; then tweak the result.

Because we are trying to compare to an existing complex diagram, I will force the layout to match the original - but only up to a point that allows clarity and comparison.
\end{sphinxadmonition}

\begin{sphinxadmonition}{tip}{Tip:}
Because there are a lot of parts to this diagram, I built it step-by-step in sections to validate as I went - which makes it easier to fix a typo, or get feedback as we go.
Not all steps are shown here - only the final ones - but the PlantUML source code files for each step are in the directory with the source and documentation.
\end{sphinxadmonition}


\subsubsection{First Pass}
\label{\detokenize{aws/aws:first-pass}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-54aacbbb817e695902a4224d7df46c6589bf794a}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/Storage/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ManagementAndGovernance/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/CustomerEngagement/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/MachineLearning/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/NetworkingAndContentDelivery/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/Database/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ApplicationIntegration/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ApplicationIntegration/SNS.puml\PYGZgt{}
!include \PYGZlt{}awslib/CustomerEngagement/SESEmail.puml\PYGZgt{}



\PYGZsq{}Compute/General
\PYGZsq{}Storage/SimpleStorageServiceS3.png
\PYGZsq{}ApplicationIntegration/SQS.png
\PYGZsq{}Compute/Lambda.png
\PYGZsq{}Compute/EC2
\PYGZsq{}ManagementAndGovernance/CloudWatch.png
\PYGZsq{}CustomerEngagement/SESEmail.png
\PYGZsq{}MachineLearning/SageMaker.png
\PYGZsq{}\PYGZsq{}Mobile/APIGateway.png
\PYGZsq{}NetworkingAndContentDelivery/APIGateway2.png
\PYGZsq{}Database/Aurora.png
\PYGZsq{}ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
\PYGZsq{} skinparam linetype ortho

\PYGZsq{}top left section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
package EC2\PYGZus{}Instance \PYGZob{}
General(IngestionApp, \PYGZdq{}Ingestion App\PYGZdq{}, \PYGZdq{} \PYGZdq{})
General(ChunkingApp, \PYGZdq{}Chunking Orchestration App\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

SimpleStorageServiceS3(S3Staging, \PYGZdq{}Amazon S3 Staging Bucket\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSIngest, \PYGZdq{}Amazon SQS Ingest Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Lambda(LambdaTrigger, \PYGZdq{}AWS Lambda Trigger Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})

LambdaTrigger \PYGZhy{}up\PYGZhy{}\PYGZgt{} IngestionApp
IngestionApp \PYGZhy{}up\PYGZhy{}\PYGZgt{} SQSIngest
SQSIngest \PYGZhy{}down\PYGZhy{}\PYGZgt{} ChunkingApp
S3Staging \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2\PYGZus{}Instance

\PYGZsq{}top right section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
SQS(SQSLargeFileQueue, \PYGZdq{}Amazon SQS Large File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSSmallFileQueue, \PYGZdq{}Amazon SQS Small File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSSingleFileQueue, \PYGZdq{}Amazon SQS Single File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})

EC2(LargeFileChunkingAppEC2, \PYGZdq{}Large File Chunking App on EC2\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(LambdaSmallFileChunking, \PYGZdq{}Small File Chunking Lambda\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(ImageConversionLambdaFunction, \PYGZdq{}Image Conversion Lambda Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})

\PYGZsq{}todo dashed line boundary
package DLQ \PYGZob{}
SQSQueue(DLQ1, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQSQueue(DLQ2, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQSQueue(DLQ3, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSLargeFileQueue
ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSSmallFileQueue
ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSSingleFileQueue

SQSLargeFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSSmallFileQueue
SQSSmallFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} LambdaSmallFileChunking
LambdaSmallFileChunking \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSSingleFileQueue
SQSSingleFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} ImageConversionLambdaFunction

\PYGZsq{}todo dashed line
SQSLargeFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ1
SQSSmallFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ2
SQSSingleFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ3


\PYGZsq{}bottom right section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

SimpleStorageServiceS3(S3Images, \PYGZdq{}Amazon S3 Images Bucket\PYGZdq{}, \PYGZdq{} \PYGZdq{})
EC2(EC2DLQFailsafeApp, \PYGZdq{}DLQ Failsafe App on EC2\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSConvertedImageQueue, \PYGZdq{}Amazon SQS Converted Image Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(LambdaInferenceInvocation, \PYGZdq{}Inference Invocation Lambda Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Aurora(Aurora, \PYGZdq{}Amazon Aurora\PYGZdq{}, \PYGZdq{} \PYGZdq{})
APIGateway(AmazonAPIGateway, \PYGZdq{}Amazon API Gateway\PYGZdq{}, \PYGZdq{}\PYGZdq{})
SageMaker(AmazonSageMaker, \PYGZdq{}Amazon SageMaker Endpoint\PYGZdq{}, \PYGZdq{}\PYGZdq{})

DLQ1 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp
DLQ2 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp
DLQ3 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp

EC2DLQFailsafeApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} S3Images

ImageConversionLambdaFunction \PYGZhy{}down\PYGZhy{}\PYGZgt{} S3Images
S3Images \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSConvertedImageQueue
SQSConvertedImageQueue \PYGZhy{}left\PYGZhy{}\PYGZgt{} LambdaInferenceInvocation
LambdaInferenceInvocation \PYGZhy{}down\PYGZhy{}\PYGZgt{} Aurora
\PYGZsq{}LambdaInferenceInvocation \PYGZhy{}left\PYGZhy{}\PYGZgt{} APIGateway
\PYGZsq{}APIGateway \PYGZhy{}left\PYGZhy{}\PYGZgt{} SageMaker


\PYGZsq{}bottom left section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

CloudWatch(CloudWatch, \PYGZdq{}Amazon Cloudwatch\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SNS(SNS1, \PYGZdq{}Amazon SNS\PYGZdq{}, \PYGZdq{}\PYGZdq{})
SESEmail(SESEmail, \PYGZdq{}Email Notification\PYGZdq{}, \PYGZdq{}\PYGZdq{})

CloudWatch \PYGZhy{}\PYGZhy{}\PYGZgt{} DLQ
CloudWatch \PYGZhy{}down\PYGZhy{}\PYGZgt{} SNS1
SNS1 \PYGZhy{}down\PYGZhy{}\PYGZgt{} SESEmail
@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{aws/aws:id12}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/hLPDR-Cs4BtpLqnpaGhKkrZxMYpMTPp0G98sK84S2reQoq8eKg2e66xH\_zwHA5AoGwbeDm4SYU-zcQ7cW-2tsd1jcbAm7mgPYYP3-9cVQb7iFwzVaeqgIoM\_1hcaA2jH70hCFbLa7n2HTTKO\_Co5c9AKQb-8MKME4ZKNSv9xhPfgbofPpwaIepJFPsCzSacA4gLPo-nUlQ6MNAQp9fkcDgf4lPLvRpeV83qM4X-GQrd8V4xwXEQaz2kfQ2yR9GsvlaLHqAREStQttF0zhsStlQweSYatXP8xSfphxlL\_M2HFoNz8JB9DjYKlN13wYroBtDigiyXLgUikx5S9whSYnMJrgP8vYwOsyvnOtZbzuEK-uvVOThDaqLITDq8rsGitwT4QpNo35LpNCo7P8tz5RUdeqRRt-hVTFJTuucUBpzPs42-jsbTqtMXAnx\_buBd11ZiHOpN5gBZc9GZQfZbN29KIvtR18WYmIfkZeheOLO70Wu4QqzOni6ZnFN-iukah9GSe\_t\_iP6tQVCDVhAzxl9CvrcqW-gwVuCOlWTOt1C3DZrwxEJQopPsLkXNygjCZ6Mb-RVStO-5kYfDLOdXEngHSb\_nFiajMq6FmIvE-ed5UABCn\_UpE1Zr1O37e4k\_ap3PVR1-\_woBFKRTcBmbO37eGxXhPvVZArD6BfbfyXN62s7ZHytvhpB\_18bCdITmeOSn\_icV75UahJv6F7rPwbxa7hdEyAmHsURhCOCT1IrvaqPac9HTYmhJZPapfKyLKM4i6Z1ab9VOR7kMFS9ACjkiu81B8BGcSauiEy9\_W34ZKOLTkhFhAnQxaEMwKV4DTKqKiwjg6f1qFWw3tyhwpgBgPWepNHyoweOUzQcJ6zTaFwEt3CysbEqTYMduXQteu9sDgEKsjFEM6S9H6M7GjPllsiZ4cPJw3yxAhWZFsBi8WdwWmcy3jo0Htuv5Ga63zsGHkWuI\_nKE1CBCz4gXy82ykSbjp\_qL1UXdSoi2l64NSAsDK-R67oSnHtYMWlZZ9BNHva7UZJJ\_QvHqlHCqFIDMrpGeE2KnpVvxO31lCEj-1CyKBR7Je9C4ZOISFg56ck9DlAkLkbXqA7fwSPtiXYErZs8PTUv6\_JyIM7u31X33emTQEpFnLfhVowy78Gx2LMQKAQNfRrdQGxuTtoMxfvJozcg7PEsYO0jS6ZCtEW\_VkzUx5C-5Qip0C2u67DlvaPTaauoFQih5eKkcZ31LaqV3kQL-NOGe\_zZB7XejoFBmEZT5XfnRpq\_EKnFJxCcXerNUBkrB7xeNWxWbFoXI7\_fPhnUFGiB27pHZorQDOhFtd4UUSVKEPDQNu1m00\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsubsection{Second Pass: Tweak}
\label{\detokenize{aws/aws:second-pass-tweak}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
For clarity, force the cloudwatch branch to go horizontal and connect from left to DLQ.

\item {} 
Use \sphinxcode{\sphinxupquote{{}`together{}`}} to group the SQS and File processing icons.

\item {} 
I did not change the boxes line style or colour.

\end{enumerate}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-0be1227e4e67c7f0f1ef7adab59fde09c0634666}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/Storage/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ManagementAndGovernance/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/CustomerEngagement/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/MachineLearning/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/NetworkingAndContentDelivery/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/Database/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ApplicationIntegration/all.puml\PYGZgt{}





\PYGZsq{}Compute/General
\PYGZsq{}Storage/SimpleStorageServiceS3.png
\PYGZsq{}ApplicationIntegration/SQS.png
\PYGZsq{}Compute/Lambda.png
\PYGZsq{}Compute/EC2
\PYGZsq{}ManagementAndGovernance/CloudWatch.png
\PYGZsq{}CustomerEngagement/SESEmail.png
\PYGZsq{}MachineLearning/SageMaker.png
\PYGZsq{}\PYGZsq{}Mobile/APIGateway.png
\PYGZsq{}NetworkingAndContentDelivery/APIGateway2.png
\PYGZsq{}Database/Aurora.png
\PYGZsq{}ApplicationIntegration/SQSQueue.png


skinparam linetype polyline
\PYGZsq{} skinparam linetype ortho

\PYGZsq{}top left section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
package EC2\PYGZus{}Instance \PYGZob{}
General(IngestionApp, \PYGZdq{}Ingestion App\PYGZdq{}, \PYGZdq{} \PYGZdq{})
General(ChunkingApp, \PYGZdq{}Chunking Orchestration App\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

SimpleStorageServiceS3(S3Staging, \PYGZdq{}Amazon S3 Staging Bucket\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSIngest, \PYGZdq{}Amazon SQS Ingest Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})

Lambda(LambdaTrigger, \PYGZdq{}AWS Lambda Trigger Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})

LambdaTrigger \PYGZhy{}up\PYGZhy{}\PYGZgt{} IngestionApp
IngestionApp \PYGZhy{}up\PYGZhy{}\PYGZgt{} SQSIngest
SQSIngest \PYGZhy{}down\PYGZhy{}\PYGZgt{} ChunkingApp
S3Staging \PYGZlt{}\PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2\PYGZus{}Instance

\PYGZsq{}top right section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
together \PYGZob{}
SQS(SQSLargeFileQueue, \PYGZdq{}Amazon SQS Large File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSSmallFileQueue, \PYGZdq{}Amazon SQS Small File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSSingleFileQueue, \PYGZdq{}Amazon SQS Single File Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})

EC2(LargeFileChunkingAppEC2, \PYGZdq{}Large File Chunking App on EC2\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(LambdaSmallFileChunking, \PYGZdq{}Small File Chunking Lambda\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(ImageConversionLambdaFunction, \PYGZdq{}Image Conversion Lambda Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}
\PYGZsq{}todo dashed line boundary
package DLQ \PYGZob{}
SQSQueue(DLQ1, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQSQueue(DLQ2, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQSQueue(DLQ3, \PYGZdq{}DLQ\PYGZdq{}, \PYGZdq{} \PYGZdq{})
\PYGZcb{}

ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSLargeFileQueue
ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSSmallFileQueue
ChunkingApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} SQSSingleFileQueue

SQSLargeFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} LargeFileChunkingAppEC2
LargeFileChunkingAppEC2 \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSSmallFileQueue
SQSSmallFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} LambdaSmallFileChunking
LambdaSmallFileChunking \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSSingleFileQueue
SQSSingleFileQueue \PYGZhy{}right\PYGZhy{}\PYGZgt{} ImageConversionLambdaFunction

\PYGZsq{}todo dashed line
SQSLargeFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ1
SQSSmallFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ2
SQSSingleFileQueue \PYGZhy{}down\PYGZhy{}\PYGZgt{} DLQ3


\PYGZsq{}bottom right section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

SimpleStorageServiceS3(S3Images, \PYGZdq{}Amazon S3 Images Bucket\PYGZdq{}, \PYGZdq{} \PYGZdq{})
EC2(EC2DLQFailsafeApp, \PYGZdq{}DLQ Failsafe App on EC2\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SQS(SQSConvertedImageQueue, \PYGZdq{}Amazon SQS Converted Image Queue\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Lambda(LambdaInferenceInvocation, \PYGZdq{}Inference Invocation Lambda Function\PYGZdq{}, \PYGZdq{} \PYGZdq{})
Aurora(Aurora, \PYGZdq{}Amazon Aurora\PYGZdq{}, \PYGZdq{} \PYGZdq{})
APIGateway(AmazonAPIGateway, \PYGZdq{}Amazon API Gateway\PYGZdq{}, \PYGZdq{}\PYGZdq{})
SageMaker(AmazonSageMaker, \PYGZdq{}Amazon SageMaker Endpoint\PYGZdq{}, \PYGZdq{}\PYGZdq{})

DLQ1 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp
DLQ2 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp
DLQ3 \PYGZhy{}down\PYGZhy{}\PYGZgt{} EC2DLQFailsafeApp

EC2DLQFailsafeApp \PYGZhy{}right\PYGZhy{}\PYGZgt{} S3Images

ImageConversionLambdaFunction \PYGZhy{}down\PYGZhy{}\PYGZgt{} S3Images
S3Images \PYGZhy{}down\PYGZhy{}\PYGZgt{} SQSConvertedImageQueue
SQSConvertedImageQueue \PYGZhy{}left\PYGZhy{}\PYGZgt{} LambdaInferenceInvocation
LambdaInferenceInvocation \PYGZhy{}down\PYGZhy{}\PYGZgt{} Aurora
LambdaInferenceInvocation \PYGZlt{}\PYGZhy{}left\PYGZhy{}\PYGZgt{} AmazonAPIGateway
AmazonAPIGateway \PYGZlt{}\PYGZhy{}left\PYGZhy{}\PYGZgt{} AmazonSageMaker


\PYGZsq{}bottom left section 
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}

CloudWatch(CloudWatch, \PYGZdq{}Amazon Cloudwatch\PYGZdq{}, \PYGZdq{} \PYGZdq{})
SNS(SNS1, \PYGZdq{}Amazon SNS\PYGZdq{}, \PYGZdq{}\PYGZdq{})
SESEmail(SESEmail, \PYGZdq{}Email Notification\PYGZdq{}, \PYGZdq{}\PYGZdq{})

CloudWatch \PYGZhy{}right\PYGZhy{}\PYGZgt{} DLQ
CloudWatch \PYGZhy{}left\PYGZhy{}\PYGZgt{} SNS1
SNS1 \PYGZhy{}left\PYGZhy{}\PYGZgt{} SESEmail

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{aws/aws:id13}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/hLPTRkCs47xdAQO15bQ0UXSRlmQBTPsV6aZI3RH5NWeKj3IMYL2aG54nqiK2lKQlrvDq98gKR4lgmoQ08l6RRsR8RuOqFvUM6rlbalqaL2Ah5E6IxqifDX-MJ\_5AvxbMdmPjiSWBARO2q\_S5-G-GoBkeB7xWKevHShqHSfAHeKB3vHJbrkYgM2TQbLEis6h3iybSzrmH8qTbbogzrIze55V9fCkgAgtEqLohh7MTJf3iXC8xv4O9bKrH7z3kjNac5irbfPMbq5Se1KtgTShlYbk-uUNaf9S5LIxXLcYrfi2PQJvx7itVpDVlrfM0pRo4JUcn7SLeNaI2yU9zeJ8s6uaTFyRExeFUyNoJyaFiUdN1PcD5M4bTfK\_S9ZldDA1yV1rVvrn8HpWMEoRQFNz6uyopUzTxoo\_hMsvnpryTFYbyHxvmx23tiZ8an\_zfy5XXXGs9iP9o5Dpm72HDqxuM28MMh\_M0pM30getTQQgBrGL8t5eeCQa30vlDV-IF5Jnv9d60zFzphKfRwmtVM5ltQAqoBEj4jAwVuImCWSPd1C3PUU2kTfMgjNDKFuBVJB8Z9yEF\_RupDjnDKRo8BS\_8cPZBdFz5Vl42MWn-gP9dj3uAAHlHusRMyGa2Xq4ZlASprtoHUtqr8ilGr6vFCJWCMX1kAjLeVEJgpVEgc7-2la2iFsZjOMeiVC4yrNj5jfvWB2mPBhsvNvAsz9HwztQrjpf3kqC3txoATznaU2CaDfeTgjdOe3OUAEfTuvnBEUBQs2PSQTboBAqp3ZWpqYSA4-vfIJXHUjFrDY0ZK5WY-207tH2Mu1s8r617OHpxACGwvnckj7f1Kr9n7EfRYAYD7Jf26-MaoxxNbKurfBpSOTgS0B3HbKgvUGsxzUhkqHMjKIIYuKTofvUFqZTTZ9iMtXHsP4z7c3VjHfruqXcZD2VXDEsqueoTPEZe8oLc8xZRNOEp2SXfaf46O2EuIpAybW0Df9bi4dPQ-LDTGkQwvc55W-QBRYg3zWMZZ1jjhSxVzc2PEDSR0Sg3Ozr1XwTwixVfeLdUS25BlaNtgq80UEHaEuS3nIbiCQrZ3nqgWU2oGqCPF1FMQei6LO9hzQ8JxZUpHw659pQqknr4xjLDmuq3ALmk8cVlWCw5C6Z1se\_SmhsczGhZpYb0SAtIGWjbMrzMTr3eXnEnQ\_F5j7anOMOdKBSBV1imDhaVGlJ0zn\_1CbnhDWp3NEAspZzQMJPg2HbTsIQ8bpxBSHtPCN1C3PNgzkNRtlLOTu-Eki-kLHfiNsDXFpt44JqVEmwDVE-rD-x8Vn3SlE51Mx5jBy6Et4\_TzG7rHn\_tQjG9MVql83u3OrkjBHfujnKI5SynEWSgG8e6KzWBkuClaYlx-\_qT-9\_PT-r7TFw7-hf3-5LGhfqWcV\_z-vyIRYkH8bWT7DbdYbVbyZy0\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play3}.png}} Press to play around with this diagram source online.


\subsection{AWSArchitectureBlogSample3}
\label{\detokenize{aws/aws:id14}}
\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{BBVA-uses-AWS-Transit-Gateway-to-build-a-hub-and-spoke-network-topology-2}.png}
\caption{\sphinxhref{https://aws.amazon.com/blogs/architecture/serving-billions-of-ads-with-amazon-elasticache-for-redis/}{AWSArchitectureBlogSample3}}\label{\detokenize{aws/aws:id20}}\end{figure}


\subsubsection{Gather the icons we need}
\label{\detokenize{aws/aws:id15}}
\begin{sphinxadmonition}{tip}{Tip:}
When using \sphinxcode{\sphinxupquote{{}`listsprites{}`}} limit the number of library categories you include to make it easier to search category by category.
Simplified off (by commenting out the simplified header) so we can see the icon name.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-c09afb020974828bcaec16208ab1056fa471a015}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
\PYGZsq{}!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
\PYGZsq{}!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
\PYGZsq{}!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/CustomerEngagement/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/NetworkingAndContentDelivery/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/EndUserComputing/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ApplicationIntegration/all.puml\PYGZgt{}

listsprites

\PYGZsq{}Appstream2\PYGZus{}0
\PYGZsq{}AutoScalingGroup
\PYGZsq{}EC2Instance
\PYGZsq{}InternetAlt1
\PYGZsq{}DirectConnect
\PYGZsq{}VPCVPNConnection
\PYGZsq{}VPCSubnetPublic
\PYGZsq{}VPCSubnetPrivate
\PYGZsq{}VPCInternetGateway
\PYGZsq{}VPCCustomerGateway
\PYGZsq{}TransitGateway
\PYGZsq{}VPCElasticNetworkInterface
\PYGZsq{}ELBNetworkLoadBalancer

\PYGZsq{}Cloudalt

@enduml
\end{sphinxVerbatim}


\subsubsection{Add Text and Simplify The Icons}
\label{\detokenize{aws/aws:add-text-and-simplify-the-icons}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-1134703b2004589dccdb980168ece30c22b57aca}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/AWSSimplified.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/mobile/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/general/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/GroupIcons/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/CustomerEngagement/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/NetworkingAndContentDelivery/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/EndUserComputing/all.puml\PYGZgt{}
!include \PYGZlt{}awslib/ApplicationIntegration/all.puml\PYGZgt{}


Appstream2\PYGZus{}0(Appstream2\PYGZus{}0, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
AutoScalingGroup(AutoScalingGroup, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
EC2Instance(EC2Instance, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
InternetAlt1(InternetAlt1, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
DirectConnect(DirectConnect, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCVPNConnection(VPCVPNConnection, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCSubnetPublic(VPCSubnetPublic, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCSubnetPrivate(VPCSubnetPrivate, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCInternetGateway(VPCInternetGateway, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCCustomerGateway(VPCCustomerGateway, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
TransitGateway(S3TransitGatewayStaging, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
VPCElasticNetworkInterface(VPCElasticNetworkInterface, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})
ELBNetworkLoadBalancer(ELBNetworkLoadBalancer, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})

Cloudalt(Cloudalt, \PYGZdq{} \PYGZdq{}, \PYGZdq{} \PYGZdq{})

@enduml
\end{sphinxVerbatim}


\subsubsection{Connect The Icons}
\label{\detokenize{aws/aws:id16}}
\begin{sphinxadmonition}{note}{\label{\detokenize{aws/aws:id17}}Todo:}
finish aws 3 diagram - figure out best way to do boundaries
\sphinxurl{https://github.com/dcasati/kubernetes-PlantUML} uses the c4 type boundary macros
\end{sphinxadmonition}


\section{Kubernetes and Azure}
\label{\detokenize{kubernetes/kubernetes:kubernetes-and-azure}}\label{\detokenize{kubernetes/kubernetes::doc}}
\begin{sphinxadmonition}{note}{Note:}
In this section we’ll look at a Kubernetes and Azure icon sets \sphinxurl{https://github.com/dcasati/kubernetes-PlantUML}.

PlantUML will access icon files directly from this repository (it is not part of PlantUML Stdlib.)
\end{sphinxadmonition}


\bigskip\hrule\bigskip



\subsection{Original}
\label{\detokenize{kubernetes/kubernetes:original}}
\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{aks}.png}
\end{figure}


\subsection{PlantUML Equivalent}
\label{\detokenize{kubernetes/kubernetes:plantuml-equivalent}}
I made 1 minor change to the source
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Added \sphinxcode{\sphinxupquote{{}`skinparam linetype polyline{}`}} as the “RBAC” text overlapped the “Kubernetes Cluster” and polyline generally improves layout.

\end{enumerate}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-66b6d9919b201f789079b6213fa3392c4411ec4f}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 4, 11, 31,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
footer Kubernetes Plant\PYGZhy{}UML
scale max 1024 width
skinparam linetype polyline
skinparam nodesep 10
skinparam ranksep 10



\PYGZsq{} Azure
!define AzurePuml https://raw.githubusercontent.com/RicardoNiepel/Azure\PYGZhy{}PlantUML/release/2\PYGZhy{}1/dist

!includeurl AzurePuml/AzureCommon.puml
!includeurl AzurePuml/AzureSimplified.puml

!includeurl AzurePuml/Compute/AzureAppService.puml
!includeurl AzurePuml/Compute/AzureBatch.puml
!includeurl AzurePuml/Containers/AzureContainerRegistry.puml
!includeurl AzurePuml/Containers/AzureKubernetesService.puml
!includeurl AzurePuml/Databases/AzureDatabaseForPostgreSQL.puml
!includeurl AzurePuml/Databases/AzureCosmosDb.puml
!includeurl AzurePuml/Databases/AzureSqlDatabase.puml
!includeurl AzurePuml/DevOps/AzurePipelines.puml
!includeurl AzurePuml/Identity/AzureActiveDirectory.puml
!includeurl AzurePuml/Networking/AzureLoadBalancer.puml
!includeurl AzurePuml/Security/AzureKeyVault.puml
!includeurl AzurePuml/Storage/AzureBlobStorage.puml
!includeurl AzurePuml/Storage/AzureStorage.puml

\PYGZsq{} Kubernetes
!define KubernetesPuml https://raw.githubusercontent.com/dcasati/kubernetes\PYGZhy{}PlantUML/master/dist

!includeurl KubernetesPuml/kubernetes\PYGZus{}Context.puml
!includeurl KubernetesPuml/kubernetes\PYGZus{}Simplified.puml

!includeurl KubernetesPuml/OSS/KubernetesApi.puml
!includeurl KubernetesPuml/OSS/KubernetesIng.puml
!includeurl KubernetesPuml/OSS/KubernetesPod.puml

actor \PYGZdq{}DevOps\PYGZdq{} as devopsAlias
collections \PYGZdq{}Client Apps\PYGZdq{} as clientalias
collections \PYGZdq{}Helm Charts\PYGZdq{} as helmalias

left to right direction

\PYGZsq{} Azure Components
AzureActiveDirectory(aad, \PYGZdq{}\PYGZbs{}nAzure\PYGZbs{}nActive Directory\PYGZdq{}, \PYGZdq{}Global\PYGZdq{})
AzureContainerRegistry(acr, \PYGZdq{}ACR\PYGZdq{}, \PYGZdq{}Canada Central\PYGZdq{})
AzureCosmosDb(cosmos, \PYGZdq{}\PYGZbs{}nCosmos DB\PYGZdq{}, \PYGZdq{}Global\PYGZdq{})
AzureKeyVault(keyvault, \PYGZdq{}\PYGZbs{}nAzure\PYGZbs{}nKey Vault\PYGZdq{}, \PYGZdq{}Global\PYGZdq{})
AzureLoadBalancer(alb, \PYGZdq{}\PYGZbs{}nLoad\PYGZbs{}nBalancer\PYGZdq{}, \PYGZdq{}Canada Central\PYGZdq{})
AzureSqlDatabase(sql, \PYGZdq{}\PYGZbs{}nExternal\PYGZbs{}ndata stores\PYGZdq{}, \PYGZdq{}Canada Central\PYGZdq{})
AzurePipelines(ado, \PYGZdq{}CI/CD\PYGZbs{}nAzure Pipelines\PYGZdq{}, \PYGZdq{}Global\PYGZdq{})

\PYGZsq{} Kubernetes Components
Cluster\PYGZus{}Boundary(cluster, \PYGZdq{}Kubernetes Cluster\PYGZdq{}) \PYGZob{}
    KubernetesApi(KubernetesApi, \PYGZdq{}Kubernetes API\PYGZdq{}, \PYGZdq{}\PYGZdq{})
    
    Namespace\PYGZus{}Boundary(nsFrontEnd, \PYGZdq{}Front End\PYGZdq{}) \PYGZob{}
        KubernetesIng(ingress, \PYGZdq{}API Gateway\PYGZdq{}, \PYGZdq{}\PYGZdq{})
    \PYGZcb{}

    Namespace\PYGZus{}Boundary(nsBackEnd, \PYGZdq{}Back End\PYGZdq{}) \PYGZob{}
        KubernetesPod(KubernetesBE1, \PYGZdq{}\PYGZdq{}, \PYGZdq{}\PYGZdq{})
        KubernetesPod(KubernetesBE2, \PYGZdq{}\PYGZdq{}, \PYGZdq{}\PYGZdq{})
        KubernetesPod(KubernetesBE3, \PYGZdq{}\PYGZdq{}, \PYGZdq{}\PYGZdq{})
    \PYGZcb{}

    Namespace\PYGZus{}Boundary(nsUtil, \PYGZdq{}Utiliy Services\PYGZdq{}) \PYGZob{}
        KubernetesPod(KubernetesUtil1, \PYGZdq{}\PYGZdq{}, \PYGZdq{}\PYGZdq{})
        KubernetesPod(KubernetesUtil2, \PYGZdq{}\PYGZdq{},\PYGZdq{}\PYGZdq{})
    \PYGZcb{}
\PYGZcb{}

Rel(devopsAlias, aad, \PYGZdq{}AUTH\PYGZdq{})
Rel(helmalias, KubernetesApi, \PYGZdq{}helm upgrade\PYGZdq{})

Rel(aad, keyvault, \PYGZdq{} \PYGZdq{})
Rel(KubernetesApi, aad, \PYGZdq{}RBAC\PYGZdq{}, \PYGZdq{}ASYNC\PYGZdq{})

Rel(clientalias, alb, \PYGZdq{}HTTP\PYGZdq{}, \PYGZdq{}ASYNC\PYGZdq{})
Rel(alb, ingress, \PYGZdq{}HTTP\PYGZdq{}, \PYGZdq{}ASYNC\PYGZdq{})

Rel(ingress, KubernetesBE1, \PYGZdq{} \PYGZdq{})
Rel(KubernetesBE1, KubernetesBE2, \PYGZdq{} \PYGZdq{})
Rel(KubernetesBE1, KubernetesBE3, \PYGZdq{} \PYGZdq{})

Rel(KubernetesBE2, sql, \PYGZdq{} \PYGZdq{})
Rel(KubernetesBE3, keyvault, \PYGZdq{}Pod Identity\PYGZdq{})
Rel(KubernetesBE3, cosmos, \PYGZdq{} \PYGZdq{})

Rel(ado, acr, \PYGZdq{}docker push\PYGZdq{})
Rel\PYGZus{}U(KubernetesApi, acr, \PYGZdq{}docker pull\PYGZdq{})
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{kubernetes/kubernetes:play}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/bPPHJ-Cu4CVVyocyVTcij903xkcUDWtiWfPZUnHEEWa9JUsXjUhOMNi2z4xttS-9qzOvQ9Nc0UAP\_yypiMS6lZW2ItMfaYTZ22txNi\_GQYHqRA90qz7zxzU9uw2GbV3AJduv\_PMzI46Bn2sbhi12oPJqmAf2LXcrQXQHJnk13YiFHaOBUjaP\_VEHvN\_N5fCF0fyy75OJdnDR45Nkjoopy78ybxIePxL3ouqcr7JCJPdTIWvMc1k95Qgi9O\_Ql7tQcKM5u30xFJh9X7IK91-avgeMM5kr3HEmmfIbqSULD-oJJMLPAVaaKGJf3gtVhQe90vDNrHJji-GOc07868WlzgirWTHeNG0swrkSIqTsTGYylVG1UPu3mGmSTknw-TNOYN4qjpZzu\_e0lZ2kDEvyTW0o\_QdMbhqKFl-eEcGYAsmgq-q3hWHgahGAICv9FkEvjCZ9x3\_F6wGNOtrvpmDwRK2CGO7cQFTnK-IrtGJyZgi\_eLQqbo1ZORuk4cLcdM4mqzCd7wD-N\_TVP1hOX8A30vBPSWDkUx04HsZVQRz-b8XzB9gjNyCn34JUTEKUxCTqccrDUIK3CfYuqlC3YObPfmLDAR5HgCmH0yS4FflAvKg2IxXH2Zb9enqR5KgY9fPNdP2tQtWhl4HLic81be9muTT1bYXy8aQ6MJbV41FI1cWpSbapSun6JIvvh-PJ0F6PZHvqwtpGmSqs\_f5tVlD526hqANb\_3AN0hLVbnMqZBa2305RuY3Q6mWX8UVlIHWmsTZxknuZx95tYwhbvYLFqJjPwtt9nLwQWPYtM61\_qshmpntZcfEwdQjcBLqAhGJreuLtCaR7eTcmHpw0KX6bKLrbntYNEDiuuxtw3nhTLgBhfgyUngNrmVymy63mS0y4u-iJ-IPX\_UcMVzbPzC9zSDNdu31gi\_N439ReAE6vZQlVL6aqNMdXj-yhyUuZMFRssIQMUMtJEgtq0zWq8Ns0L1VetsHrg37mP8ZLlUmBvRei-RNnnuf4GOu3uz13ncHSEpFwUfFBAvfTSiUwlh1lq1Gqp-1k2F7p5DY-VsIsgD9erdrbexVp-xjBB6cyxDuBl\_vNHk5XTpIq8zEfMtl9H1x9kcpxRXRaTvyMe2JVzwwPOxn1DDAzh-\_7oxcuIwnfPw-ag9vR4MstS\_OllPnNP-rS-I7RMoOAkp\_k1i6EJizuP-PjYwtyotXU72HY52hCY355X-18jgsgt2FJZ\_PlZxWkLyi8lg4LTgly0\_}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play4}.png}} Press to play around with this diagram source online.


\section{Google Cloud Platform‎}
\label{\detokenize{gcp/gcp:google-cloud-platform}}\label{\detokenize{gcp/gcp::doc}}
\begin{sphinxadmonition}{note}{Note:}
In this section we’ll look at a Google Cloud Platform‎ icon set todo

PlantUML will access it directly from this repository (It is not part of PlantUML Stdlib.)

This is type todo per xxx

The original icon set is from \sphinxurl{https://cloud.google.com/icons}.
\end{sphinxadmonition}


\bigskip\hrule\bigskip



\subsection{Original}
\label{\detokenize{gcp/gcp:original}}

\subsection{PlantUML Equivalent}
\label{\detokenize{gcp/gcp:plantuml-equivalent}}
\begin{sphinxadmonition}{note}{\label{\detokenize{gcp/gcp:id1}}Todo:}
add GCP diagrams
\end{sphinxadmonition}


\section{Using C4 To Architect ACME Global Widget Production}
\label{\detokenize{C4/c4acme:using-c4-to-architect-acme-global-widget-production}}\label{\detokenize{C4/c4acme:c4acme-label}}\label{\detokenize{C4/c4acme::doc}}
\begin{sphinxadmonition}{tip}{Tip:}
See {\hyperref[\detokenize{C4/C4Stdlib:c4plantuml-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Using PlantUML Stdlib C4 Lightweight Software Architecture Description Method}}}} for explantion of C4 and PlantUML Stdlib support for it.
\end{sphinxadmonition}


\subsection{C4 ACME Global Widget Production}
\label{\detokenize{C4/c4acme:c4-acme-global-widget-production}}
Your mission, if you choose to accept it, is to design the ACME Global Widget Production System.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
ACME has its own production sites, and uses 3rd party production sites.

\item {} 
All sites are connected to a central production host

\end{enumerate}


\subsubsection{C4 ACME Context}
\label{\detokenize{C4/c4acme:c4-acme-context}}

\paragraph{Source}
\label{\detokenize{C4/c4acme:source}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-0030585265dac83354a1b981491a78e92165b207}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{C4 ACME Context}}\label{\detokenize{C4/c4acme:id7}}\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include  \PYGZlt{}C4/C4\PYGZus{}Context.puml\PYGZgt{}
!include \PYGZlt{}office/Users/user.puml\PYGZgt{}

LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND()


title Top level Context diagram for ACME Global Widget Production


Person(AcmeProdOwner, Acme Production Owner , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZbs{}n Responsible for Production of widgets in ACME Production Site\PYGZdq{} )
Person(3rdProdOwner, 3rdParty Production Owner , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZbs{}n Responsible for Production of widgets in 3rdParty Production Site\PYGZdq{} )


System\PYGZus{}Boundary(Remote, \PYGZdq{}Remote\PYGZdq{}) \PYGZob{}

    System(ProdSystemHost, \PYGZdq{}Production Host\PYGZdq{}, \PYGZdq{}Drives widget Production\PYGZbs{}n Analyses widget Production data to create reports\PYGZdq{})
    System(Analytics, \PYGZdq{}Analytics\PYGZdq{}, \PYGZdq{}Provides data analysis and a dashboard view data \PYGZhy{} including relevant Production data\PYGZdq{})
    System(Monitoring, \PYGZdq{}Monitoring\PYGZdq{}, \PYGZdq{}Monitors Production Host\PYGZbs{}nUses AWS Services\PYGZdq{})
    System\PYGZus{}Ext(SupplyChain, \PYGZdq{}SupplyChain\PYGZdq{}, \PYGZdq{}Provides parts to make the widgets\PYGZdq{})
    System\PYGZus{}Ext(InventoryTracking, \PYGZdq{}InventoryTracking\PYGZdq{}, \PYGZdq{}Customer Reference\PYGZdq{})
    

\PYGZcb{}



Enterprise\PYGZus{}Boundary(AcmeProd, \PYGZdq{}ACME Production Site\PYGZdq{}) \PYGZob{}

    System(AcmeWorkStation1, \PYGZdq{}WorkStation1\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})    
    System(AcmeWorkStation2, \PYGZdq{}WorkStation2\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})        
    System(AcmeWorkStationN, \PYGZdq{}WorkStationN\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})        

\PYGZcb{}


Enterprise\PYGZus{}Boundary(3rdProd, \PYGZdq{}3rdParty Production Site\PYGZdq{}) \PYGZob{}


    System(3rdWorkStation1, \PYGZdq{}WorkStation1\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})    
    System(3rdWorkStation2, \PYGZdq{}WorkStation2\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})        
    System(3rdWorkStationN, \PYGZdq{}WorkStationN\PYGZdq{}, \PYGZdq{} Production setup for a group of widgets\PYGZdq{})     
\PYGZcb{}


Rel\PYGZus{}U(AcmeWorkStation1, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})
Rel\PYGZus{}U(AcmeWorkStation2, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})
Rel\PYGZus{}U(AcmeWorkStationN, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})


Rel\PYGZus{}U(3rdWorkStation1, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})
Rel\PYGZus{}U(3rdWorkStation2, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})
Rel\PYGZus{}U(3rdWorkStationN, ProdSystemHost, \PYGZdq{}Sends Production report for widget\PYGZdq{})





Rel\PYGZus{}D(AcmeProdOwner, ProdSystemHost, \PYGZdq{}Reviews Acme and 3rdParty site Production reports\PYGZdq{})
Rel\PYGZus{}D(3rdProdOwner, ProdSystemHost, \PYGZdq{}Reviews 3rdParty site Production reports\PYGZdq{})


Rel\PYGZus{}D(Analytics, ProdSystemHost, \PYGZdq{}Data Analysis\PYGZdq{})
Rel\PYGZus{}D(SupplyChain, ProdSystemHost, \PYGZdq{}Parts\PYGZdq{})
Rel\PYGZus{}D(InventoryTracking, ProdSystemHost, \PYGZdq{}Tracking\PYGZdq{})
Rel\PYGZus{}D(Monitoring, ProdSystemHost, \PYGZdq{}Monitoring\PYGZdq{})

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML

@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{C4/c4acme:play}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/SoWkIImgAStDuNBAJrBGjLDmpCbCJbMmKiX8pSd9vt98pKi1IW80}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play}.png}} Press to play around with this diagram source online.


\paragraph{Explore}
\label{\detokenize{C4/c4acme:explore}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
TODO

\end{enumerate}


\subsubsection{C4 ACME Container}
\label{\detokenize{C4/c4acme:c4-acme-container}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-55cd9a67b21b7c6988b1f0092a6821be907fc5e6}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{C4 ACME Workstation}}\label{\detokenize{C4/c4acme:id8}}\end{figure}


\paragraph{Source}
\label{\detokenize{C4/c4acme:id1}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include  \PYGZlt{}C4/C4\PYGZus{}Context.puml\PYGZgt{}
!include  \PYGZlt{}C4/C4\PYGZus{}Container.puml\PYGZgt{}
!include \PYGZlt{}office/Users/user.puml\PYGZgt{}

LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND()
skinparam handwritten false


title Container Diagram for ACME Widget Workstation 



System\PYGZus{}Boundary(WorkStation, \PYGZdq{}Workstation\PYGZdq{}) \PYGZob{}
    Person(VfiOperator, Operator , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZbs{}n On\PYGZhy{}site Operator who produces Widget\PYGZdq{} )

    System(WorkStationPC, \PYGZdq{}WorkStation PC\PYGZdq{}, \PYGZdq{}Drives the Production process. \PYGZbs{}nProvides feedback to operator. \PYGZbs{}nConnects to central Production system\PYGZdq{})    

    System(Hub, \PYGZdq{}Hub\PYGZdq{}, \PYGZdq{}Connects Multiple Widgets\PYGZdq{})    

    System(Unit1, \PYGZdq{}Unit1\PYGZdq{}, \PYGZdq{}Widget 1\PYGZdq{})    
    System(Unit2, \PYGZdq{}Unit2\PYGZdq{}, \PYGZdq{}Widget 2\PYGZdq{})    
    System(UnitN, \PYGZdq{}UnitN\PYGZdq{}, \PYGZdq{}Widget N\PYGZdq{})    
\PYGZcb{}

Rel\PYGZus{}R(VfiOperator, WorkStationPC, \PYGZdq{}Checks Production status\PYGZdq{})
Rel\PYGZus{}D(WorkStationPC, Hub, \PYGZdq{}Drive Production and Info Retrieval\PYGZdq{})
Rel(Hub, Unit1, \PYGZdq{}Connect\PYGZdq{})
Rel(Hub, Unit2, \PYGZdq{}Connect\PYGZdq{})
Rel(Hub, UnitN, \PYGZdq{}Connect\PYGZdq{})

footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{C4/c4acme:id2}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/SoWkIImgAStDuNBAJrBGjLDmpCbCJbMmKiX8pSd9vt98pKi1IW80}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play}.png}} Press to play around with this diagram source online.


\paragraph{Explore}
\label{\detokenize{C4/c4acme:id3}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
TODO

\end{enumerate}


\subsubsection{C4 ACME Component}
\label{\detokenize{C4/c4acme:c4-acme-component}}
\begin{figure}[htbp]
\centering
\capstart
\caption{\sphinxstyleemphasis{C4 ACME Component}}\label{\detokenize{C4/c4acme:id9}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-fa24f659994e42722a8d0a29448395f513b603d8}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{C4 ACME Component Monitoring}}\label{\detokenize{C4/c4acme:id10}}\end{figure}


\paragraph{Source}
\label{\detokenize{C4/c4acme:id4}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

\PYGZsq{}AWS stuff here
\PYGZsq{}================================
!includeurl \PYGZlt{}aws/common\PYGZgt{}
!includeurl \PYGZlt{}aws/SDKs/Java/Java.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SDKs/Nodejs/Nodejs.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/General/users/users.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/client/client.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/AWScloud/AWScloud.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/mobileclient/mobileclient.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Database/AmazonRDS/AmazonRDS.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonRDS/DBinstance/DBinstance.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonRDS/MySQLDBinstance/MySQLDBinstance.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/AWSElasticBeanstalk.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/deployment/deployment.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/application/application.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/ElasticLoadBalancing/ApplicationLoadBalancer/ApplicationLoadBalancer.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/AWSLambda.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/LambdaFunction/LambdaFunction.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Storage/AmazonS3/AmazonS3.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonS3/bucket/bucket.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonGlacier/AmazonGlacier.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonGlacier/archive/archive.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/AWSIAM/AWSIAM.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/IAM/permissions/permissions.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/IAM/role/role.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/MobileServices/AmazonCognito/AmazonCognito.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/NetworkingContentDelivery/AmazonRoute53/AmazonRoute53.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/AWSIAM/AWSIAM.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Analytics/AmazonES/AmazonES.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/ManagementTools/AmazonCloudWatch/AmazonCloudWatch.puml\PYGZgt{}

\PYGZsq{}Elastic stuff here
\PYGZsq{}================================
!define ELASTIC\PYGZus{}PUML ./plantuml\PYGZhy{}elastic

!include ELASTIC\PYGZus{}PUML/apm/apm.puml
!include ELASTIC\PYGZus{}PUML/app\PYGZus{}search/app\PYGZus{}search.puml
!include ELASTIC\PYGZus{}PUML/beats/beats.puml
!include ELASTIC\PYGZus{}PUML/cloud/cloud.puml
!include ELASTIC\PYGZus{}PUML/cloud\PYGZus{}in\PYGZus{}kubernetes/cloud\PYGZus{}in\PYGZus{}kubernetes.puml
!include ELASTIC\PYGZus{}PUML/code\PYGZus{}search/code\PYGZus{}search.puml
!include ELASTIC\PYGZus{}PUML/ece/ece.puml
!include ELASTIC\PYGZus{}PUML/eck/eck.puml
!include ELASTIC\PYGZus{}PUML/elastic\PYGZus{}search/elastic\PYGZus{}search.puml
!include ELASTIC\PYGZus{}PUML/endpoint/endpoint.puml
!include ELASTIC\PYGZus{}PUML/enterprise\PYGZus{}search/enterprise\PYGZus{}search.puml
!include ELASTIC\PYGZus{}PUML/kibana/kibana.puml
!include ELASTIC\PYGZus{}PUML/logging/logging.puml
!include ELASTIC\PYGZus{}PUML/logstash/logstash.puml
!include ELASTIC\PYGZus{}PUML/maps/maps.puml
!include ELASTIC\PYGZus{}PUML/metrics/metrics.puml
!include ELASTIC\PYGZus{}PUML/siem/siem.puml
!include ELASTIC\PYGZus{}PUML/site\PYGZus{}search/site\PYGZus{}search.puml
!include ELASTIC\PYGZus{}PUML/stack/stack.puml
!include ELASTIC\PYGZus{}PUML/uptime/uptime.puml


\PYGZsq{}change color of selected background shape https://plantuml.com/deployment\PYGZhy{}diagram
skinparam actorBackgroundColor White 
skinparam agentBackgroundColor White 
skinparam artifactBackgroundColor White 
skinparam boundaryBackgroundColor White 
skinparam cardBackgroundColor White 
skinparam cloudBackgroundColor White 
skinparam componentBackgroundColor White 
skinparam controlBackgroundColor White 
skinparam databaseBackgroundColor White 
skinparam entityBackgroundColor White 
skinparam fileBackgroundColor White 
skinparam folderBackgroundColor White 
skinparam frameBackgroundColor White 
skinparam interfaceBackgroundColor White 
skinparam nodeBackgroundColor White 
skinparam packageBackgroundColor White 
skinparam queueBackgroundColor White 
skinparam stackBackgroundColor White 
skinparam rectangleBackgroundColor White 
skinparam storageBackgroundColor White 
skinparam usecaseBackgroundColor White 



\PYGZsq{}To change background color to elastic green
\PYGZsq{}skinparam componentBackgroundColor 00BFB3 

AWSCLOUD(aws) \PYGZob{}

    AMAZONS3(s3\PYGZus{}bucket,\PYGZdq{}Logs uploaded to here\PYGZdq{})

package Elastic \PYGZob{}

    \PYGZsq{}add \PYGZdq{}node\PYGZdq{}, \PYGZdq{}component\PYGZdq{}, \PYGZdq{}agent\PYGZdq{} etc... to change background shape per https://plantuml.com/deployment\PYGZhy{}diagram
    \PYGZsq{}default is agent 
    ELASTIC\PYGZus{}SEARCH(ElasticSearch, \PYGZdq{}Search and Analyze\PYGZdq{},database)
    LOGSTASH(Logstash, \PYGZdq{}Parse and Transform\PYGZdq{},node)
    KIBANA(Kibana, \PYGZdq{}Visualize\PYGZdq{},agent) 
\PYGZcb{}

    s3\PYGZus{}bucket \PYGZhy{}down\PYGZhy{}\PYGZgt{} Logstash: Raw logs
    Logstash \PYGZhy{}right\PYGZhy{}\PYGZgt{} ElasticSearch: Transformed Data
    ElasticSearch \PYGZhy{}right\PYGZhy{}\PYGZgt{} Kibana: Data to View

\PYGZcb{}
footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
 
!includeurl \PYGZlt{}aws/common\PYGZgt{}
!includeurl \PYGZlt{}aws/SDKs/Java/Java.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SDKs/Nodejs/Nodejs.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/General/users/users.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/client/client.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/AWScloud/AWScloud.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/mobileclient/mobileclient.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Database/AmazonRDS/AmazonRDS.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonRDS/DBinstance/DBinstance.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonRDS/MySQLDBinstance/MySQLDBinstance.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/AWSElasticBeanstalk.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/deployment/deployment.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSElasticBeanstalk/application/application.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/ElasticLoadBalancing/ApplicationLoadBalancer/ApplicationLoadBalancer.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/AWSLambda.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/LambdaFunction/LambdaFunction.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Storage/AmazonS3/AmazonS3.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonS3/bucket/bucket.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonGlacier/AmazonGlacier.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonGlacier/archive/archive.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/AWSIAM/AWSIAM.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/IAM/permissions/permissions.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/IAM/role/role.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/MobileServices/AmazonCognito/AmazonCognito.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/NetworkingContentDelivery/AmazonRoute53/AmazonRoute53.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SecurityIdentityCompliance/AWSIAM/AWSIAM.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Analytics/AmazonES/AmazonES.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/ManagementTools/AmazonCloudWatch/AmazonCloudWatch.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/ManagementTools/AWSCloudTrail/AWSCloudTrail.puml\PYGZgt{}

!includeurl \PYGZlt{}aws/Messaging/AmazonSNS/AmazonSNS.puml\PYGZgt{}

skinparam componentArrowColor Black
skinparam componentBackgroundColor White
skinparam nodeBackgroundColor White
skinparam agentBackgroundColor White
skinparam artifactBackgroundColor White





AWSCLOUD(awscloud)\PYGZob{}
 
    
    APPLICATIONLOADBALANCER(loadbalancer, \PYGZdq{}ALB Logs\PYGZdq{})
    AMAZONS3(S3, \PYGZdq{}S3 access Logs\PYGZdq{})
    AWSLAMBDA(Lambda, \PYGZdq{}Lambda logs\PYGZbs{}nand metrics\PYGZdq{})
    AWSCLOUDTRAIL(AWSCloudTrail, \PYGZdq{}API logs\PYGZdq{})
    
    AMAZONCLOUDWATCH(AmazonCloudWatch)
    AMAZONSNS(AmazonSNS, \PYGZdq{}Send Notifications\PYGZbs{}n to Owner/Admin\PYGZdq{})


    loadbalancer \PYGZhy{}\PYGZhy{}\PYGZgt{} AmazonCloudWatch
    S3 \PYGZhy{}\PYGZhy{}\PYGZgt{} AmazonCloudWatch
    Lambda \PYGZhy{}\PYGZhy{}\PYGZgt{} AmazonCloudWatch
    AWSCloudTrail \PYGZhy{}\PYGZhy{}\PYGZgt{} AmazonCloudWatch
    
    AmazonCloudWatch \PYGZhy{}\PYGZhy{}\PYGZgt{} AmazonSNS
 
\PYGZcb{}
footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML
@enduml
\end{sphinxVerbatim}


\paragraph{Play}
\label{\detokenize{C4/c4acme:id5}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/SoWkIImgAStDuNBAJrBGjLDmpCbCJbMmKiX8pSd9vt98pKi1IW80}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play}.png}} Press to play around with this diagram source online.


\paragraph{Explore}
\label{\detokenize{C4/c4acme:id6}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
TODO

\end{enumerate}


\section{Use Images in Diagrams}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:use-images-in-diagrams}}\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites::doc}}
\begin{sphinxadmonition}{tip}{Tip:}
Given we want diagrams that communicate quickly and clearly, using images (rather than just shapes) is very effective.

The following table lists the options to add an image to a PlantUML diagram.
\end{sphinxadmonition}


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Options to add images to PlantUML diagrams}\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:id2}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{10}{70}|\X{10}{70}|\X{50}{70}|}
\hline
\sphinxstyletheadfamily 
Option
&\sphinxstyletheadfamily 
Builtin
&\sphinxstyletheadfamily 
Details
\\
\hline
\sphinxhref{https://plantuml.com/deployment-diagram}{Deployment} Diagram Elements
&
Yes
&
These are \textasciitilde{}20 shapes
\\
\hline
Creole \sphinxhref{https://plantuml.com/openiconic}{openIconic}
&
Yes
&
e.g. \textless{}\&person\textgreater{}, e.g. \textless{}\&cloud\textgreater{}
\\
\hline
Standard Library \sphinxhref{http://plantuml.com/sprite}{sprites}
&
Yes
&
These are part of PlantUML - but submitted by the community
\\
\hline
Create our own \sphinxhref{http://plantuml.com/sprite}{sprites}
&
No
&
You can convert and use any image. You can also submit to PlantUML for inclusion in Standard Library
\\
\hline
Images
&
No
&
jpg, png, etc… using \textless{}img\textgreater{}tag to add images you specify via file or URL
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

Let’s look at all of these in detail.

\begin{sphinxadmonition}{note}{Note:}
For clarity, sprites will be referred to as icons.
Image formats, like png, jpg will be referred to as image files.
\end{sphinxadmonition}


\subsection{Deployment Diagram Elements}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:deployment-diagram-elements}}

\subsubsection{Review The Deployment Diagram Elements}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:review-the-deployment-diagram-elements}}
PlantUML supports \sphinxhref{http://plantuml.com/sprite}{sprites} small graphic elements that can be used in diagrams.

\sphinxhref{https://plantuml.com/deployment-diagram}{Deployment} diagrams define several sprites.

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-435d4a471d7cfaf9defebbe61b89acb832ed966e}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nd}{@startuml}
\PYG{n}{actor} \PYG{n}{actor}
\PYG{n}{agent} \PYG{n}{agent}
\PYG{n}{artifact} \PYG{n}{artifact}
\PYG{n}{boundary} \PYG{n}{boundary}
\PYG{n}{card} \PYG{n}{card}
\PYG{n}{cloud} \PYG{n}{cloud}
\PYG{n}{component} \PYG{n}{component}
\PYG{n}{control} \PYG{n}{control}
\PYG{n}{database} \PYG{n}{database}
\PYG{n}{entity} \PYG{n}{entity}
\PYG{n}{file} \PYG{n}{file}
\PYG{n}{folder} \PYG{n}{folder}
\PYG{n}{frame} \PYG{n}{frame}
\PYG{n}{interface}  \PYG{n}{interface}
\PYG{n}{node} \PYG{n}{node}
\PYG{n}{package} \PYG{n}{package}
\PYG{n}{queue} \PYG{n}{queue}
\PYG{n}{stack} \PYG{n}{stack}
\PYG{n}{rectangle} \PYG{n}{rectangle}
\PYG{n}{storage} \PYG{n}{storage}
\PYG{n}{usecase} \PYG{n}{usecase}
\PYG{n+nd}{@enduml}
\end{sphinxVerbatim}


\subsubsection{Use The Deployment Diagram Elements In A Sequence Diagram}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:use-the-deployment-diagram-elements-in-a-sequence-diagram}}
Below is an example using some of these - in a sequence diagram.

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-9d36b03f76ad27c13db65a9473b187d3602bd52d}.png}\hspace*{\fill}}
\caption{Using database, control, boundary Deployment Diagram Elements}\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:id3}}\end{figure}

\fvset{hllines={, 4, 5, 6, 7, 8, 9, 18, 20,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{n+nd}{@startuml}


\PYG{n}{autonumber}
\PYG{n}{box} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{UnTrustedDomain}\PYG{l+s+s2}{\PYGZdq{}} \PYG{c+c1}{\PYGZsh{}Red}
	\PYG{n}{database} \PYG{n}{UnTrustedKeyStore} \PYG{k}{as} \PYG{n}{UKS}
	\PYG{n}{control} \PYG{n}{UnTrustedKeyManager} \PYG{k}{as} \PYG{n}{UKM}
    \PYG{n}{boundary} \PYG{n}{KeyLoader} \PYG{k}{as} \PYG{n}{KL}
\PYG{n}{end} \PYG{n}{box}

\PYG{n}{box} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{TrustedDomain}\PYG{l+s+s2}{\PYGZdq{}} \PYG{c+c1}{\PYGZsh{}Green}
	\PYG{n}{database} \PYG{n}{PersistentStorage} \PYG{k}{as} \PYG{n}{KS}
    \PYG{n}{control} \PYG{n}{KeyManager} \PYG{k}{as} \PYG{n}{KM}

\PYG{n}{end} \PYG{n}{box}


\PYG{n}{group} \PYG{n}{In} \PYG{n}{the} \PYG{n}{Beginning}\PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
    
    \PYG{n}{group} \PYG{n}{RootKBPK}    
        \PYG{n}{note} \PYG{n}{over} \PYG{n}{KM}\PYG{p}{:} \PYG{n}{Unique} \PYG{n}{Root} \PYG{n}{KEK} \PYG{o+ow}{is} \PYG{n}{pre}\PYG{o}{\PYGZhy{}}\PYG{n}{programmed} \PYG{n}{to} \PYG{n}{SOC} \PYG{o}{\PYGZhy{}} \PYG{n}{use} \PYG{n}{this} \PYG{k}{as} \PYG{n}{KBPK}
        \PYG{n}{KS} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{KS}\PYG{p}{:} \PYG{n}{Root} \PYG{n}{KBPK} \PYG{n}{exists}
    \PYG{n}{end}
   
    \PYG{n}{group} \PYG{n}{Class} \PYG{n}{KBPK} \PYG{n}{Creation} \PYG{o+ow}{and} \PYG{n}{Storage} \PYG{o+ow}{in} \PYG{n}{UnTrustedDomain} 
        \PYG{n}{KM} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{KM}\PYG{p}{:} \PYG{n}{Create} \PYG{n}{Class} \PYG{n}{N} \PYG{n}{KPBK}
        \PYG{n}{KS} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{KM}\PYG{p}{:} \PYG{n}{RootKBPK} 
        \PYG{n}{note} \PYG{n}{over} \PYG{n}{KM}\PYG{p}{:} \PYG{n}{Shorthand} \PYG{k}{for} \PYG{n}{create} \PYG{n}{a} \PYG{n}{KeyBlock} \PYG{k}{with} \PYG{n}{ClassKBPK} \PYG{n}{N} \PYG{k}{as} \PYG{n}{key} \PYG{n}{payload}\PYG{p}{,} \PYG{o+ow}{and} \PYG{n}{RootKBPK} \PYG{k}{as} \PYG{n}{KBPK}
        \PYG{n}{KM} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{KM}\PYG{p}{:} \PYG{n}{KeyBlock}\PYG{p}{[}\PYG{n}{ClassKBPK} \PYG{n}{N}\PYG{p}{]}\PYG{n}{RootKBPK}
        \PYG{n}{KM} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{UKM}\PYG{p}{:} \PYG{n}{KeyBlock}\PYG{p}{[}\PYG{n}{ClassKBPK} \PYG{n}{N}\PYG{p}{]}\PYG{n}{RootKBPK}
        \PYG{n}{UKM} \PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZgt{}} \PYG{n}{UKS}\PYG{p}{:} \PYG{n}{KeyBlock}\PYG{p}{[}\PYG{n}{ClassKBPK} \PYG{n}{N}\PYG{p}{]}\PYG{n}{RootKBPK}        
        \PYG{n}{note} \PYG{n}{over} \PYG{n}{UKS}\PYG{p}{:} \PYG{n}{Process} \PYG{o+ow}{is} \PYG{n}{repeated} \PYG{k}{for} \PYG{n}{ClassKBPK} \PYG{l+m+mi}{1}\PYG{p}{,}\PYG{l+m+mi}{2}\PYG{p}{,}\PYG{l+m+mf}{3.}\PYG{o}{.}\PYG{o}{.}\PYG{n}{N} 
    \PYG{n}{end}
\PYG{n}{end} 

\PYG{n+nd}{@enduml}
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

In this diagram, we’re using some PlantUML keywords:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxstylestrong{autonumber}: to automatically number the sequence steps.

\item {} 
\sphinxstylestrong{box}: to highlight domains: trusted in green, untrusted in red.

\item {} 
\sphinxstylestrong{group}: to group sequence flows. And these can be grouped within other groups.

\item {} 
\sphinxstylestrong{note}: to add a note to the diagram.

\end{enumerate}


\subsection{Standard Library Sprites}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:standard-library-sprites}}
PlantUML includes a Standard Library. Contents of the library come from third party contributors.
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
See \sphinxurl{http://plantuml.com/stdlib} for what is supported in official release of PlantUML

\item {} 
“-stdlib” option lists the builtin icon libaries

\end{enumerate}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{aws}
\PYG{n}{Version} \PYG{l+m+mf}{18.02}\PYG{o}{.}\PYG{l+m+mi}{22}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{milo}\PYG{o}{\PYGZhy{}}\PYG{n}{minderbinder}\PYG{o}{/}\PYG{n}{AWS}\PYG{o}{\PYGZhy{}}\PYG{n}{PlantUML}

\PYG{n}{awslib}
\PYG{n}{Version} \PYG{l+m+mf}{3.0}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{awslabs}\PYG{o}{/}\PYG{n}{aws}\PYG{o}{\PYGZhy{}}\PYG{n}{icons}\PYG{o}{\PYGZhy{}}\PYG{k}{for}\PYG{o}{\PYGZhy{}}\PYG{n}{plantuml}

\PYG{n}{azure}
\PYG{n}{Version} \PYG{l+m+mf}{2.1}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{RicardoNiepel}\PYG{o}{/}\PYG{n}{Azure}\PYG{o}{\PYGZhy{}}\PYG{n}{PlantUML}

\PYG{n}{c4}
\PYG{n}{Version} \PYG{l+m+mf}{1.0}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{RicardoNiepel}\PYG{o}{/}\PYG{n}{C4}\PYG{o}{\PYGZhy{}}\PYG{n}{PlantUML}

\PYG{n}{cloudinsight}
\PYG{n}{Version} \PYG{l+m+mf}{0.0}\PYG{o}{.}\PYG{l+m+mi}{1}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{rabelenda}\PYG{o}{/}\PYG{n}{cicon}\PYG{o}{\PYGZhy{}}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{sprites}\PYG{o}{/}

\PYG{n}{cloudogu}
\PYG{n}{Version} \PYG{l+m+mf}{0.0}\PYG{o}{.}\PYG{l+m+mi}{1}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{cloudogu}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{cloudogu}\PYG{o}{\PYGZhy{}}\PYG{n}{sprites}

\PYG{n}{material}
\PYG{n}{Version} \PYG{l+m+mf}{0.0}\PYG{o}{.}\PYG{l+m+mi}{1}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{Templarian}\PYG{o}{/}\PYG{n}{MaterialDesign}

\PYG{n}{office}
\PYG{n}{Version} \PYG{l+m+mf}{0.0}\PYG{o}{.}\PYG{l+m+mi}{1}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{Roemer}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{office}

\PYG{n}{osa}
\PYG{n}{Version} \PYG{l+m+mf}{0.0}\PYG{o}{.}\PYG{l+m+mi}{1}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{Crashedmind}\PYG{o}{/}\PYG{n}{PlantUML}\PYG{o}{\PYGZhy{}}\PYG{n}{opensecurityarchitecture}\PYG{o}{\PYGZhy{}}\PYG{n}{icons}

\PYG{n}{tupadr3}
\PYG{n}{Version} \PYG{l+m+mf}{2.0}\PYG{o}{.}\PYG{l+m+mi}{0}
\PYG{n}{Delivered} \PYG{n}{by} \PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{tupadr3}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{icon}\PYG{o}{\PYGZhy{}}\PYG{n}{font}\PYG{o}{\PYGZhy{}}\PYG{n}{sprites}
\end{sphinxVerbatim}


\subsubsection{Example Builtin Sprites AWS}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:example-builtin-sprites-aws}}
\sphinxhref{https://github.com/milo-minderbinder/AWS-PlantUML}{Plantuml for AWS}
uses the \sphinxhref{https://aws.amazon.com/architecture/icons/}{icon set from
AWS} and converts these
to sprites for use with PlantUML.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{stdlib}\PYG{o}{/}\PYG{n}{tree}\PYG{o}{/}\PYG{n}{master}\PYG{o}{/}\PYG{n}{aws}
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
AWS-labs has since updated the AWS icons, and submitted a new icon set to PlantUML.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{https}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{github}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{\PYGZhy{}}\PYG{n}{stdlib}\PYG{o}{/}\PYG{n}{tree}\PYG{o}{/}\PYG{n}{master}\PYG{o}{/}\PYG{n}{awslib}
\end{sphinxVerbatim}
\end{sphinxadmonition}


\subsubsection{Simple Example}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:simple-example}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-04b9f5e2a6cbbbd5a8c77fd4ad01c991070c0d5a}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

!include \PYGZlt{}aws/common\PYGZgt{}
!include \PYGZlt{}aws/Storage/AmazonS3/AmazonS3\PYGZgt{}
!include \PYGZlt{}aws/Storage/AmazonS3/bucket/bucket\PYGZgt{}

AMAZONS3(s3) \PYGZob{}
    BUCKET(site,www.insecurity.co)
    BUCKET(logs,logs.insecurity.co)
\PYGZcb{}

site .r.\PYGZgt{} logs : events

@enduml
\end{sphinxVerbatim}


\subsubsection{More Complex Example}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:more-complex-example}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-fceff4230d3ad38b22a7a1d26dc4770f5812a756}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml


!includeurl \PYGZlt{}aws/common.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/ApplicationServices/AmazonAPIGateway/AmazonAPIGateway.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/AWSLambda.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Compute/AWSLambda/LambdaFunction/LambdaFunction.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonDynamoDB/AmazonDynamoDB.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Database/AmazonDynamoDB/table/table.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/AWScloud/AWScloud.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/client/client.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/General/user/user.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/SDKs/JavaScript/JavaScript.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonS3/AmazonS3.puml\PYGZgt{}
!includeurl \PYGZlt{}aws/Storage/AmazonS3/bucket/bucket.puml\PYGZgt{}

skinparam componentArrowColor Black
skinparam componentBackgroundColor White
skinparam nodeBackgroundColor White
skinparam agentBackgroundColor White
skinparam artifactBackgroundColor White


USER(user)
CLIENT(browser)
JAVASCRIPT(js,SDK)

AWSCLOUD(aws) \PYGZob{}

    AMAZONS3(s3) \PYGZob{}
        BUCKET(site,www.insecurity.co)
        BUCKET(logs,logs.insecurity.co)
    \PYGZcb{}

    AMAZONAPIGATEWAY(api)

    AWSLAMBDA(lambda) \PYGZob{}
        LAMBDAFUNCTION(addComments,addComments)
    \PYGZcb{}

    AMAZONDYNAMODB(dynamo) \PYGZob{}
        TABLE(comments,Comments)
    \PYGZcb{}
\PYGZcb{}

user \PYGZhy{} browser

browser \PYGZhy{}d\PYGZhy{}\PYGZgt{} site :**1a**) get\PYGZbs{}nstatic\PYGZbs{}ncontent
site \PYGZti{}\PYGZgt{} logs :1a
site .u.\PYGZgt{} browser :**1b**
browser \PYGZhy{} js
js \PYGZhy{}r\PYGZhy{}\PYGZgt{} comments :**2a**) get\PYGZbs{}ncomments
comments ..\PYGZgt{} js :**2b**

js \PYGZhy{}r\PYGZhy{}\PYGZgt{} api :**3**) add\PYGZbs{}ncomment

api \PYGZhy{}d\PYGZhy{}\PYGZgt{} addComments :**4**

addComments \PYGZhy{}\PYGZgt{} comments :**5**

comments ..\PYGZgt{} js :**6**) new\PYGZbs{}ncomments
@enduml
\end{sphinxVerbatim}


\subsection{Create A Sprite}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:create-a-sprite}}
It’s easy to create your own sprites from existing icons.


\subsubsection{Start With a Png Image}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:start-with-a-png-image}}
Here we use a 100x100 person icon

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{C4person100}.png}
\end{figure}


\subsubsection{Convert To Sprite Of Different Resolutions As Follows}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:convert-to-sprite-of-different-resolutions-as-follows}}
You can use the PlantUML GUI as described in \sphinxhref{http://plantuml.com/sprite}{sprites}, or use the command line:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{java} \PYG{o}{\PYGZhy{}}\PYG{n}{jar} \PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{jar} \PYG{o}{\PYGZhy{}}\PYG{n}{encodesprite} \PYG{l+m+mi}{4} \PYG{n}{C4person100}\PYG{o}{.}\PYG{n}{png} \PYG{o}{\PYGZgt{}} \PYG{n}{C4person4}\PYG{o}{.}\PYG{n}{sprite}
\PYG{n}{java} \PYG{o}{\PYGZhy{}}\PYG{n}{jar} \PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{jar} \PYG{o}{\PYGZhy{}}\PYG{n}{encodesprite} \PYG{l+m+mi}{16} \PYG{n}{C4person100}\PYG{o}{.}\PYG{n}{png} \PYG{o}{\PYGZgt{}} \PYG{n}{C4person16}\PYG{o}{.}\PYG{n}{sprite}
\PYG{n}{java} \PYG{o}{\PYGZhy{}}\PYG{n}{jar} \PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{jar} \PYG{o}{\PYGZhy{}}\PYG{n}{encodesprite} \PYG{l+m+mi}{8} \PYG{n}{C4person100}\PYG{o}{.}\PYG{n}{png} \PYG{o}{\PYGZgt{}} \PYG{n}{C4person8}\PYG{o}{.}\PYG{n}{sprite}
\end{sphinxVerbatim}

C4person4.sprite file:

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
sprite \PYGZdl{}C4person100 [100x100/4] \PYGZob{}
0000000000000000000000000000000000000000115555LLLLLLLL5555110000000000000000000000000000000000000000
00000000000000000000000000000000000115LLLLLLLLLLLLLLLLLLLLLLLL51000000000000000000000000000000000000
0000000000000000000000000000000015LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL1000000000000000000000000000000000
00000000000000000000000000000015LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL50000000000000000000000000000000
000000000000000000000000000005LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL100000000000000000000000000000
00000000000000000000000000005LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL10000000000000000000000000000
0000000000000000000000000000LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL0000000000000000000000000000
0000000000000000000000000000LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL0000000000000000000000000000
0000000000000000000000000000LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL0000000000000000000000000000
0000000000000000000000000000KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLG0000000000000000000000000000
00000000000000000000000000000KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLG00000000000000000000000000000
0000000000000000000000000000000KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLK0000000000000000000000000000000
000000000000000000000000000000000KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLKG000000000000000000000000000000000
00000000001115555555555555555555555LLLLLLLLLLLLLLLLLLLLLLLLLLLLLL55555555555555555555511110000000000
00000115LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL51000000
0001LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL51000
01LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL00
0LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL0
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL5
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLG
0KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLK0
00KLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLG00
0000GKLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLKG0000
0000000GGKKLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLKKGG0000000
000000000000000GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG000000000000000
\PYGZcb{}

\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
You may have noticed there are more than 4 different values in C4person4.sprite
This is to make sprite definition as compact as possible. For sprite with 4 colors, each pixel can have 4 values.
If you group pixels by 3, it means that you have 4*4*4 = 64 possible values by pixel’s group.
If you use characters 0-9, A-Z, a-z and \_ and -, you have exactly 64 values.
So each character encodes actually 3 pixels at once.
\end{sphinxadmonition}


\subsubsection{Create Diagram With Our Sprites}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:create-diagram-with-our-sprites}}\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:scalebigsmall-label}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-7be27c33a3369e61352135753bc455dd38e72a44}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
sprite \PYGZdl{}C4person100Small [16x16/16] \PYGZob{}
0000004774000000
0000067777600000
0000377777720000
0000477777740000
0000377777730000
0000077777600000
0244467777644420
3777777777777773
6777777777777776
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
5777777777777774
0477777777777640
\PYGZcb{}

sprite \PYGZdl{}C4person100Big [100x100/16] \PYGZob{}
0000000000000000000000000000000000000000000013456666543100000000000000000000000000000000000000000000
0000000000000000000000000000000000000000014677777777777764100000000000000000000000000000000000000000
0000000000000000000000000000000000000002577777777777777777751000000000000000000000000000000000000000
0000000000000000000000000000000000000157777777777777777777777400000000000000000000000000000000000000
0000000000000000000000000000000000003777777777777777777777777772000000000000000000000000000000000000
0000000000000000000000000000000000047777777777777777777777777777300000000000000000000000000000000000
0000000000000000000000000000000000577777777777777777777777777777740000000000000000000000000000000000
0000000000000000000000000000000005777777777777777777777777777777773000000000000000000000000000000000
0000000000000000000000000000000047777777777777777777777777777777777300000000000000000000000000000000
0000000000000000000000000000000277777777777777777777777777777777777710000000000000000000000000000000
0000000000000000000000000000000677777777777777777777777777777777777760000000000000000000000000000000
0000000000000000000000000000004777777777777777777777777777777777777773000000000000000000000000000000
0000000000000000000000000000017777777777777777777777777777777777777776000000000000000000000000000000
0000000000000000000000000000047777777777777777777777777777777777777777300000000000000000000000000000
0000000000000000000000000000077777777777777777777777777777777777777777600000000000000000000000000000
0000000000000000000000000000277777777777777777777777777777777777777777710000000000000000000000000000
0000000000000000000000000000577777777777777777777777777777777777777777730000000000000000000000000000
0000000000000000000000000000677777777777777777777777777777777777777777750000000000000000000000000000
0000000000000000000000000000777777777777777777777777777777777777777777770000000000000000000000000000
0000000000000000000000000001777777777777777777777777777777777777777777770000000000000000000000000000
0000000000000000000000000002777777777777777777777777777777777777777777771000000000000000000000000000
0000000000000000000000000003777777777777777777777777777777777777777777771000000000000000000000000000
0000000000000000000000000003777777777777777777777777777777777777777777772000000000000000000000000000
0000000000000000000000000003777777777777777777777777777777777777777777771000000000000000000000000000
0000000000000000000000000002777777777777777777777777777777777777777777771000000000000000000000000000
0000000000000000000000000001777777777777777777777777777777777777777777770000000000000000000000000000
0000000000000000000000000000777777777777777777777777777777777777777777760000000000000000000000000000
0000000000000000000000000000677777777777777777777777777777777777777777750000000000000000000000000000
0000000000000000000000000000477777777777777777777777777777777777777777730000000000000000000000000000
0000000000000000000000000000277777777777777777777777777777777777777777710000000000000000000000000000
0000000000000000000000000000077777777777777777777777777777777777777777600000000000000000000000000000
0000000000000000000000000000047777777777777777777777777777777777777777200000000000000000000000000000
0000000000000000000000000000007777777777777777777777777777777777777776000000000000000000000000000000
0000000000000000000000000000003777777777777777777777777777777777777772000000000000000000000000000000
0000000000000000000000000000000677777777777777777777777777777777777750000000000000000000000000000000
0000000000000000000000000000000177777777777777777777777777777777777710000000000000000000000000000000
0000000000000000000000000000000037777777777777777777777777777777777200000000000000000000000000000000
0000000000000000000000000000000004777777777777777777777777777777773000000000000000000000000000000000
0000000000000000000000000000000000477777777777777777777777777777730000000000000000000000000000000000
0000000000000000001111111111111111157777777777777777777777777777411111111111111111000000000000000000
0000000000002456777777777777777777777777777777777777777777777777777777777777777777776531000000000000
0000000001577777777777777777777777777777777777777777777777777777777777777777777777777777741000000000
0000000157777777777777777777777777777777777777777777777777777777777777777777777777777777777510000000
0000003777777777777777777777777777777777777777777777777777777777777777777777777777777777777772000000
0000047777777777777777777777777777777777777777777777777777777777777777777777777777777777777777300000
0000477777777777777777777777777777777777777777777777777777777777777777777777777777777777777777730000
0003777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777772000
0017777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776000
0057777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777400
0177777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777700
0477777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777730
0677777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777760
1777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777770
3777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777772
5777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777773
6777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775
6777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777776
6777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775
6777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777774
4777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777773
3777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777771
1777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777770
0677777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777750
0377777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777720
0077777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777600
0047777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777200
0006777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777775000
0001777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777771000
0000277777777777777777777777777777777777777777777777777777777777777777777777777777777777777777710000
0000027777777777777777777777777777777777777777777777777777777777777777777777777777777777777777100000
0000001677777777777777777777777777777777777777777777777777777777777777777777777777777777777750000000
0000000036777777777777777777777777777777777777777777777777777777777777777777777777777777776200000000
0000000000257777777777777777777777777777777777777777777777777777777777777777777777777776420000000000
0000000000000134566666666666666666666666666666666666666666666666666666666666666666554210000000000000
\PYGZcb{}


Bob : \PYGZlt{}\PYGZdl{}C4person100Small\PYGZgt{} Small
Alice : \PYGZlt{}\PYGZdl{}C4person100Big\PYGZgt{} Big

Alice \PYGZhy{}\PYGZgt{} Bob 
@enduml

\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{Note:}
In this example, we created a big (100x100) icon, and a small (16 x 16) icon.

The optimal way to change an icon size is to use one icon of sufficient resolution - not too big or small, (e.g. 48x48) and then use the
scale option to increase or decrease its size.

See {\hyperref[\detokenize{scale/scale:scale-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Scaling Sprites}}}} for details.
\end{sphinxadmonition}


\subsection{Images}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:images}}

\subsubsection{Add Images To A Diagram}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:add-images-to-a-diagram}}
This uses the image tag which is part of PlantUML \sphinxhref{https://plantuml.com/creole}{creole} Legacy HTML support per PlantUML specification:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{Some} \PYG{n}{HTML} \PYG{n}{tags} \PYG{n}{are} \PYG{n}{also} \PYG{n}{working}\PYG{p}{:}

    \PYG{o}{\PYGZlt{}}\PYG{n}{b}\PYG{o}{\PYGZgt{}} \PYG{k}{for} \PYG{n}{bold} \PYG{n}{text}
    \PYG{o}{\PYGZlt{}}\PYG{n}{u}\PYG{o}{\PYGZgt{}} \PYG{o+ow}{or} \PYG{o}{\PYGZlt{}}\PYG{n}{u}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}AAAAAA\PYGZgt{} or \PYGZlt{}u:[[color\textbar{}colorName]]\PYGZgt{} for underline}
    \PYG{o}{\PYGZlt{}}\PYG{n}{i}\PYG{o}{\PYGZgt{}} \PYG{k}{for} \PYG{n}{italic}
    \PYG{o}{\PYGZlt{}}\PYG{n}{s}\PYG{o}{\PYGZgt{}} \PYG{o+ow}{or} \PYG{o}{\PYGZlt{}}\PYG{n}{s}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}AAAAAA\PYGZgt{} or \PYGZlt{}s:[[color\textbar{}colorName]]\PYGZgt{} for strike text}
    \PYG{o}{\PYGZlt{}}\PYG{n}{w}\PYG{o}{\PYGZgt{}} \PYG{o+ow}{or} \PYG{o}{\PYGZlt{}}\PYG{n}{w}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}AAAAAA\PYGZgt{} or \PYGZlt{}w:[[color\textbar{}colorName]]\PYGZgt{} for wave underline text}
    \PYG{o}{\PYGZlt{}}\PYG{n}{color}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}AAAAAA\PYGZgt{} or \PYGZlt{}color:[[color\textbar{}colorName]]\PYGZgt{}}
    \PYG{o}{\PYGZlt{}}\PYG{n}{back}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}AAAAAA\PYGZgt{} or \PYGZlt{}back:[[color\textbar{}colorName]]\PYGZgt{} for background color}
    \PYG{o}{\PYGZlt{}}\PYG{n}{size}\PYG{p}{:}\PYG{n}{nn}\PYG{o}{\PYGZgt{}} \PYG{n}{to} \PYG{n}{change} \PYG{n}{font} \PYG{n}{size}
    \PYG{o}{\PYGZlt{}}\PYG{n}{img}\PYG{p}{:}\PYG{n}{file}\PYG{o}{\PYGZgt{}} \PYG{p}{:} \PYG{n}{the} \PYG{n}{file} \PYG{n}{must} \PYG{n}{be} \PYG{n}{accessible} \PYG{n}{by} \PYG{n}{the} \PYG{n}{filesystem}
    \PYG{o}{\PYGZlt{}}\PYG{n}{img}\PYG{p}{:}\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{logo3}\PYG{o}{.}\PYG{n}{png}\PYG{o}{\PYGZgt{}} \PYG{p}{:} \PYG{n}{the} \PYG{n}{URL} \PYG{n}{must} \PYG{n}{be} \PYG{n}{available} \PYG{k+kn}{from} \PYG{n+nn}{the} \PYG{n}{Internet}
\end{sphinxVerbatim}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-a92a320cdb109203caf5413a2cb1378f5c5570fb}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 9, 11,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{l+s+s1}{\PYGZsq{}}\PYG{l+s+s1}{diagram from https://plantuml.com/creole}
\PYG{n+nd}{@startuml}
\PYG{p}{:}\PYG{o}{*} \PYG{n}{You} \PYG{n}{can} \PYG{n}{change} \PYG{o}{\PYGZlt{}}\PYG{n}{color}\PYG{p}{:}\PYG{n}{red}\PYG{o}{\PYGZgt{}}\PYG{n}{text} \PYG{n}{color}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{color}\PYG{o}{\PYGZgt{}}
\PYG{o}{*} \PYG{n}{You} \PYG{n}{can} \PYG{n}{change} \PYG{o}{\PYGZlt{}}\PYG{n}{back}\PYG{p}{:}\PYG{n}{cadetblue}\PYG{o}{\PYGZgt{}}\PYG{n}{background} \PYG{n}{color}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{back}\PYG{o}{\PYGZgt{}}
\PYG{o}{*} \PYG{n}{You} \PYG{n}{can} \PYG{n}{change} \PYG{o}{\PYGZlt{}}\PYG{n}{size}\PYG{p}{:}\PYG{l+m+mi}{18}\PYG{o}{\PYGZgt{}}\PYG{n}{size}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{size}\PYG{o}{\PYGZgt{}}
\PYG{o}{*} \PYG{n}{You} \PYG{n}{use} \PYG{o}{\PYGZlt{}}\PYG{n}{u}\PYG{o}{\PYGZgt{}}\PYG{n}{legacy}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{u}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZlt{}}\PYG{n}{b}\PYG{o}{\PYGZgt{}}\PYG{n}{HTML} \PYG{o}{\PYGZlt{}}\PYG{n}{i}\PYG{o}{\PYGZgt{}}\PYG{n}{tag}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{i}\PYG{o}{\PYGZgt{}}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{b}\PYG{o}{\PYGZgt{}}
\PYG{o}{*} \PYG{n}{You} \PYG{n}{use} \PYG{o}{\PYGZlt{}}\PYG{n}{u}\PYG{p}{:}\PYG{n}{red}\PYG{o}{\PYGZgt{}}\PYG{n}{color}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{u}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZlt{}}\PYG{n}{s}\PYG{p}{:}\PYG{n}{green}\PYG{o}{\PYGZgt{}}\PYG{o+ow}{in} \PYG{n}{HTML}\PYG{o}{\PYGZlt{}}\PYG{o}{/}\PYG{n}{s}\PYG{o}{\PYGZgt{}} \PYG{o}{\PYGZlt{}}\PYG{n}{w}\PYG{p}{:}\PYG{c+c1}{\PYGZsh{}0000FF\PYGZgt{}tag\PYGZlt{}/w\PYGZgt{}}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{o}{*} \PYG{n}{image} \PYG{n}{x0}\PYG{o}{.}\PYG{l+m+mi}{5} \PYG{p}{:} \PYG{o}{\PYGZlt{}}\PYG{n}{img}\PYG{p}{:}\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{logo3}\PYG{o}{.}\PYG{n}{png}\PYG{p}{\PYGZob{}}\PYG{n}{scale}\PYG{o}{=}\PYG{l+m+mf}{0.5}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZgt{}}
\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}\PYG{o}{\PYGZhy{}}
\PYG{o}{*} \PYG{n}{image} \PYG{n}{x1}\PYG{o}{.}\PYG{l+m+mi}{5} \PYG{p}{:} \PYG{o}{\PYGZlt{}}\PYG{n}{img}\PYG{p}{:}\PYG{n}{http}\PYG{p}{:}\PYG{o}{/}\PYG{o}{/}\PYG{n}{plantuml}\PYG{o}{.}\PYG{n}{com}\PYG{o}{/}\PYG{n}{logo3}\PYG{o}{.}\PYG{n}{png}\PYG{p}{\PYGZob{}}\PYG{n}{scale}\PYG{o}{=}\PYG{l+m+mf}{1.5}\PYG{p}{\PYGZcb{}}\PYG{o}{\PYGZgt{}}
\PYG{p}{;}
\PYG{n+nd}{@enduml}

\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{tip}{Tip:}
You can scale an image. In the diagram above, we made the image 0.5, and 1.5 times bigger using the \sphinxcode{\sphinxupquote{{}`scale{}`}} keyword.
\end{sphinxadmonition}


\subsubsection{Connect Images In A Diagram}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:connect-images-in-a-diagram}}
\begin{sphinxadmonition}{note}{\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:id1}}Todo:}
Connect Images In A Diagram
\end{sphinxadmonition}


\subsubsection{So Why Do I Need Sprites?}
\label{\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:so-why-do-i-need-sprites}}
Sprites are monochrome (16 shades/levels max), versus image files which can be infinite color at high resolution.

But we can easily change a sprite’s characteristics via PlantUML e.g. color and scale.


\section{Scaling Sprites}
\label{\detokenize{scale/scale:scaling-sprites}}\label{\detokenize{scale/scale:scale-label}}\label{\detokenize{scale/scale::doc}}

\subsection{Scaling Sprite Options}
\label{\detokenize{scale/scale:scaling-sprite-options}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-2483a6d9bce13963369fe95734ddf09cd5436743}.png}\hspace*{\fill}}
\caption{Different syntax for scaling sprites}\label{\detokenize{scale/scale:id1}}\end{figure}

\fvset{hllines={, 17, 19,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
sprite \PYGZdl{}foo1 \PYGZob{}
FFFFFFFFFFFFFFF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
F0123456789ABCF
FFFFFFFFFFFFFFF
\PYGZcb{}

Alice \PYGZhy{}\PYGZgt{} Bob : Scale x1 \PYGZlt{}\PYGZdl{}foo1\PYGZgt{}

Alice \PYGZhy{}\PYGZgt{} Bob : Scale x3 using scale \PYGZlt{}\PYGZdl{}foo1\PYGZob{}scale=3\PYGZcb{}\PYGZgt{}

Alice \PYGZhy{}\PYGZgt{} Bob : Scale x6 using * \PYGZlt{}\PYGZdl{}foo1*6\PYGZgt{}

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

The option on line 17 is the one given on \sphinxurl{https://plantuml.com/sprite}.


\subsection{Revisiting Create Diagram With Our Sprites}
\label{\detokenize{scale/scale:revisiting-scalebigsmall-label}}
In {\hyperref[\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:scalebigsmall-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Create Diagram With Our Sprites}}}} we created a large sprite 100x100 sprite, and a small 16x
16 sprite.

Here we create 1 48x48 sprite and scale it by x2 for large, and by 0.33 for small.
We use the \sphinxtitleref{*X} option, instead of \sphinxtitleref{\{scale*X\}} option.

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-c104ae593334277e468df9bf237f8df33c0cc93d}.png}\hspace*{\fill}}
\caption{Scaling one sprite bigger and smaller}\label{\detokenize{scale/scale:id2}}\end{figure}

\fvset{hllines={, 56, 57,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
sprite \PYGZdl{}C4person48 [48x48/16] \PYGZob{}
000000000000000000002567764200000000000000000000
000000000000000000367777777763000000000000000000
000000000000000015777777777777500000000000000000
000000000000000167777777777777750000000000000000
000000000000000577777777777777774000000000000000
000000000000003777777777777777777200000000000000
000000000000006777777777777777777500000000000000
000000000000027777777777777777777710000000000000
000000000000047777777777777777777730000000000000
000000000000057777777777777777777740000000000000
000000000000057777777777777777777750000000000000
000000000000057777777777777777777750000000000000
000000000000047777777777777777777740000000000000
000000000000037777777777777777777720000000000000
000000000000017777777777777777777700000000000000
000000000000005777777777777777777400000000000000
000000000000001777777777777777776100000000000000
000000000000000377777777777777772000000000000000
000000000000000047777777777777730000000000000000
000002456666666667777777777777766666666654200000
000367777777777777777777777777777777777777762000
004777777777777777777777777777777777777777777300
037777777777777777777777777777777777777777777720
077777777777777777777777777777777777777777777760
377777777777777777777777777777777777777777777772
577777777777777777777777777777777777777777777774
677777777777777777777777777777777777777777777776
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777
677777777777777777777777777777777777777777777776
577777777777777777777777777777777777777777777774
377777777777777777777777777777777777777777777772
077777777777777777777777777777777777777777777760
037777777777777777777777777777777777777777777720
004777777777777777777777777777777777777777777400
000367777777777777777777777777777777777777762000
000002466777777777777777777777777777777664200000
\PYGZcb{}




Bob : \PYGZlt{}\PYGZdl{}C4person48*.33\PYGZgt{} Small
Alice : \PYGZlt{}\PYGZdl{}C4person48*2\PYGZgt{} Big

Alice \PYGZhy{}\PYGZgt{} Bob 
@enduml

\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\section{Procedures}
\label{\detokenize{procedures/procedures:procedures}}\label{\detokenize{procedures/procedures:procedures-label}}\label{\detokenize{procedures/procedures::doc}}

\subsection{Defines Are Deprecated}
\label{\detokenize{procedures/procedures:defines-are-deprecated}}
Existing stdlib icon libraries use !define and !definelong to create different macros.

\begin{sphinxadmonition}{tip}{Tip:}
!function and !procedure should be used instead of !define and !definelong

Per \sphinxhref{https://plantuml.com/preprocessing\#ajlk3nchu0zkka0ybjng}{MigrationNotes}:
\begin{quote}

\sphinxstyleemphasis{You should not use !define and !definelong anymore. Use !function, !procedure
or variable definition instead.}

\sphinxstyleemphasis{!define should be replaced by return !function}

\sphinxstyleemphasis{!definelong should be replaced by !procedure.}
\end{quote}
\end{sphinxadmonition}


\subsection{Default Values}
\label{\detokenize{procedures/procedures:default-values}}
Per \sphinxhref{https://plantuml.com/preprocessing\#ae1b47605326b65f}{DefaultArgumentValue}, “In both procedure and return functions, you can define default values for arguments”

\begin{sphinxadmonition}{tip}{Tip:}
The \sphinxhref{https://plantuml.com/en/preprocessing\#ajlk3nchu0zkka0ybjng}{default argument} value can help to simplify definitions
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-f7d9395bf0bbfcbfe09c1c73261313583e1facca}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Using default argument}}\label{\detokenize{procedures/procedures:id1}}\end{figure}

\fvset{hllines={, 2, 6, 7,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!function \PYGZdl{}inc(\PYGZdl{}value, \PYGZdl{}step=1)
!return \PYGZdl{}value + \PYGZdl{}step
!endfunction

Alice \PYGZhy{}\PYGZgt{} Bob : Just one more \PYGZdl{}inc(3)
Alice \PYGZhy{}\PYGZgt{} Bob : Add two to three : \PYGZdl{}inc(3, 2)
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{note}{Note:}
There is also \sphinxhref{https://plantuml.com/en/preprocessing\#mr9qytp1zez3ka0ybjov}{dynamic invocation} which may be useful.
I think of this as like C function pointers which are very useful.
\end{sphinxadmonition}


\subsection{Keyword Arguments}
\label{\detokenize{procedures/procedures:keyword-arguments}}
\sphinxurl{https://plantuml.com/news}
\sphinxstyleemphasis{17 May, 2020: Use keyword arguments with the preprocessor (V1.2020.10). (Thanks to Crashedmind for the suggestion !)}


\section{PassSpriteAsParameter}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:passspriteasparameter}}\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter::doc}}

\subsection{Understand How To Pass A Sprite To A Procedure}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:understand-how-to-pass-a-sprite-to-a-procedure}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-2cbd935b3dfc69a535dbe91cc6856ca0a32bd0e5}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{blah}}\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id5}}\end{figure}


\subsubsection{Source}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:source}}
\fvset{hllines={, 12, 16,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

\PYGZsq{}create equivalent of icons shown here https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml
sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

!procedure \PYGZdl{}SpritePass2(\PYGZdl{}MySprite)
rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}MySprite\PYGZgt{}\PYGZbs{}n2\PYGZdq{} as 2
!endprocedure

\PYGZdl{}SpritePass2(\PYGZdq{}\PYGZdl{}Batch\PYGZdq{})
@enduml

\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:play}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/SoWkIImgAStDuNBAJrBGjLDmpCbCJbMmKiX8pSd9vt98pKi1IW80}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play2}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:explore}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Take a look at some other stdlib libraries

\end{enumerate}


\subsection{Understand How To Pass A Sprite To A Procedure - using unquoted keyword}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:understand-how-to-pass-a-sprite-to-a-procedure-using-unquoted-keyword}}
This option uses the unquoted keyword. The caller of the procedure does not need
to add quotes when calling the procedure.

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-52f8875c595fb00dfb99a555d72566b69b0cad08}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{blah}}\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id6}}\end{figure}


\subsubsection{Source}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id1}}
\fvset{hllines={, 12, 16,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

\PYGZsq{}create equivalent of icons shown here https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml
sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

!unquoted procedure \PYGZdl{}SpritePass2(\PYGZdl{}MySprite)
rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}MySprite\PYGZgt{}\PYGZbs{}n2\PYGZdq{} as 2
!endprocedure

\PYGZdl{}SpritePass2(\PYGZdl{}Batch)
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Play}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id2}}
\sphinxhref{http://www.plantuml.com/plantuml/uml/SoWkIImgAStDuNBAJrBGjLDmpCbCJbMmKiX8pSd9vt98pKi1IW80}{\sphinxincludegraphics[width=40\sphinxpxdimen]{{play2}.png}} Press to play around with this diagram source online.


\subsubsection{Explore}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id3}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Take a look at some other stdlib libraries

\end{enumerate}


\subsection{Use Procedure Defaults}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:use-procedure-defaults}}
And Tidy Up The Procedure So It’s Easier To Read

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-6517da682245c16076d62390b67e42ff438c70b9}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{blah}}\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id7}}\end{figure}


\subsubsection{Source}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:id4}}
\fvset{hllines={, 12, 22,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]

@startuml

sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

!unquoted procedure \PYGZdl{}ffoo5(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
rectangle rect5 as \PYGZdq{}
\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}
==\PYGZdl{}label==
\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

  \PYGZdl{}description 556\PYGZdq{}
!endprocedure

\PYGZdl{}ffoo5(myalias, \PYGZdq{}description\PYGZbs{}non several lines\PYGZdq{}, \PYGZdl{}scale=2)

@enduml

\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsection{So What?}
\label{\detokenize{PassSpriteAsParameter/PassSpriteAsParameter:so-what}}
We said previously that the current stdlib macros are largely the same across files - changing for each icon.

So now we have a way to define a procedure(s) in one place, and pass an icon.


\section{PlantUML Stdlib Overview}
\label{\detokenize{Stdlib/StdLibOverview:plantuml-stdlib-overview}}\label{\detokenize{Stdlib/StdLibOverview::doc}}
\begin{sphinxadmonition}{tip}{Tip:}
See {\hyperref[\detokenize{github/githubFileFinder:githubfilefinder-label}]{\sphinxcrossref{\DUrole{std,std-ref}{GitHub File Finder}}}} for a handy hint on searching for icons.
\end{sphinxadmonition}


\subsection{PlantUML Standard Library Overview}
\label{\detokenize{Stdlib/StdLibOverview:plantuml-standard-library-overview}}
This overview is at May 2020.

\sphinxhref{https://plantuml.com/stdlib}{PlantUML Standard Library} includes
several icon libraries from different sources (including myself) and
they are varied in functionality and how to use them.

The most recent addition is
\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml}.

\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml} (Amazon) builds on the
work of \sphinxurl{https://github.com/RicardoNiepel} (MicroSoft):
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxurl{https://github.com/RicardoNiepel/Azure-PlantUML}

\item {} 
\sphinxurl{https://github.com/RicardoNiepel/C4-PlantUML} which builds on
\sphinxurl{https://c4model.com/}

These in turn build on
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
\sphinxurl{https://github.com/milo-minderbinder/AWS-PlantUML}

\item {} 
\sphinxurl{https://github.com/Roemer/plantuml-office}

\end{enumerate}

\end{enumerate}

\begin{sphinxadmonition}{note}{Note:}
There are now 2 AWS icon sets in PlantUML Stdlib:
\begin{itemize}
\item {} 
The original one from 2018 with the older icon style: \sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/aws/INFO}

\item {} 
The newer one from 2020 AWSlabs \sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/awslib/INFO} that has the latest icons from AWS.

\end{itemize}
\end{sphinxadmonition}

Broadly, the main groupings (based on macro definition) are per diagram.
Osa and Elastic are based on aws.

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-d294193b75e8101e75da62db424870a2d594b09e}.png}\hspace*{\fill}}
\caption{PlantUML Stdlib Groupings Of Libraries Based On Similarity}\label{\detokenize{Stdlib/StdLibOverview:id1}}\end{figure}


\subsubsection{Type 1 (e\_type,e\_color,e\_sprite,label,alias,e\_stereo)}
\label{\detokenize{Stdlib/StdLibOverview:type-1-e-type-e-color-e-sprite-label-alias-e-stereo}}
AWS is one of the original stdlib entries - it’s from 2017.
Some libraries, listed below, followed the same layout, or used the same tools to create the sprites.

\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/aws/AI/AmazonLex/} contains 4 files:
\begin{itemize}
\item {} 
AmazonLex-sprite.puml 68x72/16 sprite

\item {} 
AmazonLex.puml same as AmazonLex-sprite.puml but with macros

\item {} 
AmazonLex\_LARGE-sprite.puml 340x360/16

\item {} 
AmazonLex\_LARGE.puml same as AmazonLex\_LARGE-sprite.puml but with macros

\end{itemize}

The macros look like:

:: code-block:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define AMAZONLEX(alias) PUML\PYGZus{}ENTITY(component,\PYGZsh{}2F74B8,AmazonLex,alias,AmazonLex)

!definelong AMAZONLEX(alias,label,e\PYGZus{}type=\PYGZdq{}component\PYGZdq{},e\PYGZus{}color=\PYGZdq{}\PYGZsh{}2F74B8\PYGZdq{},e\PYGZus{}stereo=\PYGZdq{}AmazonLex\PYGZdq{},e\PYGZus{}sprite=\PYGZdq{}AmazonLex\PYGZdq{})
PUML\PYGZus{}ENTITY(e\PYGZus{}type,e\PYGZus{}color,e\PYGZus{}sprite,label,alias,e\PYGZus{}stereo)
!enddefinelong
\end{sphinxVerbatim}


\paragraph{osa}
\label{\detokenize{Stdlib/StdLibOverview:osa}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/osa}

:: code-block:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define LEFT(alias) PUML\PYGZus{}ENTITY(component,black,left,alias,left)

!definelong LEFT(alias,label,e\PYGZus{}type=\PYGZdq{}component\PYGZdq{},e\PYGZus{}color=\PYGZdq{}black\PYGZdq{},e\PYGZus{}stereo=\PYGZdq{}left\PYGZdq{},e\PYGZus{}sprite=\PYGZdq{}left\PYGZdq{})
PUML\PYGZus{}ENTITY(e\PYGZus{}type,e\PYGZus{}color,e\PYGZus{}sprite,label,alias,e\PYGZus{}stereo)
!enddefinelong
\end{sphinxVerbatim}


\paragraph{elastic}
\label{\detokenize{Stdlib/StdLibOverview:elastic}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/osa}

:: code-block:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define APM(alias) PUML\PYGZus{}ENTITY(agent,00BFB3,apm,alias,apm)

!definelong APM(alias,label,e\PYGZus{}type=\PYGZdq{}agent\PYGZdq{},e\PYGZus{}color=\PYGZdq{}00BFB3\PYGZdq{},e\PYGZus{}stereo=\PYGZdq{}apm\PYGZdq{},e\PYGZus{}sprite=\PYGZdq{}apm\PYGZdq{})
PUML\PYGZus{}ENTITY(e\PYGZus{}type,e\PYGZus{}color,e\PYGZus{}sprite,label,alias,e\PYGZus{}stereo)
!enddefinelong
\end{sphinxVerbatim}


\subsubsection{Type 2 (e\_alias, e\_label, e\_techn, e\_descr)}
\label{\detokenize{Stdlib/StdLibOverview:type-2-e-alias-e-label-e-techn-e-descr}}
Below shows what the macros look like for each icon


\paragraph{azure}
\label{\detokenize{Stdlib/StdLibOverview:azure}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/azure/AIMachineLearning/AzureBatchAI.puml}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
AzureEntityColoring(AzureBatchAI)
!define AzureBatchAI(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn) AzureEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, AZURE\PYGZus{}SYMBOL\PYGZus{}COLOR, AzureBatchAI, AzureBatchAI)
!define AzureBatchAI(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr) AzureEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr, AZURE\PYGZus{}SYMBOL\PYGZus{}COLOR, AzureBatchAI, AzureBatchAI)
\end{sphinxVerbatim}


\paragraph{awslib}
\label{\detokenize{Stdlib/StdLibOverview:awslib}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/awslib/ARVR/ARVR.puml}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
AWSEntityColoring(ARVR)
!define ARVR(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn) AWSEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, \PYGZsh{}CC2264, ARVR, ARVR)
!define ARVR(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr) AWSEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr, \PYGZsh{}CC2264, ARVR, ARVR)
!define ARVRParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, \PYGZsh{}CC2264, ARVR, ARVR)
!define ARVRParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr, \PYGZsh{}CC2264, ARVR, ARVR)
\end{sphinxVerbatim}

The BatchParticipant part supports adding icons to sequence diagrams
i.e.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define BatchParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, \PYGZsh{}D86613, Batch, Batch)
\end{sphinxVerbatim}

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-1e6fa5171f818deaa1af432de6c4a2f2e86dd167}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{Sequence diagram with icons}}\label{\detokenize{Stdlib/StdLibOverview:id2}}\end{figure}


\subsubsection{Type 3 (\_alias, \_label, \_shape, \_color)}
\label{\detokenize{Stdlib/StdLibOverview:type-3-alias-label-shape-color}}

\paragraph{office}
\label{\detokenize{Stdlib/StdLibOverview:office}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/office/Clouds/azure.puml}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define OFF\PYGZus{}AZURE(\PYGZus{}alias) ENTITY(rectangle,black,azure,\PYGZus{}alias,OFF AZURE)
!define OFF\PYGZus{}AZURE(\PYGZus{}alias,\PYGZus{}label) ENTITY(rectangle,black,azure,\PYGZus{}label,\PYGZus{}alias,OFF AZURE)
!define OFF\PYGZus{}AZURE(\PYGZus{}alias,\PYGZus{}label,\PYGZus{}shape) ENTITY(\PYGZus{}shape,black,azure,\PYGZus{}label,\PYGZus{}alias,OFF AZURE)
!define OFF\PYGZus{}AZURE(\PYGZus{}alias,\PYGZus{}label,\PYGZus{}shape,\PYGZus{}color) ENTITY(\PYGZus{}shape,\PYGZus{}color,azure,\PYGZus{}label,\PYGZus{}alias,OFF AZURE)
\end{sphinxVerbatim}


\paragraph{cloudogu}
\label{\detokenize{Stdlib/StdLibOverview:cloudogu}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://github.com/plantuml/plantuml\PYGZhy{}stdlib/blob/master/cloudogu/tools/ansible.puml
!define TOOL\PYGZus{}ANSIBLE(\PYGZus{}alias) ENTITY(rectangle,black,ansible,\PYGZus{}alias,TOOL ANSIBLE)
!define TOOL\PYGZus{}ANSIBLE(\PYGZus{}alias, \PYGZus{}label) ENTITY(rectangle,black,ansible,\PYGZus{}label, \PYGZus{}alias,TOOL ANSIBLE)
!define TOOL\PYGZus{}ANSIBLE(\PYGZus{}alias, \PYGZus{}label, \PYGZus{}shape) ENTITY(\PYGZus{}shape,black,ansible,\PYGZus{}label, \PYGZus{}alias,TOOL ANSIBLE)
!define TOOL\PYGZus{}ANSIBLE(\PYGZus{}alias, \PYGZus{}label, \PYGZus{}shape, \PYGZus{}color) ENTITY(\PYGZus{}shape,\PYGZus{}color,ansible,\PYGZus{}label, \PYGZus{}alias,TOOL ANSIBLE)
skinparam folderBackgroundColor\PYGZlt{}\PYGZlt{}TOOL ANSIBLE\PYGZgt{}\PYGZgt{} White
@enduml
\end{sphinxVerbatim}


\paragraph{tupadr3}
\label{\detokenize{Stdlib/StdLibOverview:tupadr3}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://github.com/plantuml/plantuml\PYGZhy{}stdlib/blob/master/tupadr3/devicons/android.puml
!define DEV\PYGZus{}ANDROID(\PYGZus{}alias) ENTITY(rectangle,black,android,\PYGZus{}alias,DEV ANDROID)
!define DEV\PYGZus{}ANDROID(\PYGZus{}alias, \PYGZus{}label) ENTITY(rectangle,black,android,\PYGZus{}label, \PYGZus{}alias,DEV ANDROID)
!define DEV\PYGZus{}ANDROID(\PYGZus{}alias, \PYGZus{}label, \PYGZus{}shape) ENTITY(\PYGZus{}shape,black,android,\PYGZus{}label, \PYGZus{}alias,DEV ANDROID)
!define DEV\PYGZus{}ANDROID(\PYGZus{}alias, \PYGZus{}label, \PYGZus{}shape, \PYGZus{}color) ENTITY(\PYGZus{}shape,\PYGZus{}color,android,\PYGZus{}label, \PYGZus{}alias,DEV ANDROID)
skinparam folderBackgroundColor\PYGZlt{}\PYGZlt{}DEV ANDROID\PYGZgt{}\PYGZgt{} White
@enduml
\end{sphinxVerbatim}


\subsubsection{Type 4 (\_color, \_scale, \_alias, \_shape, \_label)}
\label{\detokenize{Stdlib/StdLibOverview:type-4-color-scale-alias-shape-label}}

\paragraph{material}
\label{\detokenize{Stdlib/StdLibOverview:material}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
https://github.com/plantuml/plantuml\PYGZhy{}stdlib/blob/master/material/access\PYGZus{}point.

1153 files (not in categorised folders)
!define MA\PYGZus{}ACCESS\PYGZus{}POINT(\PYGZus{}color)                                 SPRITE\PYGZus{}PUT(                                   ma\PYGZus{}access\PYGZus{}point, \PYGZus{}color)
!define MA\PYGZus{}ACCESS\PYGZus{}POINT(\PYGZus{}color, \PYGZus{}scale)                         SPRITE\PYGZus{}PUT(                                   ma\PYGZus{}access\PYGZus{}point, \PYGZus{}color, \PYGZus{}scale)
!define MA\PYGZus{}ACCESS\PYGZus{}POINT(\PYGZus{}color, \PYGZus{}scale, \PYGZus{}alias)                 SPRITE\PYGZus{}ENT(  \PYGZus{}alias, MA ACCESS\PYGZus{}POINT,         ma\PYGZus{}access\PYGZus{}point, \PYGZus{}color, \PYGZus{}scale)
!define MA\PYGZus{}ACCESS\PYGZus{}POINT(\PYGZus{}color, \PYGZus{}scale, \PYGZus{}alias, \PYGZus{}shape)         SPRITE\PYGZus{}ENT(  \PYGZus{}alias, MA ACCESS\PYGZus{}POINT,         ma\PYGZus{}access\PYGZus{}point, \PYGZus{}color, \PYGZus{}scale, \PYGZus{}shape)
!define MA\PYGZus{}ACCESS\PYGZus{}POINT(\PYGZus{}color, \PYGZus{}scale, \PYGZus{}alias, \PYGZus{}shape, \PYGZus{}label) SPRITE\PYGZus{}ENT\PYGZus{}L(\PYGZus{}alias, MA ACCESS\PYGZus{}POINT, \PYGZus{}label, ma\PYGZus{}access\PYGZus{}point, \PYGZus{}color, \PYGZus{}scale, \PYGZus{}shape)
skinparam folderBackgroundColor\PYGZlt{}\PYGZlt{}MA ACCESS\PYGZus{}POINT\PYGZgt{}\PYGZgt{} White
\end{sphinxVerbatim}


\subsubsection{No Macros}
\label{\detokenize{Stdlib/StdLibOverview:no-macros}}
The following macros are sprites only with no macros.


\paragraph{logos}
\label{\detokenize{Stdlib/StdLibOverview:logos}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/logos/100tb.puml}

This one includes sprites only.


\paragraph{cloudinsight}
\label{\detokenize{Stdlib/StdLibOverview:cloudinsight}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/tree/master/cloudinsight}

This one includes sprites only.


\paragraph{kubernetes}
\label{\detokenize{Stdlib/StdLibOverview:kubernetes}}
\sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/kubernetes}

This does include a \sphinxurl{https://github.com/plantuml/plantuml-stdlib/blob/master/kubernetes/k8s-skinparam.puml}

Icons are grouped into a file based on resolutions and labels
\begin{itemize}
\item {} 
Different resolutions 64x63/16z, 128x125/16z, 256x249/16z{]}

\item {} 
labeled or unlabeled

\end{itemize}


\subsection{Superset Of Parameters}
\label{\detokenize{Stdlib/StdLibOverview:superset-of-parameters}}
The superset of parameters in macros:
\begin{itemize}
\item {} 
sprite

\item {} 
color

\item {} 
scale (material library only)

\item {} 
shape (Type 1 (e\_type), 4 (\_shape))

\item {} 
technology

\item {} 
description

\item {} 
label

\end{itemize}

These Text attributes are not parameters:
\begin{itemize}
\item {} 
Text Size: where text size does vary in some libraries

\item {} 
Number of Individual Text fields

\item {} 
Order of Individual Text fields

\end{itemize}


\section{PlantUML Stdlib Under The Hood}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:plantuml-stdlib-under-the-hood}}\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:understandingstdlib-label}}\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding::doc}}
\begin{sphinxadmonition}{tip}{Tip:}
Below are the steps I took to understand the PlantUML Standard Library Macros.
\begin{itemize}
\item {} 
It’s a step-by-step in the dark - taking small validated steps.

\item {} 
The steps are listed here because it’s educational and interesting.

\item {} 
\sphinxstylestrong{You should not, and don’t have to, follow these steps.}

\item {} 
Based on the understanding gained, there’s a better way to go.

\end{itemize}

\sphinxstylestrong{So you can skip this chapter and go straight to todo}
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:id1}}Todo:}
add ref to new way
\end{sphinxadmonition}


\subsection{Goal}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:goal}}\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Look under the hood of the generated plantuml icon files from
\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml} to understand them
better - from first principles e.g.
\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml/blob/master/dist/Compute/Batch.puml}

\item {} 
To confirm understanding
\begin{itemize}
\item {} 
a new bare-minimum macro will be created that requires only 1 parameter \sphinxtitleref{!define Batch(e\_alias)}

\item {} 
a new macro will be added to allow scaling the icon size

\end{itemize}

\end{enumerate}


\subsection{Steps to Understanding}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:steps-to-understanding}}

\subsubsection{Using the sprite directly}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:using-the-sprite-directly}}
“Batch” is defined in
\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml/blob/master/dist/Compute/Batch.puml})
ala

\begin{sphinxVerbatim}[commandchars=\\\{\}]
sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}...
\end{sphinxVerbatim}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-4fa61e0e0c6ac84aca4b63f7d9ec71b37a48f732}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 8, 9,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}

rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} 

\PYGZsq{}NOTE that if we add a more than one call \PYGZhy{} nothing happens! We\PYGZsq{}re missing an \PYGZdq{}as x\PYGZdq{}
rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} 

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Add an “as whatever”}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:add-an-as-whatever}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-463066f3ded7f976cb61778d4ec638e26c58b753}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 9, 10,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}

rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} 

\PYGZsq{}NOTE that if we add a more than one call \PYGZhy{} nothing happens! Need to change the second one to \PYGZdq{}as whateverElse\PYGZdq{}
rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} as whatever
rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} as whatever
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Bare Minimum}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:bare-minimum}}
Extract the sprite from the Batch.puml

Note that plantuml needs the @startuml and @endumlto recognize the file
as a plantuml diagram i.e. it won’t work without these

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-4708529c1973720e9b2994f2bbd88d7c3360a542}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 3, 4, 5, 6, 7, 8, 9,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}
@enduml

\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Bare Minimum by including Batch.puml}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:bare-minimum-by-including-batch-puml}}
The result is the same.

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-2b6f64a87b00dc0fb7c0ccc2aa8c4a80928e84ad}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 4,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Illegal Bare Minimum by including all.puml}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:illegal-bare-minimum-by-including-all-puml}}
Note: This is not valid plantuml as it does not contain any elements.
\begin{itemize}
\item {} 
The VSCode Plantuml extension will happily render this in preview mode. But VSCode Plantuml extension export will fail

\item {} 
Plantuml call will generate a blank output.

\end{itemize}

\fvset{hllines={, 4,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Listsprites}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:listsprites}}
Add the listsprites keyword

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-8672abec5c489e853218df6cc5ede73dc30f8177}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 6,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/all.puml\PYGZgt{}

listsprites

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Where did that guy come from?}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:where-did-that-guy-come-from}}
If any color is added we get an actor (from Deployment Diagram so can
explicitly use a rectangle as the Deployment Diagram entity - see next
example)

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-376ddbcda8485ffe4974708d93160884b5ce3bea}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 12,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 


sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

\PYGZdq{}\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Lose the guy - add a Deployment Diagram Rectangle Instead}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:lose-the-guy-add-a-deployment-diagram-rectangle-instead}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-b8be8ab25ceaca8ecd94a7d577e36b9ff6ed91ac}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 11,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{}

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Add some color}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:add-some-color}}
\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-5a926f2d6aa985f93b5835c6e929c56aa0aa4e0f}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 9,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}

rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZdq{} 

\PYGZsq{}this overides/specifies a color as red
rectangle \PYGZdq{}\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}
@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\subsubsection{Understanding the AWSEntity Macro}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:understanding-the-awsentity-macro}}
Based on reconstructing the existing Macros, we can define our own
minimal macro:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define Batch(e\PYGZus{}alias) AWSEntity(Batch, \PYGZsh{}D86613) as e\PYGZus{}alias
\end{sphinxVerbatim}

where the parameters are
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxcode{\sphinxupquote{{}`Batch{}`}} this refers to the sprite \$Batch

\item {} 
\sphinxcode{\sphinxupquote{{}`e\_alias{}`}} this adds on a “as whatever” so multiple calls to same sprite return multiple rendered icons.

\item {} 
\sphinxcode{\sphinxupquote{{}`\#D86613{}`}} is the color defined as part of the sprite puml file

\end{enumerate}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-0ef8fffddfa3ac501255096e2e49883df1a4c1b3}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 27, 28, 29,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Compute.puml\PYGZgt{}



\PYGZsq{}Use the Compute icon here for contrast
\PYGZsq{}this uses a macro \PYGZhy{} and hardcodes the color \PYGZhy{} color copyNpasted from Batch.puml file
\PYGZsq{}===================================================================================
!define Compute(e\PYGZus{}alias) rectangle \PYGZdq{}\PYGZlt{}color:\PYGZsh{}D86613\PYGZgt{}\PYGZlt{}\PYGZdl{}Compute\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}  
Compute(Compute) 
Compute(Compute) as something


\PYGZsq{} This uses the AWSEntity macros defined in Batch.puml
\PYGZsq{} the end result is same as above \PYGZhy{} but we use the e\PYGZus{}alias so that multiple calls show
\PYGZsq{}===================================================================================
!definelong AWSEntity(e\PYGZus{}sprite, e\PYGZus{}color)
rectangle \PYGZdq{}\PYGZlt{}color:e\PYGZus{}color\PYGZgt{}\PYGZlt{}\PYGZdl{}e\PYGZus{}sprite\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{} 
!enddefinelong

\PYGZsq{} Batch.puml
!define Batch(e\PYGZus{}alias) AWSEntity(Batch, \PYGZsh{}D86613) as e\PYGZus{}alias

Batch(whatever)
Batch(whateverElse) 
Batch(3.13xyz) 


@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\paragraph{Add Scaling to AWSEntity Macro}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:add-scaling-to-awsentity-macro}}
Replacing the last lines from the previous example to add scale.

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-4706cfb07e282e210d574defbdad9c42c9636b48}.png}\hspace*{\fill}}
\end{figure}

\fvset{hllines={, 25, 26, 27,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml 

!include \PYGZlt{}awslib/AWSCommon\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Batch.puml\PYGZgt{}
!include \PYGZlt{}awslib/Compute/Compute.puml\PYGZgt{}


\PYGZsq{}Use the Compute icon here for contrast
\PYGZsq{}this uses a macro \PYGZhy{} and hardcodes the color \PYGZhy{} color copyNpasted from Batch.puml file
\PYGZsq{}===================================================================================
!define Compute(e\PYGZus{}alias) rectangle \PYGZdq{}\PYGZlt{}color:\PYGZsh{}D86613\PYGZgt{}\PYGZlt{}\PYGZdl{}Compute\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}  
Compute(Compute) 
Compute(Compute) as something


\PYGZsq{} This uses the AWSEntity macros defined in Batch.puml
\PYGZsq{} the end result is same as above \PYGZhy{} but we use the e\PYGZus{}alias so that multiple calls show
\PYGZsq{}===================================================================================
!definelong AWSEntity(e\PYGZus{}sprite, e\PYGZus{}color)
rectangle \PYGZdq{}\PYGZlt{}color:e\PYGZus{}color\PYGZgt{}\PYGZlt{}\PYGZdl{}e\PYGZus{}sprite\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{} 
!enddefinelong

\PYGZsq{} Batch.puml
!define Batch(e\PYGZus{}alias, scale) AWSEntity(Batch*scale, \PYGZsh{}D86613) as e\PYGZus{}alias
Batch(whatever,2)
Batch(whateverElse,5) 
Batch(3.13xyz, 0.3) 


@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{note}{Note:}
This scale parameter could be added to existing macros in puml files e.g.
\sphinxurl{https://github.com/awslabs/aws-icons-for-plantuml/blob/master/dist/Compute/Batch.puml}

But, for each macro (4 in this case), we would need to add a new macro that supports a scale parameter (giving 8 macros in total).

This is not very extensible or future proof!

So we need to come up with a better way…
\end{sphinxadmonition}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define Batch(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn) AWSEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, \PYGZsh{}D86613, Batch, Batch)
!define Batch(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr) AWSEntity(e\PYGZus{}alias, e\PYGZus{}label, e\PYGZus{}techn, e\PYGZus{}descr, \PYGZsh{}D86613, Batch, Batch)
!define BatchParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, \PYGZsh{}D86613, Batch, Batch)
!define BatchParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr, \PYGZsh{}D86613, Batch, Batch)
\end{sphinxVerbatim}

\begin{sphinxadmonition}{note}{\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:id2}}Todo:}
refine the scale, raw macros
\end{sphinxadmonition}


\subsubsection{Updating the puml files to support minimal macro}
\label{\detokenize{StdlibUnderTheHood/StdlibUnderstanding:updating-the-puml-files-to-support-minimal-macro}}
Using AWSSimplified.puml as a reference, we can create an AWSBare.puml
file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYGZsq{} Styling
\PYGZsq{} \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}

hide stereotype

!definelong AWSEntityColoring(e\PYGZus{}stereo)
skinparam rectangle\PYGZlt{}\PYGZlt{}e\PYGZus{}stereo\PYGZgt{}\PYGZgt{} \PYGZob{}
    BackgroundColor AWS\PYGZus{}BG\PYGZus{}COLOR
    BorderColor transparent
    Shadowing false
\PYGZcb{}
!enddefinelong

\PYGZsq{} Overwriting Elements
\PYGZsq{} \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}

!definelong AWSEntity(e\PYGZus{}sprite, e\PYGZus{}color)
rectangle \PYGZdq{}\PYGZlt{}color:e\PYGZus{}color\PYGZgt{}\PYGZlt{}\PYGZdl{}e\PYGZus{}sprite\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}
!enddefinelong
\end{sphinxVerbatim}

For each icon puml file e.g. Batch.puml

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!define Batch(e\PYGZus{}sprite) AWSEntity(e\PYGZus{}sprite, \PYGZsh{}D86613)
\end{sphinxVerbatim}


\section{PlantUML Stdlib Under The Hood 2}
\label{\detokenize{Stdlib/StandardisingStdLib:plantuml-stdlib-under-the-hood-2}}\label{\detokenize{Stdlib/StandardisingStdLib::doc}}

\subsection{Step-by-step Towards A Standard Macro}
\label{\detokenize{Stdlib/StandardisingStdLib:step-by-step-towards-a-standard-macro}}
\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-8b8311b97c0cdf54ecd3fcf752eb4be4340c384c}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{each output is numbered to match the procedure e.g. 51 is output for ffoo51()}}\label{\detokenize{Stdlib/StandardisingStdLib:id3}}\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
\PYGZsq{}create equivalent of icons shown here https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml


sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}


rectangle \PYGZdq{}\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n0\PYGZdq{}  as rectangle


\PYGZsq{}Render a sprite
!procedure \PYGZdl{}ffoo1()
    rectangle \PYGZdq{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZbs{}n1\PYGZdq{}
!endprocedure

\PYGZdl{}ffoo1()


\PYGZsq{}Render a sprite \PYGZhy{} with color red
!procedure \PYGZdl{}ffoo2()
    rectangle \PYGZdq{}\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n2\PYGZdq{} as 2
!endprocedure

\PYGZdl{}ffoo2()


\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/dist/General/Disk.puml
\PYGZsq{}rectangle \PYGZdq{}==e\PYGZus{}label\PYGZbs{}n\PYGZlt{}color:e\PYGZus{}color\PYGZgt{}\PYGZlt{}\PYGZdl{}e\PYGZus{}sprite\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:TECHN\PYGZus{}FONT\PYGZus{}SIZE\PYGZgt{}[e\PYGZus{}techn]\PYGZlt{}/size\PYGZgt{}//\PYGZdq{} \PYGZlt{}\PYGZlt{}e\PYGZus{}stereo\PYGZgt{}\PYGZgt{} as e\PYGZus{}alias
\PYGZsq{}!define DiskParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr) AWSParticipant(p\PYGZus{}alias, p\PYGZus{}label, p\PYGZus{}techn, p\PYGZus{}descr, \PYGZsh{}232F3E, Disk, Disk)
\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/source/AWSCommon.puml
\PYGZsq{}common.puml: rectangle \PYGZdq{}==e\PYGZus{}label\PYGZbs{}n\PYGZlt{}color:e\PYGZus{}color\PYGZgt{}\PYGZlt{}\PYGZdl{}e\PYGZus{}sprite\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:TECHN\PYGZus{}FONT\PYGZus{}SIZE\PYGZgt{}[e\PYGZus{}techn]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n e\PYGZus{}descr\PYGZdq{} \PYGZlt{}\PYGZlt{}e\PYGZus{}stereo\PYGZgt{}\PYGZgt{} as e\PYGZus{}alias


\PYGZsq{}Render a sprite \PYGZhy{} with color red \PYGZhy{} and add some text
!procedure \PYGZdl{}ffoo3()
    rectangle \PYGZdq{}==label\PYGZbs{}n\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n[technology]\PYGZbs{}n\PYGZbs{}n Description 3\PYGZdq{} as 3
!endprocedure

\PYGZdl{}ffoo3()


\PYGZsq{}Render a sprite \PYGZhy{} with color red \PYGZhy{} and add some text \PYGZhy{} with some formatting
!procedure \PYGZdl{}ffoo4()
    rectangle \PYGZdq{}\PYGZlt{}\PYGZlt{}something\PYGZgt{}\PYGZgt{}\PYGZbs{}n==label\PYGZbs{}n\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:12\PYGZgt{}[technology]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n  Description 4\PYGZdq{} as 4
!endprocedure

\PYGZdl{}ffoo4()



\PYGZsq{}!procedure \PYGZdl{}ffoo5(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=red)
\PYGZsq{}OBSERVATION 1: the next line does not work \PYGZhy{} sprite is white \PYGZhy{} not red;  there is where the unquoted keyword comes in
\PYGZsq{}rectangle \PYGZdq{}\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}\PYGZbs{}n==\PYGZdl{}label\PYGZbs{}n\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n  \PYGZdl{}description 5\PYGZdq{} as 5
\PYGZsq{}the next line works i.e. sprite is red
\PYGZsq{}rectangle \PYGZdq{}\PYGZlt{}\PYGZlt{}//\PYGZdl{}alias//\PYGZgt{}\PYGZgt{}\PYGZbs{}n==\PYGZdl{}label\PYGZbs{}n\PYGZdq{}\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZdq{}\PYGZbs{}n//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n  \PYGZdl{}description 5\PYGZdq{} as \PYGZdl{}alias
\PYGZsq{}!endprocedure

\PYGZsq{}\PYGZdl{}ffoo5(\PYGZdq{}myalias\PYGZdq{}, \PYGZdq{}mydescription\PYGZdq{}, \PYGZdq{}mylabel\PYGZdq{}, \PYGZdq{}mytechnology\PYGZdq{}, 2, blue)




\PYGZsq{}unquoted means that you don\PYGZsq{}t have to use quotes when calling the procedure
!unquoted procedure \PYGZdl{}ffoo51(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=red)
    rectangle \PYGZdq{}\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}\PYGZbs{}n==\PYGZdl{}label\PYGZbs{}n\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n  \PYGZdl{}description 51\PYGZdq{} as 5
!endprocedure

\PYGZdl{}ffoo51(myalias, mydescription, mylabel, mytechnology, 2, blue)


!procedure \PYGZdl{}ffoo6(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=red)
    rectangle \PYGZdq{}\PYGZlt{}\PYGZlt{}//\PYGZdl{}alias//\PYGZgt{}\PYGZgt{}\PYGZbs{}n==\PYGZdl{}label\PYGZbs{}n\PYGZlt{}color:red\PYGZgt{}\PYGZlt{}\PYGZdl{}Batch*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}\PYGZbs{}n//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//\PYGZbs{}n\PYGZbs{}n  \PYGZdl{}description 6 \PYGZdq{} as \PYGZdl{}alias
!endprocedure

\PYGZdl{}ffoo6(\PYGZdq{}myaliasbatch2\PYGZdq{}, \PYGZdq{}mydescription\PYGZdq{}, \PYGZdq{}mylabel\PYGZdq{}, \PYGZdq{}mytechnology\PYGZdq{}, 2, blue)



\PYGZsq{}OBSERVATION 2: can\PYGZsq{}t do something like this 
\PYGZsq{}    \PYGZdl{}ffoo6(\PYGZdl{}scale=2)

@enduml
\end{sphinxVerbatim}


\subsection{Close But…}
\label{\detokenize{Stdlib/StandardisingStdLib:close-but}}
We can use the \sphinxhref{https://plantuml.com/preprocessing\#ae1b47605326b65f}{DefaultArgumentValue} to avoid having to specify a parameter value when we call our procedure.
BUT this only works if the default parameters are at the end i.e. it is all based on the order of the procedure parameters.

\sphinxstyleemphasis{In other words, the user has to know/care about the order of parameters.}

\begin{sphinxadmonition}{note}{\label{\detokenize{Stdlib/StandardisingStdLib:id1}}Todo:}
add ref to reqs
\end{sphinxadmonition}

To specify color blue I need to do

\sphinxcode{\sphinxupquote{{}`\$ffoo6("myaliasbatch2", "mydescription", "mylabel", "mytechnology", 2, blue){}`}}

What I want to do
\sphinxcode{\sphinxupquote{{}`\$ffoo6(\$color=blue){}`}}
or
\sphinxcode{\sphinxupquote{{}`\$ffoo6(\$scale=2){}`}}


\subsection{Procedure Keyword Arguments}
\label{\detokenize{Stdlib/StandardisingStdLib:procedure-keyword-arguments}}
To enable the StdLib standardisation, I suggested the \sphinxstyleemphasis{keyword arguments} and Arnaud produced a release to play with next day - and this became part of an official release:

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-f12946afdf65a6fa40ac72aa46e68e4aba68e0c0}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{each output is numbered to match the procedure e.g. 51 is output for ffoo51()}}\label{\detokenize{Stdlib/StandardisingStdLib:id4}}\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

\PYGZsq{}all sprites in a category would be included in an all.puml file for that category
\PYGZsq{}==================================================================================================

\PYGZsq{}create equivalent of icons shown here https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml
sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/dist/ARVR/ARVR.puml
sprite \PYGZdl{}Arvr [64x64/16z] \PYGZob{}
xTG3WiH054NHzutP\PYGZus{}th7RHkfsmnEdE1HZMZsIn0\PYGZus{}DGDuuVsZJwnMVJ\PYGZhy{}57txuuKrsP4Tv1mjl3Nw43qZlo147VO9xPueyu8j1l3jm7V0GtPFWe8\PYGZus{}UKzpL3rzc
TO4l0gZEzufCsDd\PYGZhy{}rnhoN2zKtKLoWk\PYGZhy{}bkHq\PYGZhy{}\PYGZhy{}vabr0TypEy\PYGZus{}WiwEmc9K7FATAd\PYGZus{}fVDwOZygdU\PYGZus{}uEF\PYGZus{}pmLgUMA\PYGZus{}wChkV1SavCc4LdXNVe2m
\PYGZcb{}

\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/dist/ARVR/Sumerian.puml
sprite \PYGZdl{}Sumerian [64x64/16z] \PYGZob{}
xPO5qkim38HN3FU\PYGZus{}xuE29mMx\PYGZhy{}Hbtg4to6GIZxVVJhtvLLI\PYGZhy{}XbK2QJo6sVv90JA3SImUJRVuAjBeDl8zE0G2EyVy42d87NGOmGG0vVHuu7iRWZt4daBUWWW6j
8w\PYGZus{}zNufuHES9KgxpKjr5o6CKQyh5uGi59BTfEuR1GHvEi6cu0N2sWE8sb99j03370L41CkryG9FQh6rTffOJlEWGLz\PYGZhy{}cbv5N4Pqh83Vf5THL67BA\PYGZhy{}qXltEu\PYGZus{}
2XWrtrzlzZUfwuBCdjy\PYGZus{}3ilGeY0Pgmj0NO5ehtb1vh9c0OhsaV\PYGZus{}Qfa\PYGZus{}hKUzKUDIs\PYGZus{}eJgy7myMFEPLzinwd3nSQ0rpwYR\PYGZus{}kiWmAgVmezmYuKSJ\PYGZus{}94VZJDABad
y4EnAVcdyy4Xo6H\PYGZus{}7g\PYGZhy{}02Se1oIVprMqKX\PYGZus{}YdW9\PYGZus{}AEtjtdVlNiykVmAS0Tjd\PYGZus{}1exTl8wS3Ju5q5sydGux\PYGZhy{}94Dty4xGtfeyAEewG4FQCvv0vQy0b8zvuiN\PYGZus{}EYw
AHy0nu8Ue\PYGZhy{}gMJrFBOgjTKr\PYGZus{}pYfyChlaOjDhmay6vj0xaWvyFxdKOyiYlZSFQGGZIVMbSrhaa46WOf\PYGZhy{}dmcOS1a3mPjp9mFqqf77FZ\PYGZhy{}7JZ\PYGZhy{}Y76UQvV\PYGZus{}Uel
\PYGZcb{}


\PYGZsq{} sprite decorator is defined once only \PYGZhy{} not once per sprite as per current puml files in stdlib
\PYGZsq{}==================================================================================================

\PYGZsq{} We define 1 or more sprite decorators in stdlib
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
!unquoted procedure \PYGZdl{}SpriteDecorator(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})

rectangle \PYGZdl{}alias as \PYGZdq{}
\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}
\PYGZdl{}label
\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

  \PYGZdl{}description\PYGZdq{}
!endprocedure

\PYGZsq{}stdlib macros pass the sprite to the decorator \PYGZhy{} and the other parameters
\PYGZsq{}all this would happen in an all.puml file per sprite category
\PYGZsq{}==================================================================================================
!unquoted procedure \PYGZdl{}BATCH(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
\PYGZdl{}SpriteDecorator(\PYGZdl{}Batch, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour)
!endprocedure

!unquoted procedure \PYGZdl{}ARVR(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
\PYGZdl{}SpriteDecorator(\PYGZdl{}Arvr, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour)
!endprocedure

!unquoted procedure \PYGZdl{}SUMERIAN(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
\PYGZdl{}SpriteDecorator(\PYGZdl{}Sumerian, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour)
!endprocedure




\PYGZsq{}user code
\PYGZsq{}================
\PYGZdl{}BATCH(BATCH, \PYGZdl{}scale=2)

\PYGZdl{}ARVR(ARVR, \PYGZdq{}description\PYGZbs{}non several lines\PYGZdq{}, \PYGZdl{}scale=.9, \PYGZdl{}colour=\PYGZdq{}blue\PYGZdq{})

\PYGZdl{}SUMERIAN(SUMERIAN, \PYGZdq{}other description\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}sdsd\PYGZdq{}, \PYGZdl{}scale=1.4)


\PYGZsq{}TODO: play with this to see if \PYGZdq{}Dynamic invocation\PYGZdq{} could be useful here? 
\PYGZsq{} i.e. given 
\PYGZsq{}   a sprite
\PYGZsq{}   a decorator function/procedure with params (\PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour)
\PYGZsq{} \PYGZpc{}call\PYGZus{}user\PYGZus{}func(\PYGZdq{}decorator\PYGZdq{}, \PYGZdq{}\PYGZdl{}sprite\PYGZdq{})
\PYGZsq{} this would reduce the duplication even further in examples below 
@enduml
\end{sphinxVerbatim}


\subsection{Extensibility}
\label{\detokenize{Stdlib/StandardisingStdLib:extensibility}}
So now we have a way for the user to specify any or all of the sprite parameters.

But what happens if we want to add new parameters in the future?


\subsubsection{Option 1: Reserve Parameters}
\label{\detokenize{Stdlib/StandardisingStdLib:option-1-reserve-parameters}}
One option is to reserve parameters in the procedure definition:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!unquoted procedure \PYGZdl{}SpriteDecorator(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{}, \PYGZdl{}res1=\PYGZdq{}\PYGZdq{}, \PYGZdl{}res2=\PYGZdq{}\PYGZdq{}, \PYGZdl{}res3=\PYGZdq{}\PYGZdq{}, \PYGZdl{}res4=\PYGZdq{}\PYGZdq{})
\end{sphinxVerbatim}

and used a function/procedure to map the new parameter feature to a reserved word.

We’re not smart enough to predict the future, and we don’t want to impose limits, so we won’t be doing this.


\subsubsection{Option 2: Dynamic Invocation}
\label{\detokenize{Stdlib/StandardisingStdLib:option-2-dynamic-invocation}}
See {\hyperref[\detokenize{Stdlib/stdlibRequirements:stdlibreqs-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Standard Library - What We Have And What We Want}}}} for requirements for stdlib.

Let’s define 3 SpriteDecorator Procedures that change the sprite parameters per {\hyperref[\detokenize{Stdlib/stdlibRequirements:stdlibreqs-label}]{\sphinxcrossref{\DUrole{std,std-ref}{Standard Library - What We Have And What We Want}}}}, where each procedure adds more parameters than the previous one.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
!unquoted procedure \PYGZdl{}SpriteDecorator(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
!unquoted procedure \PYGZdl{}SpriteDecorator2(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}green\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}node\PYGZdq{})
!unquoted procedure \PYGZdl{}SpriteDecorator3(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}blue\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}18\PYGZdq{})
\end{sphinxVerbatim}

When we define the procedure for the user to call e.g. \$BATCH\_DYN, we specify which SpriteDecorator to be used via \$dynN dynamic invocation.

If at some point later, a new SpriteDecorator becomes available with same parameters but differnt processing, or with new parameters, then we can change this dynN to the new procedure.


\paragraph{User code}
\label{\detokenize{Stdlib/StandardisingStdLib:user-code}}
Parameters
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
can use ordered list of parameters up to the one they want to specify.

\item {} 
can use named arguments to specify only the parameter(s) they care about.

\end{enumerate}

Existing code does not need to know or care that the SpriteDecorator has changed.

New code can use the new decorator functionality if desired.

Play with \sphinxhref{http://www.plantuml.com/plantuml/uml/j911YiCm34NtFiLV36ILP3ymCCnD54U93OhjiUI6thvk2hr1XK0WwIt--rMZQkqGDv08jDHeh8W914\_6UwvtdBd9YeNxsajRURtklKMcqbbiKHXRhh10zkRSyFFnScxmbSaO\_D\_YZOIJ8M-8FYU5Xdmc1AwCO5RqUvxtQA4jay\_7JASABVgSu\_K\_zWXZ4KgNa9SBVFsH-O07g\_Ioyo1JW75ytwlm1l0TpcL9Mw052hJ0q6BC15xEC2q71XYCzwunCT5lP-BcMJpBVtv\_aOHD4dvOQV\_hd\_vssEo7d3Orvi4vs\_KTpXfaQstqMhCFvFgDnIIwMDgJD7eidlhZk\_MNEs1PMDnt\_qAv-ygQTPQU3NN6NOTJZzpQxmqtr0WdUeA23HKHlJvK16aV2IHugerhaIER7bu9MD8Nxrgw8Px1xUxOT7kfYFUMIAo6g-\_g9m-vIoi0NghUDUZDB3YNmqLIGIde3r2vAoqtlsuDD\_ciBAkIPVxYxTKuzVEYdV67OxSjQ4qFECASKTR0H0mu8pf8jDHjD0tfnZkBYdGupsYiaSwUOsTC61O4lLCjSEGiuvV2ivjzJzJl-eLfpcpimoLtUGdfQmf2rH-CmG2FlZ1BZzE-4Y2YmXGs\_EvLbJaj5mNvfHyuLr9L6nq8b2t3SrokemahbplRt-iB2x7kN9NRoNPoVbFv0SYvCzqfYhANvg-Xq3nnbcajeuV4qvjchkf1rGmOxiUn6\_1aiPzgVdTjj\_Jo4ZsBDW5DwDo2C0lsSjFfRcy7vjPMw9tXzuWeC0v\_\_oUr\_ndHJzfzqn-SJ7C-\_cJrDF-eJ\_Zyr\_ov\_qzawhYCVpGM67nKNu4eEDUTp1wQA\_bvROi9VxHCOw\_nFPvk7u0kneKGECNc-hb3an7bUIF46YTF21OMDntlh08\_nDsN5MJeAfj7SagE3Tln3POXC6PFZ\_8Z2gszj\_bn\_pq4hj21CjPsKfodIyQCd-hhSBirM\_OtQfcqlGuCioJf20BQQnH5zQhXNyMITJLGCrJ0o-h6jCn2H3GTzTWkmxkArdFLGjPFblElO6Sl1-OS\_hz6zGdEnphv\_7VOVxz\_ZEkvuj3Mc3zU7LuFqKOqJi7tZRccSodCNycunHk4PZKljdrZNgd5FSolDC550QRA-pSScaz8rEQKNxhZhW63qoYa0fSTPSTmiM601Lu9aUjd5Cz2bfp2A8gavd1SqUwGWbmrNx7AhRUQKVnAP-j1Av4OjQYSWa8ZJzQuBbej\_HBWS5Ea7QTKKHh0ypAm1VRSZjHGz4SbZK5Hk6QdHOQzCx\_f8Zg2DrH77XPYSBKb-QGomwkRDO8Et2iQvt7lzZWiLd8wPmr5VDqP-Hju9Mw0uufvDQViKYc\_mAsc1A97aQ3A2dShlDmcb9ibbJ6zwvfdx\_LdpVYF\_m1ZlxwVgAqZh9OGvpj-4yitaIB0sBoefoGxK47xgF0terHuVQKhaai6S7xEVc-m7--3zKBlB5AGgitDdC7EgMaBiUg3eCaGcsz1TrnztYJY84uqCyZ6AC9bfi9cp4LELIrV3K5\_d9S5B0yAqkE-aDf1sdizg5SAFkGOvanvDqVzv9PDO8seVnVqN7M9srmgd51fQS2MH0lLjynoQVtkObz\_64PyW\_VK7wia4QJ8BPWC\_xe-c\_3OQte5wyDGoB8UCx8PCszP2X\_BFwgl\_jwsRI3wlpx5HSZWU7NiMDg08N2CPKs15LXI83ys3CDWqEBP9YAH7ab5qpxzZfGYEv7Lf5jTe4KAYzJnlVlnU29\_dTrXwXGTlF3XepxxuVhyziFrpIk-Rptu3O7ZGaY4CIWDcT88jRev9aepgxJ\_OXlBKp6d5HULkShrjeN\_DXS8zr8LuFuV0vCS4YO1cH5f-KWZiG0bqMCkSfiJNq5x4vY1Z4bRUeCrqon3YmHCZCmuv8BU3XeUhcJF0ZwWh2ZPNEKMIhHa\_mlQdW73IhZnaLmykWd2r6vmYbGIwtZmt2Pg6qKjexXj50Uzuq\_\_5npaygzSMO9PQvKWT\_auVCPsT7XPLbC3E6IfO8P-EPf4YxKLIfw58KsaR8vfzMWnMKcLgcLPZKt2KZmRqrD2ixa-2pNoi1y46XFBv3B56XVeBmmcaseqdGOLQZ1nw\_HflNmwQHpwjiAUJaRUOXgCHXCZ\_i7JSJJzOykFFoSZDpqTZO80dZWV1WSeUHCyoPjn3ipBmApO6ZTYs5-6epsaUAaHfN\_beZWBfUBeSkx7NqV2uGtDM\_pR4jGNgKEyXphCqnotof3GB7VZEYwQ6l-mnxeqFAyi3xJh0nQDXPlRyzltRu5OKb2BxTxh-wTX6VgBoN-hJgldXDNLX38L6ikiI6R4E0xxBSjejsdKbdwhshjNnX-lLdGIzfkaNFn-TNwvlwpqxCerUeK6fB9GA7qFNBYkcPR0J4k\_S0n6LPyd4BAoT7PhrB1GQQeA8PUG2ed1mI4l9Pn1M6E4Ro1iSCBW6o4Vr3tE6XqSEVi1R6MCnYohw-B76n6veHUiUzYeZX9NyKPTn54NSzH57JMWSHTet0KQTu76OV\_5WywxgmlufCEEGuJR5S8SMMxBwkOkwgFBGcbWi1GFABrU1b2WFxqaAoQNsBpBMA8LvEk2QMxWQ9vRhmok2kcd-iI1m-LmU-rFvxTlVvwHLA7AWk-0lEg02wqog4fhbN-8cgSOq2R3uH30oT0xO4w12Efp4w6e1Gdg57A3kcSW8LGmbfKkAFJY7u1pqUJhjT9LbCtvodWVvmYCapC4o-OY5ROa-lhCLWVWmJWkM9xQUeVvJhMxfJVH7dtMiyhB6s8NtIFN4w97beQZ\_wpbxWxCtGDzN7i-8NHlG7-H\_r-HFfAzBkARkyjtr-\_FhtpKN-np7Bi6tzqmcaltPqd4XhcTaw07TmQrtoPcZObOb52uPc5NMFhx20W9IdCaEANXGJ2GB4CEJEVB3AKrmTPs2ETEg3CAOzRqwrQZfjznlsDLzB5LJXzphGePTYsFDmNvZjhhbfv3Hhgg7UjllTZCDzI6B-YlxK1\_DrxyN1HPMPi7mLDvXQOkQ-t7otpTorzsTm0dm-zfi1RodWRLrXj0VE8S2tv4oVCi\_HS0}{StdlibProposalCode} online.

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-5ce55fbcd62f498992a92207a51eed2004bbd11f}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{decorators separated from sprite}}\label{\detokenize{Stdlib/StandardisingStdLib:id5}}\end{figure}

\fvset{hllines={, 37, 50, 63, 102, 106, 110, 83, 86, 89,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
\PYGZsq{}all sprites in a category would be included in an all.puml file for that category
\PYGZsq{}==================================================================================================

\PYGZsq{}create equivalent of icons shown here https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml
sprite \PYGZdl{}Batch [64x64/16z] \PYGZob{}
xLQ7bjim30CdzFzVtEV1iErPkJpT7iYm5aWDKERujFZ5Bp8YkSvM011VfMzSDy2Mw1JidbCGAtmllmbPuIkoImjyGUsyBV4LV95\PYGZus{}Xny50bpW4uTRAjOKu81b
Xa0vbX3OKFG5C0IMNLyxXA\PYGZus{}3PvW5hqHSOFBP\PYGZus{}Ovk4036hYi0pJdTCgqD6A0g4FQ0hOwygxSikGOanw11AuvtomxXjNiRDECmn21xxTkJP0N4tdy1Gmu5T2GW
6ygFL\PYGZus{}sqbx3NvA\PYGZus{}FVtt\PYGZus{}ri\PYGZus{}F1CZNra\PYGZhy{}10TpNhvVr2KGcyVCOdoBySlpv\PYGZhy{}jC1ZSVveO36\PYGZus{}Fwb0UASqGqG0QpfJgP2Eo60u59\PYGZhy{}fLVozhhdNk2WTeDpq2O6AAL\PYGZus{}
uV7KGPNO2lya17gz1pMiD1VmFNH9IBLNe3xA3q07eNsMy\PYGZus{}WdXESwU4jRmddEk\PYGZhy{}FUuPFjjthiqAEGVUz8rlqmsK1nhtYlklvp7vWRfka0jUNITUdTzgxFyzLx
\PYGZhy{}Ikh\PYGZus{}YdmYr\PYGZus{}y0G
\PYGZcb{}

\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/dist/ARVR/ARVR.puml
sprite \PYGZdl{}Arvr [64x64/16z] \PYGZob{}
xTG3WiH054NHzutP\PYGZus{}th7RHkfsmnEdE1HZMZsIn0\PYGZus{}DGDuuVsZJwnMVJ\PYGZhy{}57txuuKrsP4Tv1mjl3Nw43qZlo147VO9xPueyu8j1l3jm7V0GtPFWe8\PYGZus{}UKzpL3rzc
TO4l0gZEzufCsDd\PYGZhy{}rnhoN2zKtKLoWk\PYGZhy{}bkHq\PYGZhy{}\PYGZhy{}vabr0TypEy\PYGZus{}WiwEmc9K7FATAd\PYGZus{}fVDwOZygdU\PYGZus{}uEF\PYGZus{}pmLgUMA\PYGZus{}wChkV1SavCc4LdXNVe2m
\PYGZcb{}

\PYGZsq{}https://github.com/awslabs/aws\PYGZhy{}icons\PYGZhy{}for\PYGZhy{}plantuml/blob/master/dist/ARVR/Sumerian.puml
sprite \PYGZdl{}Sumerian [64x64/16z] \PYGZob{}
xPO5qkim38HN3FU\PYGZus{}xuE29mMx\PYGZhy{}Hbtg4to6GIZxVVJhtvLLI\PYGZhy{}XbK2QJo6sVv90JA3SImUJRVuAjBeDl8zE0G2EyVy42d87NGOmGG0vVHuu7iRWZt4daBUWWW6j
8w\PYGZus{}zNufuHES9KgxpKjr5o6CKQyh5uGi59BTfEuR1GHvEi6cu0N2sWE8sb99j03370L41CkryG9FQh6rTffOJlEWGLz\PYGZhy{}cbv5N4Pqh83Vf5THL67BA\PYGZhy{}qXltEu\PYGZus{}
2XWrtrzlzZUfwuBCdjy\PYGZus{}3ilGeY0Pgmj0NO5ehtb1vh9c0OhsaV\PYGZus{}Qfa\PYGZus{}hKUzKUDIs\PYGZus{}eJgy7myMFEPLzinwd3nSQ0rpwYR\PYGZus{}kiWmAgVmezmYuKSJ\PYGZus{}94VZJDABad
y4EnAVcdyy4Xo6H\PYGZus{}7g\PYGZhy{}02Se1oIVprMqKX\PYGZus{}YdW9\PYGZus{}AEtjtdVlNiykVmAS0Tjd\PYGZus{}1exTl8wS3Ju5q5sydGux\PYGZhy{}94Dty4xGtfeyAEewG4FQCvv0vQy0b8zvuiN\PYGZus{}EYw
AHy0nu8Ue\PYGZhy{}gMJrFBOgjTKr\PYGZus{}pYfyChlaOjDhmay6vj0xaWvyFxdKOyiYlZSFQGGZIVMbSrhaa46WOf\PYGZhy{}dmcOS1a3mPjp9mFqqf77FZ\PYGZhy{}7JZ\PYGZhy{}Y76UQvV\PYGZus{}Uel
\PYGZcb{}



\PYGZsq{}=============================DECORATORS==================================
\PYGZsq{} We define 1 or more sprite decorators in stdlib
\PYGZsq{} Define our decorators that we know now \PYGZhy{} and can easily define new ones in future with as manty new parameters 
\PYGZsq{} as we want, that we don\PYGZsq{}t even know about yet
\PYGZsq{} Let\PYGZsq{}s say SpriteDecorator is defined month 1, SpriteDecorator2 is defined month 2, SpriteDecorator3 is defined month 3
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
!unquoted procedure \PYGZdl{}SpriteDecorator(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})

rectangle \PYGZdl{}alias as \PYGZdq{}
\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}
\PYGZdl{}label
\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

  \PYGZdl{}description\PYGZdq{}
!endprocedure

\PYGZsq{}add a new shape parameter
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
!unquoted procedure \PYGZdl{}SpriteDecorator2(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}green\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}node\PYGZdq{})

\PYGZdl{}shape \PYGZdl{}alias as \PYGZdq{}
\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}
\PYGZdl{}label
\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
//\PYGZlt{}size:12\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

  \PYGZdl{}description\PYGZdq{}
!endprocedure

\PYGZsq{}add a new shape parameter + a textsize parameter
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
!unquoted procedure \PYGZdl{}SpriteDecorator3(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}blue\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}18\PYGZdq{})

\PYGZdl{}shape \PYGZdl{}alias as \PYGZdq{}
\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{}
\PYGZdl{}label
\PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
//\PYGZlt{}size:\PYGZdl{}textsize\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

  \PYGZdl{}description \PYGZdq{}
!endprocedure

\PYGZsq{} test STATIC call of decorators with same icon
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
\PYGZdl{}SpriteDecorator(\PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}static\PYGZus{}dec1\PYGZdq{})
\PYGZdl{}SpriteDecorator2(\PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}static\PYGZus{}dec2\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}node\PYGZdq{})
\PYGZdl{}SpriteDecorator3(\PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}static\PYGZus{}dec3\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}20\PYGZdq{})

\PYGZsq{} test DYNAMIC call of decorators with same icon
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
\PYGZsq{}this does not work directly as \PYGZdl{}SpriteDecorator \PYGZhy{} so we do indirect as per following line
!\PYGZdl{}dyn = \PYGZdq{}\PYGZdl{}Sprite\PYGZdq{}+ \PYGZdq{}Decorator\PYGZdq{}
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn, \PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}dynamic\PYGZus{}dec1\PYGZdq{}, \PYGZdq{}description\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}technology\PYGZdq{})

!\PYGZdl{}dyn2 = \PYGZdq{}\PYGZdl{}Sprite\PYGZdq{}+ \PYGZdq{}Decorator2\PYGZdq{}
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn2, \PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}dynamic\PYGZus{}dec2\PYGZdq{})

!\PYGZdl{}dyn3 = \PYGZdq{}\PYGZdl{}Sprite\PYGZdq{}+ \PYGZdq{}Decorator3\PYGZdq{}
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn3, \PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdq{}dynamic\PYGZus{}dec3\PYGZdq{})


\PYGZsq{}=============================END DECORATORS==================================



\PYGZsq{} The beauty here is that for a given icon, we can change a given macro upwards (but not downwards)
\PYGZsq{} e.g. can change BATCH\PYGZus{}DYN invoked prodedure from \PYGZdl{}dyn, to \PYGZdl{}dyn2, to \PYGZdl{}dyn3 etc...  this gives: 
\PYGZsq{} future proofing: user\PYGZsq{}s code stays the same, but support for new params can be added
\PYGZsq{} ability to easily change the default decoration 
!unquoted procedure \PYGZdl{}BATCH\PYGZus{}DYN(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}red\PYGZdq{})
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn, \PYGZdq{}\PYGZdl{}Batch\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour)
!endprocedure

!unquoted procedure \PYGZdl{}ARVR\PYGZus{}DYN( \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}green\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}node\PYGZdq{})
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn2, \PYGZdq{}\PYGZdl{}Arvr\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour, \PYGZdl{}shape)
!endprocedure

!unquoted procedure \PYGZdl{}SUMERIAN\PYGZus{}DYN(\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}blue\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}30\PYGZdq{})
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}dyn3, \PYGZdq{}\PYGZdl{}Sumerian\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour, \PYGZdl{}shape, \PYGZdl{}textsize)
!endprocedure


\PYGZsq{} User can specify what they want in order, or via named arugments
\PYGZdl{}BATCH\PYGZus{}DYN(\PYGZdq{}batch\PYGZus{}dyn\PYGZus{}1\PYGZdq{}, \PYGZdq{}desc\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{}, 1)
\PYGZdl{}BATCH\PYGZus{}DYN(\PYGZdq{}batch\PYGZus{}dyn\PYGZus{}2\PYGZdq{}, \PYGZdq{}desc\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{}, 2, \PYGZdq{}brown\PYGZdq{})
\PYGZdl{}BATCH\PYGZus{}DYN(\PYGZdq{}batch\PYGZus{}dyn\PYGZus{}3\PYGZdq{}, \PYGZdl{}scale=4)

\PYGZdl{}ARVR\PYGZus{}DYN( \PYGZdq{}arvr\PYGZus{}dyn\PYGZus{}1\PYGZdq{})
\PYGZdl{}ARVR\PYGZus{}DYN(\PYGZdq{}arvr\PYGZus{}dyn\PYGZus{}2\PYGZdq{}, \PYGZdq{}descsdfsdf\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
\PYGZdl{}ARVR\PYGZus{}DYN( \PYGZdq{}arvr\PYGZus{}dyn\PYGZus{}3\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}mytech\PYGZdq{})


\PYGZdl{}SUMERIAN\PYGZus{}DYN(\PYGZdq{}sumerian\PYGZus{}dyn\PYGZus{}1\PYGZdq{}, \PYGZdq{}descsdfsdf\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{})
\PYGZdl{}SUMERIAN\PYGZus{}DYN(\PYGZdq{}sumerian\PYGZus{}dyn\PYGZus{}2\PYGZdq{}, \PYGZdq{}descsdfsdf\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{}, 0.5, \PYGZdq{}pink\PYGZdq{}, \PYGZdq{}node\PYGZdq{}, 30)



@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines

\begin{sphinxadmonition}{note}{\label{\detokenize{Stdlib/StandardisingStdLib:id2}}Todo:}
@startuml
usecase UC1 as ”
= Extra-large heading
Some text
== Large heading
Other text
=== Medium heading
Information
….
==== Small heading”
@enduml
\end{sphinxadmonition}


\section{Standard Library - What We Have And What We Want}
\label{\detokenize{Stdlib/stdlibRequirements:standard-library-what-we-have-and-what-we-want}}\label{\detokenize{Stdlib/stdlibRequirements:stdlibreqs-label}}\label{\detokenize{Stdlib/stdlibRequirements::doc}}

\subsection{Observations on Standard Library}
\label{\detokenize{Stdlib/stdlibRequirements:observations-on-standard-library}}
\begin{sphinxadmonition}{tip}{Tip:}
The Observations, Requirements, and User Stories here allow us to create a new
PlantUML Stdlib to empower the user per todoref
\end{sphinxadmonition}


\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Observations on Standard Library}\label{\detokenize{Stdlib/stdlibRequirements:id1}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{5}{55}|\X{50}{55}|}
\hline
\sphinxstyletheadfamily 
\#
&\sphinxstyletheadfamily 
Observation
\\
\hline
\sphinxstylestrong{OBV\_DEFINE\_DEPRECATED}
&
Marcos use define and definelong which are deprecated per below
\\
\hline
\sphinxstylestrong{OBV\_DRY}
&
DRY (Don’t Repeat Yourself). The macros are repeated
\begin{quote}

within a file -repeat the macro to add each new parameter

across files - the macro content is largely the same - but the macro name changes to specify the icon to use
\end{quote}
\\
\hline
\sphinxstylestrong{OBV\_CLOSE\_COUPLING}
&
Macros are defined in the icon file for each icon
\begin{quote}

the parameters, and order of parameters, is fixed
\end{quote}
\\
\hline
\sphinxstylestrong{OBV\_CONSISTENCY}
&\begin{quote}

icon sizes
\begin{quote}

some have multiple sizes

for those that have one size, it is not standard/common with the other stdlib libraries
\end{quote}

icon files
\begin{quote}

some break up the icons into categories sub-directories, some don’t
some have an \sphinxcode{\sphinxupquote{{}`all.puml{}`}} file that includes all sprite content per category, some don’target
\end{quote}
\end{quote}
\\
\hline
\sphinxstylestrong{OBV\_NO\_SCALE}
&
There’s no way to scale the icons from the macros (the !define statements) except for Material.
\begin{quote}

Plantuml does support scaling per \sphinxurl{https://forum.plantuml.net/4267/scaling-of-the-sprites-or-images}.

Support for scaling stereotypes is available since \sphinxhref{https://forum.plantuml.net/4267/scaling-of-the-sprites-or-images?show=9086\#c9086}{March 2019}.
\end{quote}
\\
\hline
\sphinxstylestrong{OBV\_NO\_TEXTATTRIB}
&
There’s no way to change the size, colour etc… of the text description, label, technology fields
\\
\hline
\sphinxstylestrong{OBV\_3PARAMS\_MIN}
&
At least 3 parameters are required and are rendered in the diagams
\begin{quote}

\sphinxcode{\sphinxupquote{{}`!define Batch(e\textbackslash{}\_alias, e\textbackslash{}\_label, e\textbackslash{}\_techn){}`}}.

In other words, the marcos force a user to specify things they may not care about e.g. to specify color in this macro, the user needs to specify the preceeding parameters also

\sphinxstyleemphasis{!define WHATEVER(\_alias, \_label, \_shape, \_color) ENTITY(\_shape,\_color,whatever,\_label, \_alias,WHATEVER)}

So if we wanted a colored or scaled icon only (with no label or technology), we have to implement it ourselves.
\end{quote}
\\
\hline
\sphinxstylestrong{OBV\_ALL\_PUML}
&
Some libaries have an \sphinxcode{\sphinxupquote{{}`all.puml{}`}} that includes all icons and their macros for a given category/subset of icons.
\begin{quote}

This allows including all icons by including one file - rather than an include per icon.
\end{quote}
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{note}{Note:}
The following software principles should apply
\begin{itemize}
\item {} 
Loose Coupling, High Cohesion (Consistency)

\item {} 
DRY (Don’t Repeat Yourself)

\item {} 
Open/Closed Principle (OCP) “open for extension” but “closed to modification” i.e. not have to change old macros to implement new behavior. New Macros are defined instead, that don’t break existing user code (SOLID).

\end{itemize}
\end{sphinxadmonition}


\subsection{Macro Definitions}
\label{\detokenize{Stdlib/stdlibRequirements:macro-definitions}}
Macros define the following
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
The superset of parameters
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
sprite

\item {} 
color

\item {} 
scale (material library only)

\item {} 
shape (Type 1 (e\_type), 4 (\_shape))

\item {} 
technology

\item {} 
description

\item {} 
label

\end{enumerate}

\item {} 
Fixed
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
Text Size

\item {} 
Text Order

\end{enumerate}

\end{enumerate}


\subsection{What a User Wants In A Standard Library}
\label{\detokenize{Stdlib/stdlibRequirements:what-a-user-wants-in-a-standard-library}}

\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{What a User Wants In A Standard Library}\label{\detokenize{Stdlib/stdlibRequirements:id2}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{5}{55}|\X{50}{55}|}
\hline
\sphinxstyletheadfamily 
\#
&\sphinxstyletheadfamily 
Requirement
\\
\hline
\sphinxstylestrong{REQ\_CONSISTENCY}
&
Consistency of macros, files, sizes
\\
\hline
\sphinxstylestrong{REQ\_ONLY\_CARE}
&
Specify the things they care about
\begin{quote}

Default values specified when the icons are built, but the ones the user cares about can be overridden by the user in their diagram file (at runtime)
\end{quote}
\\
\hline
\sphinxstylestrong{REQ\_DECOUPLE}
&
Decoupling of the sprite (the image), from the decoration (text, shape, color, scale etc…)
\begin{quote}

To benefit from other people’s work e.g. if a new parameter or decoration/theme is added they like, they want to use it in their diagrams

Future Proofing with backwards compatibility: new functionality can be added to the sprite library, but the user’s existing code will still work with this new library
\end{quote}
\\
\hline
\sphinxstylestrong{REQ\_CATEGORY}
&
Grouping of icons into categories.
\begin{quote}

A user can include a file for that category that incldues all the icons (and not have to include a file for every icon)
\end{quote}
\\
\hline
\sphinxstylestrong{REQ\_CONTRIBUTE}
&
To be able to easily share / contribute
\begin{quote}

their icon set

their theme or style or layout
\end{quote}
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}


\subsection{User Stories}
\label{\detokenize{Stdlib/stdlibRequirements:user-stories}}

\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{User Stories}\label{\detokenize{Stdlib/stdlibRequirements:id3}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{5}{55}|\X{50}{55}|}
\hline
\sphinxstyletheadfamily 
\#
&\sphinxstyletheadfamily 
As a User, I want X, so I am empowered to do Y
\\
\hline
\sphinxstylestrong{US\_HIGHLIGHT}
&
To highlight certain parts of a diagram
\begin{quote}

so I can show the relevant or important parts in the context of an overall diagram

e.g. a diagram may have 10 icons/components, but I want to highlight the ones
being discussed or changed in my current system
\end{quote}
\\
\hline
\sphinxstylestrong{US\_THEME}
&
To use, or create, a theme,
\begin{quote}

so I can create diagams consistent with my other (personal, organisation, company) documentation.
\end{quote}
\\
\hline
\sphinxstylestrong{US\_ICONSET}
&
To use, or create and contribute, an icon set easily
\begin{quote}

so I have all the icons I need for my diagrams
\end{quote}
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}


\section{Standardising Standard Library}
\label{\detokenize{Stdlib/StandardisingStdLib2:standardising-standard-library}}\label{\detokenize{Stdlib/StandardisingStdLib2::doc}}

\subsection{Plantuml Stdlib Terminology}
\label{\detokenize{Stdlib/StandardisingStdLib2:plantuml-stdlib-terminology}}

\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Plantuml Stdlib Terminology}\label{\detokenize{Stdlib/StandardisingStdLib2:id1}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{10}{60}|\X{50}{60}|}
\hline
\sphinxstyletheadfamily 
Term
&\sphinxstyletheadfamily 
Meaning
\\
\hline
\sphinxstylestrong{PlantUML Stdlib}
&
Plantuml Standard Library
\begin{quote}

i.e. \sphinxurl{https://github.com/plantuml/plantuml-stdlib}
\end{quote}
\\
\hline
\sphinxstylestrong{Library}
&
Plantuml stdlib consists of several icon  \sphinxstylestrong{libraries}
\begin{quote}

e.g. awslib, elastic, azure…
\end{quote}
\\
\hline
\sphinxstylestrong{Category}
&
Each icon libary consists one or more icons \sphinxstylestrong{categories}
\begin{quote}

Category is a subdir / grouping of icons within an icon library

some libraries don’t sub-divide the icons - so the category is the library
\end{quote}
\\
\hline
\sphinxstylestrong{Icon}
&
Each category consists one or more \sphinxstylestrong{icons}
\begin{quote}

An Icon is a decorated sprite e.g. a coloured sprite in a rectangle with all the text and colour
\end{quote}
\\
\hline
\sphinxstylestrong{Macro}
&
The pre-processor code applied to a sprite
\begin{quote}

i.e. the define/definelong or function/procedure associated with a sprite to make it an icon

The call from the user puml file is a macro.
\end{quote}
\\
\hline
\sphinxstylestrong{Sprite}
&
A 2D bitmap
\\
\hline
\sphinxstylestrong{Diagram}
&
Everything you see. Everything represented by the puml file
\\
\hline
\sphinxstylestrong{Style}
&
A collection of attributes that specify the appearance for a \sphinxstylestrong{single icon}.
\begin{quote}
\begin{quote}

A style can specify attributes such as font color, font size, background color, and much more.

Optional.
\end{quote}

If present, a style takes precedence over a theme
\end{quote}
\\
\hline
\sphinxstylestrong{Theme}
&
A type of style that’s \sphinxstylestrong{applied to the entire diagram} - not just an individual icon.
\begin{quote}

A collection of coordinated styles that determine the color, background attributes, and the fonts used on a layout.

Themes also enhance the appearance of a layout and give all your layouts a consistent look.

A theme does not control the placement or behavior of fields or objects on a layout.
\end{quote}
\\
\hline
\sphinxstylestrong{Layout}
&
An arrangement of fields, objects, pictures, and layout parts that represents the way information is organized and presented.
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

\sphinxstylestrong{Do we need individual sprite files? e.g. awslib/ARVR/Sumerian.puml and associated png (or svg), as all info is in puml file}


\subsection{Plantuml Stdlib File Layout}
\label{\detokenize{Stdlib/StandardisingStdLib2:plantuml-stdlib-file-layout}}
\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{stdlibFileLayout}.png}
\end{figure}


\subsection{Standardising Sprites}
\label{\detokenize{Stdlib/StandardisingStdLib2:standardising-sprites}}

\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Sprite Property}\label{\detokenize{Stdlib/StandardisingStdLib2:id2}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{10}{60}|\X{50}{60}|}
\hline
\sphinxstyletheadfamily 
Property
&\sphinxstyletheadfamily 
Value
\\
\hline
\sphinxstylestrong{XxY}
&
128x128
\begin{quote}

Sprite resolution SHOULD be this value or close to it.

Current sprite libraries range from \textasciitilde{}40 to 256.
\end{quote}
\\
\hline
\sphinxstylestrong{Levels}
&
16
\begin{quote}

Sprite resolution SHOULD be this value.

4, 8, 16 are the possible options.
\end{quote}
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}

\begin{sphinxadmonition}{note}{Note:}
ref: \sphinxurl{https://tools.ietf.org/html/rfc2119} for SHOULD, MUST, MAY meaning
\end{sphinxadmonition}


\subsection{Standardising Icon Macro API}
\label{\detokenize{Stdlib/StandardisingStdLib2:standardising-icon-macro-api}}

\begin{savenotes}\sphinxattablestart
\centering
\sphinxcapstartof{table}
\sphinxthecaptionisattop
\sphinxcaption{Plantuml Stdlib Macro API Modes}\label{\detokenize{Stdlib/StandardisingStdLib2:id3}}
\sphinxaftertopcaption
\begin{tabular}[t]{|\X{10}{60}|\X{50}{60}|}
\hline
\sphinxstyletheadfamily 
Mode
&\sphinxstyletheadfamily 
Details
\\
\hline
\sphinxstylestrong{Standard}
&
Keyword arguments \sphinxstylestrong{SHOULD} be used for all parameters per todo ref
\begin{quote}

This gives future proofing: as new parameters are added over time,
\begin{quote}

user specifies only the parameter they care about

for the parameter they care about, only named keyword arguments are used
\end{quote}
\end{quote}
\\
\hline
\sphinxstylestrong{Legacy}
&
To work with a subset of \sphinxstyleemphasis{existing user diagrams}, new macros will enforce the parameter ordering per Type 2
\begin{quote}

e.g. \sphinxstyleemphasis{!define AzureBatchAI(e\_alias, e\_label, e\_techn, e\_descr) AzureEntity(e\_alias, e\_label, e\_techn, e\_descr, AZURE\_SYMBOL\_COLOR, AzureBatchAI, AzureBatchAI)}

\sphinxstylestrong{Existing macros in existing libraries should be kept, even when a newer keywords arguments mode is added}
This ensures backwards compatiblity of PlantUML Stdlib with existing user diagrams.
\end{quote}
\\
\hline
\sphinxstylestrong{Mixed}
&
This mix of ordered parameters, with keyword parameters is also possible.
\begin{quote}

This is not as future proof as Standard mode.
\end{quote}
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}


\subsection{Mode Example}
\label{\detokenize{Stdlib/StandardisingStdLib2:mode-example}}
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
\PYG{c+c1}{\PYGZsh{}Legacy}
\PYG{c+c1}{\PYGZsh{}ordering does matter}
\PYG{n}{ExistingMacro}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{alias}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{label}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{techn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{descr}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}Standard}
\PYG{c+c1}{\PYGZsh{}keyword arguments for all parameters}
\PYG{c+c1}{\PYGZsh{}ordering does NOT matter}
\PYG{n}{NewMacro}\PYG{p}{(}\PYG{n}{alias}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{myalias}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{label}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mylabel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{techn}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mytechn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{descr}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mydescr}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam1}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{whatever}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam2}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{)}
\PYG{n}{NewMacro}\PYG{p}{(}\PYG{n}{techn}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mytechn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{alias}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{myalias}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{descr}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mydescr}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam1}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{whatever}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{label}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mylabel}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam2}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}Mixed}
\PYG{c+c1}{\PYGZsh{}if we don\PYGZsq{}t use keyword arguments then same as ExistingMacro}
\PYG{c+c1}{\PYGZsh{}ordering does matter}
\PYG{n}{NewMacro}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{alias}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{label}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{techn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{descr}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{c+c1}{\PYGZsh{}ordering does matter for existing parameters only}
\PYG{n}{NewMacro}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{alias}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{label}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{techn}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{descr}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam1}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{whatever}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{newParam2}\PYG{o}{=}\PYG{l+m+mi}{3}\PYG{p}{)}
\end{sphinxVerbatim}


\subsection{Mode Demo}
\label{\detokenize{Stdlib/StandardisingStdLib2:mode-demo}}

\subsubsection{Main features}
\label{\detokenize{Stdlib/StandardisingStdLib2:main-features}}
The demo uses most of the avaialable Preprocessor features (\sphinxurl{https://plantuml.com/preprocessing})
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
User specifies only the parameters they care about. Preprocessor “Keywords arguments” used.

\item {} 
If user does not specify the parameter, then the default value is used. Preprocessor “Default argument value” used.

\item {} 
\sphinxcode{\sphinxupquote{{}`rectangle \$alias \textless{}\textless{}\$alias\textgreater{}\textgreater{}{}`}} is in form \sphinxcode{\sphinxupquote{{}`shape alias \textless{}\textless{}stereo\textgreater{}\textgreater{}{}`}} where skinparam can be specified for a stereo per \sphinxurl{https://plantuml.com/skinparam} last example

\item {} 
Dynamic invocation to somewhat decouple the sprite, parameters, and layout. \sphinxstylestrong{Not as decoupled as I’d like} as still need to pass all params for each sprite at definition time.

\item {} 
\sphinxurl{https://plantuml.com/preprocessing} Conditions to show
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
technology “{[} {]}” only if technology specified.

\item {} 
focus hi/lo/normal based on parameter which changes skinparams for the stereo (where alias is used as stereo)

\end{enumerate}

\item {} 
‘””== \$labeln”: “==” is creole syntax for “Large heading” (\sphinxurl{https://plantuml.com/creole})

\item {} 
icon fields are laid out line-by-line for clarity

\item {} 
parameters supported are
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumii}{enumiii}{}{.}%
\item {} 
\$MySprite,

\item {} 
\$alias,

\item {} 
\$description=””,

\item {} 
\$label=””,

\item {} 
\$technology=””,

\item {} 
\$scale=1,

\item {} 
\$colour=”blue”,

\item {} 
\$shape=”cloud”,

\item {} 
\$textsize=”18”,

\item {} 
\$focus=””

\end{enumerate}

\end{enumerate}

In the full demo, the sprite decorator is selected by user via e.g. ‘!includeurl AWSPuml/SpriteDecorators.iuml!SPRITEDECORATOR\_3.
This uses the “File List.iuml” block include Preprocessor feature

\begin{figure}[htbp]
\centering
\capstart

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-abb2c3c8c4b2f353058eabbc9c7f5eab7a37db6f}.png}\hspace*{\fill}}
\caption{\sphinxstyleemphasis{\textless{}API proposal demo\textgreater{}}}\label{\detokenize{Stdlib/StandardisingStdLib2:id4}}\end{figure}

Full code applied to PlantUML Stdlib is in
\sphinxurl{https://github.com/Crashedmind/plantuml-stdlib2.0/commit/2a9b1f2621bc81c1f0dd0ec366c028fe60032dc0}

Below is a standalone file version of it.

\fvset{hllines={, 40, 92, 113, 114, 115, 116, 117, 118, 136,}}%
\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
\PYGZsq{}all sprites in a category would be included in an all.puml file for that category
\PYGZsq{}==================================================================================================


\PYGZsq{} Styling
\PYGZsq{} \PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}\PYGZsh{}

!define TECHN\PYGZus{}FONT\PYGZus{}SIZE 12

skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle \PYGZob{}
    StereotypeFontSize 12
\PYGZcb{}


skinparam rectangle \PYGZob{}
backgroundColor white
\PYGZcb{}
skinparam cloud \PYGZob{}
backgroundColor white
\PYGZcb{}


!define LAYOUT\PYGZus{}TOP\PYGZus{}DOWN top to bottom direction
!define LAYOUT\PYGZus{}LEFT\PYGZus{}RIGHT left to right direction



sprite \PYGZdl{}Analytics [64x64/16z] \PYGZob{}
xTK5WiGW38NXbn1WGkv\PYGZus{}tjMwDwml\PYGZus{}\PYGZus{}YqNrtmNRK8tISXfBj5W4UVhDpBTExBtVweRxvv5TfCz9eNnCqWrpo9bOrCwAelc\PYGZus{}bzJYdNU0QWvlTAe0glJ14\PYGZhy{}tt7L
w5d\PYGZus{}h6yBJ\PYGZhy{}hR\PYGZus{}W9wMCSTNf0OiUFtVCUj23f\PYGZhy{}smjojmbSNiR\PYGZus{}7BwRkz\PYGZhy{}dN7l\PYGZhy{}k7pz\PYGZhy{}IyXWC9cX13ap3CuxCRWCwyGsqsWPxvaIDn9a2zilqYxnJzv\PYGZus{}sg\PYGZhy{}UQlp
KU\PYGZus{}sc7b77\PYGZhy{}V1mHEFioLN\PYGZhy{}0iz0m
\PYGZcb{}

!unquoted procedure \PYGZdl{}ANALYTICS (\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}693CC5\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}rectangle\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}12\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}\PYGZdq{})
\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}SpriteDecorator, \PYGZdq{}\PYGZdl{}Analytics\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour, \PYGZdl{}shape, \PYGZdl{}textsize, \PYGZdl{}focus)
!endprocedure


sprite \PYGZdl{}AppSync [64x64/16z] \PYGZob{}
xPRdrkCW34IlGAYmx\PYGZus{}\PYGZhy{}yMr89PwtZBxzzquF6rWoupFznSN6HuVONZ\PYGZus{}n6x5ru8DtpX\PYGZhy{}eX85tjBze5PEGyZmcevxiNXJY\PYGZus{}SmNTTXT\PYGZhy{}NjveHVK9US\PYGZus{}vFGsTXqJa
h55w8GVfmuie7SbLCCPQRDp9G\PYGZus{}F26jq066jpYBiU6pJMiK3CX5YpOSm2uRFTSNzxaBH4idBVvwuVs3ByIx4gVD\PYGZus{}IqB6iN1URGQ\PYGZus{}Qpsrxi2QIVuVbs43Izjcu
vxVIYMFxEbVqvdzhU6m1R7ajn3rhmOkY5VlSTBl\PYGZus{}z4zNVbPlJrt7JkhVGp5KY9SF7R4LrVaPG7iR0MpBhvg\PYGZus{}5CmRbZUCvWQvp5\PYGZhy{}nVZBotaZmmfUbAMIvVXsz
Br97sWt1vkntVRr\PYGZhy{}dNxtr\PYGZhy{}W3\PYGZus{}9aVsf\PYGZus{}7dMBryNlp5mtUXGQqk\PYGZhy{}lakFt8QNIHMvtxgsxzDHZ5kQifeFEOe3Zwj06K\PYGZus{}bevEjErIPmukHTa9PUStwD8VA\PYGZhy{}EHZil
zwqq1p\PYGZhy{}vh2RqxVv1R9udJO2czfTHtB\PYGZhy{}KKxdSFzbNkTVtRnSN5ty
\PYGZcb{}

!unquoted procedure \PYGZdl{}APPSYNC (\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}CC2264\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}rectangle\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}12\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}\PYGZdq{})

\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}SpriteDecorator, \PYGZdq{}\PYGZdl{}AppSync\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour, \PYGZdl{}shape, \PYGZdl{}textsize, \PYGZdl{}focus)

!endprocedure

sprite \PYGZdl{}ApplicationIntegration [64x64/16z] \PYGZob{}
xTO5GiOm30NWbwIIXFlVbxL8AROrmzdxPVfDQ\PYGZus{}YkNA67AK7AQZB0mvSRNupDtdikVtahxyHslH5eAkBJ4jcUBr0RSH6t4KNPzMG\PYGZhy{}qloJ6Erx36zLUVPOyPK0
nBr2L2M5VQ8\PYGZhy{}5\PYGZus{}ViST\PYGZus{}dgdkjOMyC4KYRrPoAhNgtp4pDLu31jkP7\PYGZhy{}J7Qh295lQBsrt7Caxyu\PYGZus{}wDtslUG5dLBRKea8kZNZpPtm3CBi7d6WvUqUMavUFsK\PYGZhy{}bEt
kVuTl7vxzDfyfFoaVlsqpGddL9UzSTlOdBIjQTMxbPIrB\PYGZhy{}QsggxwEPI\PYGZhy{}pPTidazSlm24x77FEQj7VQJyKDp7\PYGZhy{}wzu\PYGZus{}tc\PYGZhy{}\PYGZus{}xx6FvVFjXgTV20Vvy4I2O\PYGZus{}JKYZu
2xa5
\PYGZcb{}

!unquoted procedure \PYGZdl{}APPLICATIONINTEGRATION (\PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}CC2264\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}rectangle\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}12\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}\PYGZdq{})

\PYGZpc{}invoke\PYGZus{}procedure(\PYGZdl{}SpriteDecorator, \PYGZdq{}\PYGZdl{}ApplicationIntegration\PYGZdq{}, \PYGZdl{}alias, \PYGZdl{}description, \PYGZdl{}label, \PYGZdl{}technology, \PYGZdl{}scale, \PYGZdl{}colour, \PYGZdl{}shape, \PYGZdl{}textsize, \PYGZdl{}focus)

!endprocedure




\PYGZsq{}=============================DECORATORS==================================
\PYGZsq{} We define 1 or more sprite decorators in stdlib
\PYGZsq{} Define our decorators that we know now \PYGZhy{} and can easily define new ones in future with as manty new parameters 
\PYGZsq{} as we want, that we don\PYGZsq{}t even know about yet
\PYGZsq{} Let\PYGZsq{}s say SpriteDecorator is defined month 1, SpriteDecorator2 is defined month 2, SpriteDecorator3 is defined month 3
\PYGZsq{}
\PYGZsq{} https://plantuml.com/preprocessing Conditions to show technology \PYGZdq{}[ ]\PYGZdq{} only if technology specified
\PYGZsq{}\PYGZdq{}\PYGZdq{}== \PYGZdl{}label\PYGZbs{}n\PYGZdq{}: \PYGZdq{}==\PYGZdq{} is creole syntax for \PYGZdq{}Large heading\PYGZdq{} https://plantuml.com/creole
\PYGZsq{} rectangle \PYGZdl{}alias \PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} is in form \PYGZdq{}shape alias \PYGZlt{}\PYGZlt{}stereo\PYGZgt{}\PYGZgt{}\PYGZdq{} where skinparam can be specified for a stereo per https://plantuml.com/skinparam last example
\PYGZsq{} https://plantuml.com/preprocessing Conditions to show technology \PYGZdq{}[ ]\PYGZdq{} only if technology specified
\PYGZsq{} https://plantuml\PYGZhy{}documentation.readthedocs.io/en/latest/formatting/all\PYGZhy{}skin\PYGZhy{}params.html for all skinparams
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}



\PYGZsq{}add a new shape parameter + a textsize parameter
\PYGZsq{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}\PYGZhy{}
!unquoted procedure \PYGZdl{}SpriteDecorator(\PYGZdl{}MySprite, \PYGZdl{}alias, \PYGZdl{}description=\PYGZdq{}\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}\PYGZdq{}, \PYGZdl{}scale=1, \PYGZdl{}colour=\PYGZdq{}blue\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{}, \PYGZdl{}textsize=\PYGZdq{}18\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}\PYGZdq{} )

!if (\PYGZdl{}focus == \PYGZdq{}hi\PYGZdq{})
    skinparam rectangle \PYGZob{}
        backgroundColor\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} yellow
        borderColor\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} yellow
        shadowing\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} true
        BorderThickness\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} 20
    \PYGZcb{}
!endif

!if  (\PYGZdl{}focus == \PYGZdq{}lo\PYGZdq{})
    skinparam rectangle \PYGZob{}
        backgroundColor\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} gainsboro
        borderColor\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} gainsboro
        shadowing\PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} false
        
    \PYGZcb{}
!endif


!if (\PYGZdl{}technology == \PYGZdq{}\PYGZdq{})
    \PYGZdl{}shape \PYGZdl{}alias \PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} as \PYGZdq{}
    == \PYGZdl{}label\PYGZbs{}n
    \PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}

    \PYGZdl{}description \PYGZdq{}
!else 
    \PYGZdl{}shape \PYGZdl{}alias \PYGZlt{}\PYGZlt{}\PYGZdl{}alias\PYGZgt{}\PYGZgt{} as \PYGZdq{}
    == \PYGZdl{}label\PYGZbs{}n
    \PYGZlt{}color:\PYGZdl{}colour\PYGZgt{}\PYGZlt{}\PYGZdl{}MySprite*\PYGZdl{}scale\PYGZgt{}\PYGZlt{}/color\PYGZgt{}
    //\PYGZlt{}size:\PYGZdl{}textsize\PYGZgt{}[\PYGZdl{}technology]\PYGZlt{}/size\PYGZgt{}//

    \PYGZdl{}description \PYGZdq{}
!endif

!endprocedure


!\PYGZdl{}SpriteDecorator = \PYGZdq{}\PYGZdl{}Sprite\PYGZdq{}+ \PYGZdq{}Decorator\PYGZdq{}
\PYGZsq{}=============================END DECORATORS==================================

LAYOUT\PYGZus{}LEFT\PYGZus{}RIGHT

\PYGZsq{} User can specify what they want in order (legacy mode), or via named arugments (standard mode)
package modes \PYGZob{}
\PYGZsq{}legacy mode
\PYGZdl{}ANALYTICS(\PYGZdq{}legacy1\PYGZdq{}, \PYGZdq{}description\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}technology\PYGZdq{}, 1)
\PYGZdl{}ANALYTICS(\PYGZdq{}legacy2\PYGZdq{}, \PYGZdq{}desc\PYGZdq{}, \PYGZdq{}label\PYGZdq{}, \PYGZdq{}tech\PYGZdq{}, 2, \PYGZdq{}brown\PYGZdq{})

\PYGZsq{}mixed mode
\PYGZdl{}ANALYTICS(\PYGZdq{}mixed\PYGZdq{}, \PYGZdl{}shape=\PYGZdq{}cloud\PYGZdq{})
\PYGZsq{}standard mode
\PYGZdl{}APPSYNC(\PYGZdl{}alias=\PYGZdq{}standard\PYGZdq{}, \PYGZdl{}description=\PYGZdq{}description\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}label\PYGZdq{})
\PYGZcb{}

package scale \PYGZob{}
\PYGZdl{}ANALYTICS(\PYGZdl{}alias=\PYGZdq{}x0.5\PYGZdq{}, \PYGZdl{}scale=\PYGZdq{}0.5\PYGZdq{})
\PYGZdl{}ANALYTICS(\PYGZdl{}alias=\PYGZdq{}x1\PYGZdq{} )
\PYGZdl{}ANALYTICS(\PYGZdl{}alias=\PYGZdq{}x1.5\PYGZdq{}, \PYGZdl{}scale=\PYGZdq{}1.5\PYGZdq{})
\PYGZsq{}NOTE: if we use 1.5 instead of \PYGZdq{}1.5\PYGZdq{} then it\PYGZsq{}s interpreted as .5 i.e. wrong

x0.5 \PYGZhy{}\PYGZhy{}\PYGZgt{}x1
x1\PYGZhy{}\PYGZhy{}\PYGZgt{} x1.5
\PYGZcb{}

\PYGZsq{}standard mode
package focus \PYGZob{}
\PYGZdl{}APPSYNC(\PYGZdl{}alias=\PYGZdq{}lofocus\PYGZdq{}, \PYGZdl{}description=\PYGZdq{}description\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}lo focus\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}technology\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}lo\PYGZdq{})
\PYGZdl{}APPSYNC(\PYGZdl{}alias=\PYGZdq{}normal\PYGZdq{}, \PYGZdl{}description=\PYGZdq{}description\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}normal\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}technology\PYGZdq{})
\PYGZdl{}APPSYNC(\PYGZdl{}alias=\PYGZdq{}hifocus\PYGZdq{}, \PYGZdl{}description=\PYGZdq{}description\PYGZdq{}, \PYGZdl{}label=\PYGZdq{}hi focus\PYGZdq{}, \PYGZdl{}technology=\PYGZdq{}technology\PYGZdq{}, \PYGZdl{}focus=\PYGZdq{}hi\PYGZdq{})

lofocus \PYGZhy{}\PYGZhy{}\PYGZgt{}normal
normal\PYGZhy{}\PYGZhy{}\PYGZgt{} hifocus
\PYGZcb{}



footer \PYGZpc{}filename() rendered with PlantUML version \PYGZpc{}version()\PYGZbs{}nThe Hitchhiker’s Guide to PlantUML

@enduml
\end{sphinxVerbatim}
\sphinxresetverbatimhllines


\section{C4 Lightweight Software Architecture Description Method}
\label{\detokenize{C4/c4:c4-lightweight-software-architecture-description-method}}\label{\detokenize{C4/c4:c4-label}}\label{\detokenize{C4/c4::doc}}

\subsection{Introduction}
\label{\detokenize{C4/c4:introduction}}
The \sphinxhref{https://c4model.com/}{C4 Model} is a lightweight software
architecture description method. It consists of a set of 4 diagrams that
describe the \sphinxstylestrong{static} structure of a software system.

Overall, it strives for clarity and communication of the story, and
follows \sphinxhref{http://www.ifp.illinois.edu/nabhcs/abstracts/shneiderman.html}{Shneiderman’s
mantra}:
\begin{quote}

\sphinxstyleemphasis{Overview first, zoom and filter, then details-on-demand}
\end{quote}

It is not formal UML e.g. the UML actor stickman is deliberately not
used as it causes confusion between a person or a system.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics{{c4}.png}
\caption{The 4 C’s}\label{\detokenize{C4/c4:id1}}\end{figure}


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabular}[t]{|\X{15}{45}|\X{30}{45}|}
\hline
\sphinxstyletheadfamily 
The \sphinxstylestrong{4C’s}
&\sphinxstyletheadfamily \\
\hline
\sphinxstylestrong{Context}
&
A high-level diagram that sets the scene; including key system dependencies and people (actors/roles/personas/etc). \sphinxhref{https://en.wikipedia.org/wiki/System\_context\_diagram}{Context diagrams} are standard in software engineering (even if not used often).
\\
\hline
\sphinxstylestrong{Container}
&
A container diagram shows the high-level technology choices, how responsibilities are distributed across them and how the containers communicate.
\\
\hline
\sphinxstylestrong{Component}
&
For each container, a component diagram lets you see the key logical components and their relationships. 4.
\\
\hline
\sphinxstylestrong{Classes (or Code)}
&
This is optional and is the lowest level of detail.
\\
\hline
\end{tabular}
\par
\sphinxattableend\end{savenotes}


\subsection{CheatSheet}
\label{\detokenize{C4/c4:cheatsheet}}
The
\sphinxhref{http://www.codingthearchitecture.com/2017/04/27/visualising\_and\_documenting\_software\_architecture\_cheat\_sheets.html}{CheatSheet}
gives a good summary of the C4 model and diagrams.


\subsection{Video Presentation}
\label{\detokenize{C4/c4:video-presentation}}
See \sphinxhref{https://www.youtube.com/watch?v=Ym9nhVZs89o}{youtube video from NDC2017
conference} by Simon
Brown on C4 for visualisation.


\subsection{Related Methods}
\label{\detokenize{C4/c4:related-methods}}
There are a number of related models and templates:


\subsubsection{4+1 model}
\label{\detokenize{C4/c4:model}}
C4 is inpsired by \sphinxhref{https://en.wikipedia.org/wiki/4\%2B1\_architectural\_view\_model}{the 4+1 model for software
architecture}


\subsubsection{ARC42}
\label{\detokenize{C4/c4:arc42}}
C4 can be combined with arc42 documentation template. The diagrams map
as follows:


\begin{savenotes}\sphinxattablestart
\centering
\begin{tabulary}{\linewidth}[t]{|T|T|}
\hline
\sphinxstyletheadfamily 
Arc42
&\sphinxstyletheadfamily 
C4
\\
\hline
Context and Scope
&
System Context diagram
\\
\hline
Building Block View (level 1)
&
Container diagram
\\
\hline
Building Block View (level 2)
&
Component diagram
\\
\hline
Building Block View (level 3)
&
Class diagram
\\
\hline
\end{tabulary}
\par
\sphinxattableend\end{savenotes}


\subsubsection{Data-flow diagrams}
\label{\detokenize{C4/c4:data-flow-diagrams}}
\sphinxhref{https://en.wikipedia.org/wiki/Data-flow\_diagram}{Data-flow diagrams
(DFD)} (to desribe
data \sphinxstylestrong{activity}) use a similar hierachical approach starting with the
contextual DFD0. They use a multi-level numbering scheme - DFD0: 1 -
DFD1: 1.1., 1.2, - DFD2: 1.1.1, 1.1.2,


\subsubsection{Books}
\label{\detokenize{C4/c4:books}}
These books, written by {[}@simonbrown{]}(\sphinxurl{https://twitter.com/simonbrown}),
are available to buy from
\sphinxurl{https://leanpub.com/visualising-software-architecture}.

\sphinxincludegraphics{{swarchv1}.png}  \sphinxincludegraphics{{swarchv2}.png}


\section{Using PlantUML Stdlib C4 Lightweight Software Architecture Description Method}
\label{\detokenize{C4/C4Stdlib:using-plantuml-stdlib-c4-lightweight-software-architecture-description-method}}\label{\detokenize{C4/C4Stdlib:c4plantuml-label}}\label{\detokenize{C4/C4Stdlib::doc}}

\subsection{C4}
\label{\detokenize{C4/C4Stdlib:c4}}
\begin{sphinxadmonition}{tip}{Tip:}
This section details PlantUML stdlib support for C4.

See {\hyperref[\detokenize{C4/c4:c4-label}]{\sphinxcrossref{\DUrole{std,std-ref}{C4 Lightweight Software Architecture Description Method}}}} for details of C4.
\end{sphinxadmonition}
\begin{quote}

\sphinxstyleemphasis{Big design up front is dumb, but doing no design up front is even
dumber.} Dave Thomas
\end{quote}

The \sphinxhref{https://c4model.com/}{C4 Model} is a lightweight software
architecture description method. It consists of a set of 4 diagrams that
describe the \sphinxstylestrong{static} structure of a software system.

Overall, it strives for clarity and communication of the story, and
follows \sphinxhref{http://www.ifp.illinois.edu/nabhcs/abstracts/shneiderman.html}{Shneiderman’s
mantra}:
\begin{quote}

\sphinxstyleemphasis{Overview first, zoom and filter, then details-on-demand}
\end{quote}

It is not formal UML e.g. the UML actor stickman is deliberately not
used as it causes confusion between a person or a system.


\subsection{C4 PlantUML}
\label{\detokenize{C4/C4Stdlib:c4-plantuml}}
\sphinxhref{https://github.com/RicardoNiepel/C4-PlantUML}{C4-PlantUML} is included in PlantUML Stdlib. It combines
the benefits of \sphinxhref{http://plantuml.com/}{PlantUML} and the {\hyperref[\detokenize{C4/c4:c4-label}]{\sphinxcrossref{\DUrole{std,std-ref}{C4 Lightweight Software Architecture Description Method}}}} model for providing a simple way of describing
and communicating software architectures - especially during up-front design sessions - with an intuitive language using open source and platform independent tools.

It also supports \sphinxhref{https://github.com/RicardoNiepel/C4-PlantUML\#snippets-for-visual-studio-code}{C4 PlantUML Snippets for Visual Studio Code}
\begin{quote}

\sphinxurl{https://github.com/plantuml/plantuml-stdlib/tree/master/C4}
\end{quote}


\subsection{C4 Example Big Bank}
\label{\detokenize{C4/C4Stdlib:c4-example-big-bank}}
\begin{sphinxadmonition}{note}{Note:}
The examples from \sphinxhref{https://github.com/RicardoNiepel/C4-PlantUML}{C4-PlantUML} are used.

Person sprites are added to the customer box to emphasize the user in the diagrams.
\end{sphinxadmonition}


\subsubsection{Context}
\label{\detokenize{C4/C4Stdlib:context}}
\begin{sphinxadmonition}{note}{Note:}
The top-level diagram shows the big boxes in the system i.e. the overall context in which a system operates.

The grey boxes are external i.e. not part of the system we’re defining.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-50c48432ca0487f37dda95df478551cfe27ef2ec}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}c4/C4\PYGZus{}Context.puml\PYGZgt{}  

\PYGZsq{}ref http://plantuml.com/stdlib
!include \PYGZlt{}office/Users/user.puml\PYGZgt{}
!include \PYGZlt{}office/Users/mobile\PYGZus{}user.puml\PYGZgt{}

\PYGZsq{}LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND

title System Context diagram for Internet Banking System

Person(customer  , Customer , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZlt{}\PYGZdl{}mobile\PYGZus{}user\PYGZgt{}\PYGZbs{}n A customer of the bank, with personal bank accounts\PYGZdq{} )

System(banking\PYGZus{}system, \PYGZdq{}Internet Banking System\PYGZdq{}, \PYGZdq{}Allows customers to view information about their bank accounts, and make payments.\PYGZdq{})

System\PYGZus{}Ext(mail\PYGZus{}system, \PYGZdq{}E\PYGZhy{}mail system\PYGZdq{}, \PYGZdq{}The internal Microsoft Exchange e\PYGZhy{}mail system.\PYGZdq{})
System\PYGZus{}Ext(mainframe, \PYGZdq{}Mainframe Banking System\PYGZdq{}, \PYGZdq{}Stores all of the core banking information about customers, accounts, transactions, etc.\PYGZdq{})

Rel(customer, banking\PYGZus{}system, \PYGZdq{}Uses\PYGZdq{})
Rel\PYGZus{}Back(customer, mail\PYGZus{}system, \PYGZdq{}Sends e\PYGZhy{}mails to\PYGZdq{})
Rel\PYGZus{}Neighbor(banking\PYGZus{}system, mail\PYGZus{}system, \PYGZdq{}Sends e\PYGZhy{}mails\PYGZdq{}, \PYGZdq{}SMTP\PYGZdq{})
Rel(banking\PYGZus{}system, mainframe, \PYGZdq{}Uses\PYGZdq{})
@enduml
\end{sphinxVerbatim}


\subsubsection{Context With More detail}
\label{\detokenize{C4/C4Stdlib:context-with-more-detail}}
\begin{sphinxadmonition}{note}{Note:}
More detail is then added.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-3fefedb88f3289913cd9dfaa5bf2b04d52c8ac89}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
!include \PYGZlt{}c4/C4\PYGZus{}Context.puml\PYGZgt{}  

\PYGZsq{}ref http://plantuml.com/stdlib
!include \PYGZlt{}office/Users/user.puml\PYGZgt{}
!include \PYGZlt{}office/Users/mobile\PYGZus{}user.puml\PYGZgt{}

\PYGZsq{}LAYOUT\PYGZus{}TOP\PYGZus{}DOWN
\PYGZsq{}LAYOUT\PYGZus{}AS\PYGZus{}SKETCH()
LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND()

title System Landscape diagram for Big Bank plc

Person(customer  , Customer , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZlt{}\PYGZdl{}mobile\PYGZus{}user\PYGZgt{}\PYGZbs{}n A customer of the bank, with personal bank accounts\PYGZdq{} )

Enterprise\PYGZus{}Boundary(c0, \PYGZdq{}Big Bank plc\PYGZdq{}) \PYGZob{}
    System(banking\PYGZus{}system, \PYGZdq{}Internet Banking System\PYGZdq{}, \PYGZdq{}Allows customers to view information about their bank accounts, and make payments.\PYGZdq{})

    System\PYGZus{}Ext(atm, \PYGZdq{}ATM\PYGZdq{}, \PYGZdq{}Allows customers to withdraw cash.\PYGZdq{})
    System\PYGZus{}Ext(mail\PYGZus{}system, \PYGZdq{}E\PYGZhy{}mail system\PYGZdq{}, \PYGZdq{}The internal Microsoft Exchange e\PYGZhy{}mail system.\PYGZdq{})

    System\PYGZus{}Ext(mainframe, \PYGZdq{}Mainframe Banking System\PYGZdq{}, \PYGZdq{}Stores all of the core banking information about customers, accounts, transactions, etc.\PYGZdq{})

    Person\PYGZus{}Ext(customer\PYGZus{}service, \PYGZdq{}Customer Service Staff\PYGZdq{}, \PYGZdq{}Customer service staff within the bank.\PYGZdq{})
    Person\PYGZus{}Ext(back\PYGZus{}office, \PYGZdq{}Back Office Staff\PYGZdq{}, \PYGZdq{}Administration and support staff within the bank.\PYGZdq{})
\PYGZcb{}

Rel\PYGZus{}Neighbor(customer, banking\PYGZus{}system, \PYGZdq{}Uses\PYGZdq{})
Rel\PYGZus{}R(customer, atm, \PYGZdq{}Withdraws cash using\PYGZdq{})
Rel\PYGZus{}Back(customer, mail\PYGZus{}system, \PYGZdq{}Sends e\PYGZhy{}mails to\PYGZdq{})

Rel\PYGZus{}R(customer, customer\PYGZus{}service, \PYGZdq{}Asks questions to\PYGZdq{}, \PYGZdq{}Telephone\PYGZdq{})

Rel\PYGZus{}D(banking\PYGZus{}system, mail\PYGZus{}system, \PYGZdq{}Sends e\PYGZhy{}mail using\PYGZdq{})
Rel\PYGZus{}R(atm, mainframe, \PYGZdq{}Uses\PYGZdq{})
Rel\PYGZus{}R(banking\PYGZus{}system, mainframe, \PYGZdq{}Uses\PYGZdq{})
Rel\PYGZus{}D(customer\PYGZus{}service, mainframe, \PYGZdq{}Uses\PYGZdq{})
Rel\PYGZus{}U(back\PYGZus{}office, mainframe, \PYGZdq{}Uses\PYGZdq{})

Lay\PYGZus{}D(atm, banking\PYGZus{}system)

Lay\PYGZus{}D(atm, customer)
Lay\PYGZus{}U(mail\PYGZus{}system, customer)
@enduml
\end{sphinxVerbatim}


\subsubsection{Container}
\label{\detokenize{C4/C4Stdlib:container}}
\begin{sphinxadmonition}{note}{Note:}
We then drill down into the “Internet Banking” box.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-6c5ab14609c0d2c62a602d34fb4d1156ee8ddac5}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml
\PYGZsq{}!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4\PYGZhy{}PlantUML/master/C4\PYGZus{}Container.puml
!include \PYGZlt{}c4/C4\PYGZus{}Container.puml\PYGZgt{}  

\PYGZsq{}ref http://plantuml.com/stdlib
!include \PYGZlt{}office/Users/user.puml\PYGZgt{}
!include \PYGZlt{}office/Users/mobile\PYGZus{}user.puml\PYGZgt{}

LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND()


title Container diagram for Internet Banking System

Person(customer  , Customer , \PYGZdq{}\PYGZlt{}\PYGZdl{}user\PYGZgt{} \PYGZlt{}\PYGZdl{}mobile\PYGZus{}user\PYGZgt{}\PYGZbs{}n A customer of the bank, with personal bank accounts\PYGZdq{} )

System\PYGZus{}Boundary(c1, \PYGZdq{}Internet Banking\PYGZdq{}) \PYGZob{}
    Container(web\PYGZus{}app, \PYGZdq{}Web Application\PYGZdq{}, \PYGZdq{}Java, Spring MVC\PYGZdq{}, \PYGZdq{}Delivers the static content and the Internet banking SPA\PYGZdq{})
    Container(spa, \PYGZdq{}Single\PYGZhy{}Page App\PYGZdq{}, \PYGZdq{}JavaScript, Angular\PYGZdq{}, \PYGZdq{}Provides all the Internet banking functionality to cutomers via their web browser\PYGZdq{})
    Container(mobile\PYGZus{}app, \PYGZdq{}Mobile App\PYGZdq{}, \PYGZdq{}C\PYGZsh{}, Xamarin\PYGZdq{}, \PYGZdq{}Provides a limited subset of the Internet banking functionality to customers via their mobile device\PYGZdq{})
    ContainerDb(database, \PYGZdq{}Database\PYGZdq{}, \PYGZdq{}SQL Database\PYGZdq{}, \PYGZdq{}Stores user registraion information, hased auth credentials, access logs, etc.\PYGZdq{})
    Container(backend\PYGZus{}api, \PYGZdq{}API Application\PYGZdq{}, \PYGZdq{}Java, Docker Container\PYGZdq{}, \PYGZdq{}Provides Internet banking functionality via API\PYGZdq{})
\PYGZcb{}

System\PYGZus{}Ext(email\PYGZus{}system, \PYGZdq{}E\PYGZhy{}Mail System\PYGZdq{}, \PYGZdq{}The internal Microsoft Exchange system\PYGZdq{})
System\PYGZus{}Ext(banking\PYGZus{}system, \PYGZdq{}Mainframe Banking System\PYGZdq{}, \PYGZdq{}Stores all of the core banking information about customers, accounts, transactions, etc.\PYGZdq{})

Rel(customer, web\PYGZus{}app, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}HTTPS\PYGZdq{})
Rel(customer, spa, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}HTTPS\PYGZdq{})
Rel(customer, mobile\PYGZus{}app, \PYGZdq{}Uses\PYGZdq{})

Rel\PYGZus{}Neighbor(web\PYGZus{}app, spa, \PYGZdq{}Delivers\PYGZdq{})
Rel(spa, backend\PYGZus{}api, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}async, JSON/HTTPS\PYGZdq{})
Rel(mobile\PYGZus{}app, backend\PYGZus{}api, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}async, JSON/HTTPS\PYGZdq{})
Rel\PYGZus{}Back\PYGZus{}Neighbor(database, backend\PYGZus{}api, \PYGZdq{}Reads from and writes to\PYGZdq{}, \PYGZdq{}sync, JDBC\PYGZdq{})

Rel\PYGZus{}Back(customer, email\PYGZus{}system, \PYGZdq{}Sends e\PYGZhy{}mails to\PYGZdq{})
Rel\PYGZus{}Back(email\PYGZus{}system, backend\PYGZus{}api, \PYGZdq{}Sends e\PYGZhy{}mails using\PYGZdq{}, \PYGZdq{}sync, SMTP\PYGZdq{})
Rel\PYGZus{}Neighbor(backend\PYGZus{}api, banking\PYGZus{}system, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}sync/async, XML/HTTPS\PYGZdq{})


@enduml

\end{sphinxVerbatim}


\subsubsection{Component}
\label{\detokenize{C4/C4Stdlib:component}}
\begin{sphinxadmonition}{note}{Note:}
We then drill down into the “API Application” box.
\end{sphinxadmonition}

\begin{figure}[htbp]
\centering

\noindent{\hspace*{\fill}\sphinxincludegraphics{{plantuml-6dec8d6f56288d43906e8a05efd543faafc36b90}.png}\hspace*{\fill}}
\end{figure}

\begin{sphinxVerbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1]
@startuml

\PYGZsq{}!includeurl https://raw.githubusercontent.com/RicardoNiepel/C4\PYGZhy{}PlantUML/master/C4\PYGZus{}Component.puml
!include \PYGZlt{}c4/C4\PYGZus{}Component.puml\PYGZgt{}  


LAYOUT\PYGZus{}WITH\PYGZus{}LEGEND()


title Component diagram for Internet Banking System \PYGZhy{} API Application

Container(spa, \PYGZdq{}Single Page Application\PYGZdq{}, \PYGZdq{}javascript and angular\PYGZdq{}, \PYGZdq{}Provides all the internet banking functionality to customers via their web browser.\PYGZdq{})
Container(ma, \PYGZdq{}Mobile App\PYGZdq{}, \PYGZdq{}Xamarin\PYGZdq{}, \PYGZdq{}Provides a limited subset ot the internet banking functionality to customers via their mobile mobile device.\PYGZdq{})
ContainerDb(db, \PYGZdq{}Database\PYGZdq{}, \PYGZdq{}Relational Database Schema\PYGZdq{}, \PYGZdq{}Stores user registration information, hashed authentication credentials, access logs, etc.\PYGZdq{})
System\PYGZus{}Ext(mbs, \PYGZdq{}Mainframe Banking System\PYGZdq{}, \PYGZdq{}Stores all of the core banking information about customers, accounts, transactions, etc.\PYGZdq{})

Container\PYGZus{}Boundary(api, \PYGZdq{}API Application\PYGZdq{}) \PYGZob{}
    Component(sign, \PYGZdq{}Sign In Controller\PYGZdq{}, \PYGZdq{}MVC Rest Controlle\PYGZdq{}, \PYGZdq{}Allows users to sign in to the internet banking system\PYGZdq{})
    Component(accounts, \PYGZdq{}Accounts Summary Controller\PYGZdq{}, \PYGZdq{}MVC Rest Controlle\PYGZdq{}, \PYGZdq{}Provides customers with a summory of their bank accounts\PYGZdq{})
    Component(security, \PYGZdq{}Security Component\PYGZdq{}, \PYGZdq{}Spring Bean\PYGZdq{}, \PYGZdq{}Provides functionality related to singing in, changing passwords, etc.\PYGZdq{})
    Component(mbsfacade, \PYGZdq{}Mainframe Banking System Facade\PYGZdq{}, \PYGZdq{}Spring Bean\PYGZdq{}, \PYGZdq{}A facade onto the mainframe banking system.\PYGZdq{})

    Rel(sign, security, \PYGZdq{}Uses\PYGZdq{})
    Rel(accounts, mbsfacade, \PYGZdq{}Uses\PYGZdq{})
    Rel(security, db, \PYGZdq{}Read \PYGZam{} write to\PYGZdq{}, \PYGZdq{}JDBC\PYGZdq{})
    Rel(mbsfacade, mbs, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}XML/HTTPS\PYGZdq{})
\PYGZcb{}

Rel(spa, sign, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}JSON/HTTPS\PYGZdq{})
Rel(spa, accounts, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}JSON/HTTPS\PYGZdq{})

Rel(ma, sign, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}JSON/HTTPS\PYGZdq{})
Rel(ma, accounts, \PYGZdq{}Uses\PYGZdq{}, \PYGZdq{}JSON/HTTPS\PYGZdq{})
@enduml
\end{sphinxVerbatim}


\subsubsection{Class}
\label{\detokenize{C4/C4Stdlib:class}}
\begin{sphinxadmonition}{note}{Note:}
We could then add the Class diagrams for the different Components.
\end{sphinxadmonition}


\section{GitHub File Finder}
\label{\detokenize{github/githubFileFinder:github-file-finder}}\label{\detokenize{github/githubFileFinder:githubfilefinder-label}}\label{\detokenize{github/githubFileFinder::doc}}
\begin{sphinxadmonition}{tip}{Tip:}
Use GitHub File Finder to search for an icon quickly - directly from GitHub:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
Browse to the PlantUML Standard Library repo \sphinxurl{https://github.com/plantuml/plantuml-stdlib}

\item {} 
Press the \sphinxcode{\sphinxupquote{{}`t{}`}} key to enter GitHub File Finder mode

\item {} 
Type e.g. “lock”, “key”, “user”… or whatever you want to search for

\item {} 
The list of files/icons filenames that contain that text are shown

\end{enumerate}

\begin{figure}[H]
\centering

\noindent\sphinxincludegraphics{{filefinder}.png}
\end{figure}
\end{sphinxadmonition}


\section{Journey to Documentation as Code}
\label{\detokenize{DocumentationAsCode/JourneyDocumentationASCode:journey-to-documentation-as-code}}\label{\detokenize{DocumentationAsCode/JourneyDocumentationASCode:journeydoc-label}}\label{\detokenize{DocumentationAsCode/JourneyDocumentationASCode::doc}}
My journey to Documentation as Code began over a decago ago when either no documentation, or MS Word Documents were common. In more orgainised companies, these documents were maintained in MS Sharepoint.

Working as part of a large multi-national, I championed the use of Living Documents (Confluence was the tool used as we were using Atlassian tool suite).

My view today is that the documentation of software should live as close as possible to the software it is describing (e.g. same source code repository).
It can then be published to multiple formats or platforms from there for consumption.

Having powerful tools like PlantUML and Sphinx enable this.

Documentation in this case
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
refers to diagrams or models, user stories, requirements, guides etc…

\item {} 
is useful to guide the software architecture, implementation, development, and maintainance

\end{enumerate}


\subsection{My View On Documenation From 2013}
\label{\detokenize{DocumentationAsCode/JourneyDocumentationASCode:my-view-on-documenation-from-2013}}
Below is what I wrote at the time and I still believe it - even more so now.

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{LivingDocs1}.png}
\end{figure}

\begin{figure}[htbp]
\centering

\noindent\sphinxincludegraphics{{LivingDocs2}.png}
\end{figure}


\section{To Do List}
\label{\detokenize{todo:to-do-list}}\label{\detokenize{todo::doc}}
This ToDo list is autogenerated by Sphinx \sphinxhref{https://www.sphinx-doc.org/en/master/usage/extensions/todo.html}{todo} Extension

\begin{sphinxadmonition}{note}{Todo:}
Connect Images In A Diagram
\end{sphinxadmonition}

(The {\hyperref[\detokenize{PlantUMLSpriteLibraries/plantuml_sprites:id1}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/PlantUMLSpriteLibraries/plantuml\_sprites.rst, line 319.)

\begin{sphinxadmonition}{note}{Todo:}
add ref to reqs
\end{sphinxadmonition}

(The {\hyperref[\detokenize{Stdlib/StandardisingStdLib:id1}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/Stdlib/StandardisingStdLib.rst, line 38.)

\begin{sphinxadmonition}{note}{Todo:}
@startuml
usecase UC1 as ”
= Extra-large heading
Some text
== Large heading
Other text
=== Medium heading
Information
….
==== Small heading”
@enduml
\end{sphinxadmonition}

(The {\hyperref[\detokenize{Stdlib/StandardisingStdLib:id2}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/Stdlib/StandardisingStdLib.rst, line 129.)

\begin{sphinxadmonition}{note}{Todo:}
add ref to new way
\end{sphinxadmonition}

(The {\hyperref[\detokenize{StdlibUnderTheHood/StdlibUnderstanding:id1}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/StdlibUnderTheHood/StdlibUnderstanding.rst, line 20.)

\begin{sphinxadmonition}{note}{Todo:}
refine the scale, raw macros
\end{sphinxadmonition}

(The {\hyperref[\detokenize{StdlibUnderTheHood/StdlibUnderstanding:id2}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/StdlibUnderTheHood/StdlibUnderstanding.rst, line 238.)

\begin{sphinxadmonition}{note}{Todo:}
finish aws 3 diagram - figure out best way to do boundaries
\sphinxurl{https://github.com/dcasati/kubernetes-PlantUML} uses the c4 type boundary macros
\end{sphinxadmonition}

(The {\hyperref[\detokenize{aws/aws:id17}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/aws/aws.rst, line 362.)

\begin{sphinxadmonition}{note}{Todo:}
add GCP diagrams
\end{sphinxadmonition}

(The {\hyperref[\detokenize{gcp/gcp:id1}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/gcp/gcp.rst, line 48.)

\begin{sphinxadmonition}{note}{Todo:}
Add instructions for user to provide feedback
\end{sphinxadmonition}

(The {\hyperref[\detokenize{index:id1}]{\sphinxcrossref{\sphinxstyleemphasis{original entry}}}} is located in /home/documentation/docs/index.rst, line 207.)

\begin{sphinxadmonition}{note}{\label{\detokenize{index:id1}}Todo:}
Add instructions for user to provide feedback
\end{sphinxadmonition}

\begin{sphinxadmonition}{warning}{Warning:}
This is an initial draft that likely contains typos, and will likely change.
If you do find an issue, or would like to suggest a change, then submit an issue on Todo
\end{sphinxadmonition}



\renewcommand{\indexname}{Index}
\printindex
\end{document}